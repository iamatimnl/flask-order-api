<!DOCTYPE html>

<html lang="nl">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0" name="viewport"/>
<title>Nova Asia Ordering</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Quicksand:wght@400;700&family=Noto+Sans:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
<!-- 网页标签图标 -->
<link rel="icon" type="image/png" href="https://raw.githubusercontent.com/iamatimnl/Nova-Asia/main/assets/Logo.png">
<link rel="apple-touch-icon" sizes="1024x1024" href="https://raw.githubusercontent.com/iamatimnl/Nova-Asia/main/assets/Logo.png">
<link rel="icon" type="image/png" sizes="192x192" href="https://raw.githubusercontent.com/iamatimnl/Nova-Asia/main/assets/Logo.png">



<!-- iOS 设置 -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="Nova Asia">

<!-- Android 设置 -->
<meta name="mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#f2e9d8">



<style>
  body {
    font-family: 'Noto Sans', 'Open Sans', sans-serif;
    padding: 20px;
    max-width: 1200px;
    margin: auto;
    background: var(--primary-color);
    color: var(--secondary-color);
    padding-top: 60px;
    text-align: center;
    font-size: 18px;
    line-height: 1.6;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: 'Poppins', 'Quicksand', sans-serif;
  }

 :root {
  /* 🌿 主背景色 - 奶茶底 */
  --primary-color: #f2e9d8;

  /* 🌸 局部背景色（如卡片、浮层） */
  --section-alt-bg: #f2e9dc; /* 稍深一点的奶咖色 */

  --off-white-frosted: linear-gradient(
    to bottom,
    rgba(255, 250, 240, 0.92),
    rgba(245, 235, 225, 0.88),
    rgba(240, 230, 220, 0.85)
  );

  /* 🖌️ 主按钮色 */
  --accent-color: #6b4f3b; /* 温暖浓咖色 - 稳重主按钮 */
  --accent-secondary: #a58b72; /* 次按钮色 - 奶茶拿铁色 */

  /* 📝 文字色 */
  --secondary-color: #3e2f24; /* 深棕 - 清晰不刺眼 */

  /* ✨ 点缀色 */
  --accent-highlight: #e59c4b; /* 蜂蜜橘 - 轻盈而有强调 */
  --sakura: #d87474; /* 柔和樱花红 - 比原来的不刺眼 */
  --gold: #caa26a; /* 浅金色 - 用于高亮价格/图标 */
--accent-gradient-start: #f3e7d6;   /* 最浅：柔和米白 */
--accent-gradient-mid:   #e9dbc0;   /* 中间：主色调米色 */
--accent-gradient-end:   #e2d0aa;   /* 最深：奶茶棕米色 */




}


  button,
  input,
  select {
    border-radius: 12px;
    color:#000000;
  }

    /* Hide horizontal scroll bar in all modern browsers */
  .navbar-container::-webkit-scrollbar {
    display: none;
  }
  .navbar-container {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .navbar-container {
  position: fixed;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
 
  height: 70px;

  background: rgba(255, 255, 255, 0.545);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(16px);



  border-radius: 26px;

 

  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  z-index: 999;

  display: flex;
  align-items: center;
}


  .navbar {
  display: flex;
  flex-direction: row;
  white-space: nowrap;
  position: relative;
  width: auto;
  min-width: 100%;
  height: 100%;
  padding: 0;
  box-sizing: border-box;

 
  border-radius: 26px;
}




  .nav-categories {
    display: flex;
    white-space: nowrap;
  }

  @media (min-width: 768px) {
    .nav-categories {
      margin: 0 auto;
    }
  }

  .navbar a {
    flex: 0 0 auto;
    padding: 14px 20px;
    color:#bdaf9b;
    text-decoration: none;
    font-weight: bold;
    border-radius: 26px;
    transition: all 0.3s ease;
    position: relative;
    z-index: 2;
  }

  .navbar a.active {
    color: #3e2f24;
  }

  .home-btn {
    position: absolute;
    right: 0px;
    top: 50%;
    transform: translateY(-50%);
  }

  .indicator {
  position: absolute;
  left: 4px;
  top: 3px; /* ✅ 上边距 */
  height: calc(100% - 6px); /* ✅ 总高度减去上下间距 */
  background: linear-gradient(145deg, var(--accent-gradient-start), var(--accent-gradient-end));
  border-radius: 36px; /* ✅ 跟 navbar 保持药丸一致 */
  z-index: 1;
  transition: all 0.3s ease;
  will-change: transform;
 
}



@media (orientation: portrait) and (max-width: 1080px) {
  /* 竖屏时强制用 mobile 样式 */
  body {
    font-size: 16px;
    /* 加载你 mobile 的样式或类 */
  }
}


  .navbar::after {
    content: "";
    flex: 0 0 50vw;
  }
 

  /* 移动端专用样式（小于 768px 时生效） */
@media (max-width: 767px) {

  .navbar-container {
    width: 100%; /* ✅ 移动端缩小药丸宽度 */
    top: 0px;
    height: 42px; /* ✅ 移动端稍微降低高度 */
    border-radius: 26px; /* ✅ 移动端圆角更柔和 */
    
    background: rgba(255, 255, 255, 0.56);
    backdrop-filter: blur(12px);  

  }

  .navbar {
    border-radius: 26px;
  }

  .navbar a {
    padding: 12px 16px; /* ✅ 移动端按钮更小巧 */
    font-size: 0.8rem; /* ✅ 按钮字体略微缩小 */
  }

  .indicator {
    top: 1px; /* ✅ 滑块更贴边 */
    left: 3px;
    height: calc(100% - 3px); /* ✅ 滑块更饱满 */
    border-radius: 26px; /* ✅ 滑块圆角匹配移动端轨道 */
   
  }

}





  .cart-section {
  display: none; /* 默认隐藏 */
 }

  .apply-discount-btn:hover {
  background-color: 	var(--accent-highlight); /* 与结账按钮一致的深色悬停色 */
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15); /* 悬停时增加轻微阴影 */
  transform: scale(0.97); /* 悬停时轻微缩放反馈 */
 }



  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  p {
    text-align: center;
  }

  .menu-item {
    position: relative;
    aspect-ratio: 1 / 1;
    overflow: hidden;
    border-radius: 16px;
    margin: 10px auto;
    width: 80%;
    max-width: none;
  }

  img {
    max-width: 100%;
    height: auto;
  }

  .menu-item img {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }


  img.supply-img {
    width: 40px;
    height: 40px;
    object-fit: cover;
    border-radius: 12px;
  }

  .menu-item span {
    font-size: 1rem;
    white-space: normal;
    word-break: break-word;
    position: relative;
    z-index: 1;
  }

  .menu-item .menu-content {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px;
  }

  .menu-item h3,
  .menu-item p {
    background: rgba(255, 255, 255, 0.7);
    border-radius: 8px;
    padding: 4px 8px;
    margin: 2px 0;
  }

  .qty-box {
    position: absolute;
    bottom: 8px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px;
    width: calc(100% - 16px);
    justify-content: center;
    background: rgba(255, 255, 255, 0.7);
    border-radius: 8px;
  }
@media (min-width: 1268px) {
  .menu-item select {
    max-width: 260px;
    width: 70%;
    margin: 2px 0;
    padding: 4px 6px;
    font-size: 1.8rem;
    border-radius: 8px;
    border: 1px solid #3e2f24;
    background: rgba(255, 255, 255, 0.7);
    box-sizing: border-box;
    color: var(--accent-color);
  }
}




/* Ensure Omakase preference dropdowns keep full width */
#omakasePrefs select {
  width: 100%;
  max-width: 170px;
}
#dragonPrefs select {
  width: 100%;
  max-width: 170px;
}
.pokebowl-sauces {
  display: flex;
  flex-wrap: wrap;
  gap: 8px; /* 每个select之间的间距 */
}
.pokebowl-sauces select {
  width: 100%;
  max-width: 170px;
  margin-top: 1px;}



  @media (max-width: 760px){
.pokebowl-sauces select {
  width: 40%; /* 每行最多两个或三个，具体按需求调节 */
  min-width: 120px; /* 可防止太小 */
  box-sizing: border-box;
  font-size: 16px; /* 建议 >=16px 防止 iOS 放大 */
}}
 


  


  .bubble-option {
    display: flex;
    flex-direction: column;
    width: 100%;
  }


  .menu-item button {
    width: 2.2rem;
    height: 2.2rem;
    font-size: 1.2rem;
    padding: 0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex: 0 0 auto; /* prevent flexbox from squashing width/height */
    border-radius: 50%;
    border: 1px solid var(--accent-color);
    background: #fff;
    color: var(--accent-color);
    transition: background 0.2s ease;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }

/* 保留颜色差异 */
.add-button {
  background: var(--accent-color);
  color: white;
  border: 1px solid var(--accent-color);
  border-radius: 16px;
}

.add-button:hover {
  background: #7ad656;
}

.remove-button {
  background: var(--sakura);
  color: white;
  border: 1px solid var(--accent-color);
  border-radius: 16px;
}

.remove-button:hover {
  background: #f3a6a6;
}

.new-set-button {
  all: unset !important;
  background: var(--sakura)!important;
  color: white !important;
  border: none !important;
  border-radius: 8px !important;
  padding: 4px 10px !important;
  font-size: 0.85rem !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  cursor: pointer !important;
  min-width: auto !important;
  min-height: auto !important;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
  transition: all 0.2s ease !important;
}
@media (min-width: 768px) {
  .new-set-button {
    padding: 8px 16px !important;
    font-size: 1.5rem !important;
    border-radius: 10px !important;
  }
}

.new-set-button:active {
  transform: scale(0.95) !important;
  filter: brightness(0.9) !important;
}


.new-set-wrap.hidden {
  display: none !important;
}

.new-set-msg {
  font-size: 1rem;  /* 稍微加大，更友好 */
  color: white;
  font-weight: 200;
  letter-spacing: 0.2px;
  margin: 0;
  line-height: 1;
}


@media (min-width: 768px) {
  .new-set-msg {
    font-size: 2.2rem !important;
    color: white;
    font-weight: 600;
    letter-spacing: 0.8px;
    margin: 0;
    line-height: 1.4;
  }
}


.sold-out-msg {
  color: red;
  font-weight: bold;
  margin: 4px 0;
}




/* 手机端放大菜单项尺寸以提升可读性 */
@media (max-width: 768px) {
  .menu-item {
    width: 95%;
  }

  .menu-item button {
    width: 2.3rem;
    height: 2.3rem;
    font-size: 1.3rem;
  }

  .menu-item select {
    width: 50%;              /* 原来是 40%，更宽一点 */
    max-width: 160px;        /* 原来是 140px，更宽一点 */
    font-size: 0.9rem;       /* 字体稍小 */
    line-height: 1.1;        /* 增加 option 间距效果（部分浏览器支持） */
    padding: 6px 10px;
    margin: 1px 0;
    background: rgba(255, 255, 255, 0.7);
    border: 1px solid #3e2f24;
    border-radius: 6px;
    color: var(--accent-color);
  }
}


/* 🟡 portrait-mode 下 apply-discount-btn */
body.portrait-mode .apply-discount-btn {
  margin-left: 8px;
  padding: 8px 16px;
  background: linear-gradient(145deg, #2c2c2c, #1a1a1a);
  color: #ffffff;
  border: none;
  border-radius: 24px;
  cursor: pointer;
  font-weight: bold;
  font-size: 16px;   /* 👉 放大字体，适配高分辨率竖屏 */
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-shadow:
    4px 4px 8px rgba(0, 0, 0, 0.6),
    inset -1px -1px 2px rgba(255, 255, 255, 0.05),
    inset 1px 1px 3px rgba(0, 0, 0, 0.4);
  transition: transform 0.1s ease, box-shadow 0.3s ease;
}

body.portrait-mode .apply-discount-btn:active {
  transform: scale(0.90);
  color: #ffbc03;
  box-shadow:
    2px 2px 4px rgba(0, 0, 0, 0.7),
    inset 2px 2px 6px rgba(0, 0, 0, 0.5),
    inset -1px -1px 2px rgba(255, 255, 255, 0.05);
}
/* === Portrait Mode: 覆盖竖屏状态下购物车显示 === */
body.portrait-mode .cart-section.mobile-visible {
  display: flex !important;
  flex-direction: column;
  position: fixed;
  top: 0;
  bottom: 0;
  right: 0;
  width: 100vw;
  height: 100dvh; /* 动态适配地址栏收起后的高度 */
  background: rgba(0, 0, 0, 0.6);
  z-index: 2000;
  justify-content: flex-start;
  align-items: stretch;
  overflow-y: auto;
  overflow-x: hidden;
}

body.portrait-mode .cart-section.mobile-visible .cart-left {
  width: 100vw;
  max-height: 100%;
  flex: 1 1 auto;

  padding: 0 24px;         /* ✅ 原 8px 太小，左右统一改为 24px */
  margin-left: 5px;              /* ✅ 移除右边负 margin */
  box-sizing: border-box;

  font-size: 1.05rem;
  line-height: 1.4;
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;

  background: linear-gradient(to bottom, #ffffff, #e8e3dc, #ede7e0);
  backdrop-filter: blur(6px);
  position: relative;
}


/* 列表字体颜色 */
body.portrait-mode .cart-section.mobile-visible .cart-left li {
  color: #000000;
}

body.portrait-mode .cart-section.mobile-visible .cart-summary {
  width: 100%;
  flex: 0 0 auto;
  background: linear-gradient(to bottom, #ede7e0, #e5dfd8, #eae8e8);
  backdrop-filter: blur(6px);
  border-bottom-left-radius: 16px;

  margin-left: 10px;
  padding: 16px 24px;   /* ✅ 左右都有 padding，避免内容贴边 */
  box-sizing: border-box;

  position: relative;
}

/* Portrait 模式下关闭按钮定位 */
body.portrait-mode .cart-section.mobile-visible .cart-summary #closeCartBtn {
  top: 16px;
  right: 4px;
}




/* 为移动端购物车显示添加遮罩和居中显示 */
.cart-section.mobile-visible {
  display: flex !important;
  flex-direction: column;
  position: fixed;
  top: 0;
  bottom: 0;
  right: 0px;
  width: 100vw;
  height: 100dvh; /* ✅ 关键改动：使用 100dvh 解决地址栏收起自适配 */
  background: rgba(0, 0, 0, 0.6);
  z-index: 2000;
  justify-content: flex-start; /* ✅ 正确，顶部开始显示购物车 */
  align-items: stretch;  /* ✅ 水平居中可以保留 */
  overflow-y: auto; /* ✅ 确保购物车整体可以滑动，防止内容溢出 */
  overflow-x: hidden; /* ❌ 阻止横向滚动导致的整体滑动 */
 
}



/* 内部购物车面板保持现有宽度但适配移动端 */
.cart-section.mobile-visible .cart-left {
  width: 100vw;
  max-height: 100%;
  flex: 1 1 auto;

  padding: 0 8px;       /* ✅ 只保留一次 */
  margin-right: -8px;
  box-sizing: border-box;
  font-size: 0.95rem;
  line-height: 1.3;
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;

  background: #f2e9d8;
  
  position: relative;
}

 .cart-section.mobile-visible .cart-left li {
    color: #000000;
  }
.cart-section.mobile-visible .cart-summary {
  width: 100%;
  flex: 0 0 auto;
    background: #f2e9d8;
  
  border-bottom-left-radius: 16px;
  margin-top: 0px;
  margin-left: -10px;       /* 显式设定左边距 */
  padding-left: 10px;

  margin-bottom: 0px;
  
  margin-right: 20px;
  position: relative; /* allow absolute children like the close button */
}

/* Position close button inside summary on mobile */
.cart-section.mobile-visible .cart-summary #closeCartBtn {
  top: 16px;
  right: 4px;
}
@media (max-width: 768px) {
  .apply-discount-btn {
    margin-left: 8px;
    padding: 8px 16px; /* ↑↑ 增加上下 padding 提升居中感 */
    background: linear-gradient(145deg, #2c2c2c, #1a1a1a);
    color: #ffffff;
    border: none;
    border-radius: 24px;
    cursor: pointer;
    font-weight: bold;
    font-size: 10px;
    line-height: 1; /* 避免字体撑高 */

    display: inline-flex;
    align-items: center;
    justify-content: center;

    box-shadow:
      4px 4px 8px rgba(0, 0, 0, 0.6),
      inset -1px -1px 2px rgba(255, 255, 255, 0.05),
      inset 1px 1px 3px rgba(0, 0, 0, 0.4);
    transition: transform 0.1s ease, box-shadow 0.3s ease;
  }

  .apply-discount-btn:active {
    transform: scale(0.90);
    color: #ffbc03;
    box-shadow:
      2px 2px 4px rgba(0, 0, 0, 0.7),
      inset 2px 2px 6px rgba(0, 0, 0, 0.5),
      inset -1px -1px 2px rgba(255, 255, 255, 0.05);
  }
}





@media (min-width: 768px) {
  #cart-toggle {
    display: none;
  }
}

@media (min-width: 768px) {
  .cart-section {
    position: fixed;
    top: 69px;
    right: 25px;
    width: 600px;
    height: 95vh;
    display: flex;
    flex-direction: column;
    
    border-radius: 12px;
    z-index: 1000;
  }

  /* 左侧商品列表 */
  .cart-left {
  flex: 1 1 auto;
  display: flex;
  width: 600px;
  font-size: large;
  flex-direction: column;
  overflow: hidden;
  margin-top: 5px;

  background: #f7f1e4;
  backdrop-filter: blur(18px);
  padding: 16px;

 
}

.cart-left li {
  color: var(--accent-color);
  font-size: 1.2rem;
}

.cart-items {
  flex: 1;
  overflow-y: auto;
  padding-bottom: 16px;
}

.cart-summary {
  flex: 0 0 auto;
  width: 100%;
  position: static;
  font-size: larger;

  background: #f7f1e4;
  backdrop-filter: blur(18px);
  padding: 20px;

}

  /* 移动端相关按钮桌面隐藏 */
  #cart-toggle, #closeCartBtn, .slider-container {
    display: none !important;
  }
}


  .slider-container {
    height: 48px;
    max-width: 240px;
  }

  .slider-button {
    width: 46px;
    height: 46px;
  }




#cart-toggle {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 56px;
  height: 56px;
  background: linear-gradient(145deg, var(--accent-gradient-start), var(--accent-gradient-end));
  color: #3e2f24;
  font-size: 28px;
  font-weight: 600;
  border: none;
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  line-height: 1;
  cursor: pointer;
  z-index: 999;
}


/* logo floating above the cart button */
#back-to-top-logo {
  position: fixed; /* 悬浮 */
  bottom: 86px;    /* 离底部，距离购物车按钮适合 */
  right: 20px;     /* 离右侧 */
  
 

 
  width: 56px;     /* 尺寸 ✔️ 合理 */
  height: 56px;
  border-radius: 16px; /* 圆角 ✔️ 舒适 */
  z-index: 998;    /* 层级 ✔️ 足够悬浮 */
  cursor: pointer; /* 鼠标指针变手型 ✔️ 交互友好 */
  display: none;   /* 默认隐藏，适合用于移动端显示 */
}


@media (max-width: 768px) {
  #back-to-top-logo {
    display: block;
  }
}




@media (min-width: 768px) {
  #cart-toggle {
    display: none;
  }
}
@media (min-width: 768px) {
  #closeCartBtn {
    display: none;
  }
}
#cart-badge {
  background: var(--gold);
  color: white;
  border-radius: 50%;
  padding: 2px 6px;
  font-size: 12px;
  position: absolute;
  top: -5px;
  right: -5px;
  display: inline-block;
}
body.portrait-mode #closeCartBtn {
  display: block !important;
}

/* Portrait 模式：放大徽标角标 */
body.portrait-mode #cart-badge {
  font-size: 20px;
  padding: 4px 10px;
  top: -10px;
  right: -10px;
  box-shadow: 0 0 0 2px #1a1a1a; /* 可选描边增强对比 */
}
section {
  background: #f7f1e4; /* #f2e9d8 */
  padding: 40px 20px;
  border-radius: 16px;
  margin-bottom: 20px;
}

.delivery-options {
  background: #ffffffcc; /* 半透明白，保持轻盈但有层次 */
  border: 1px solid #e5dbc8; /* 与主题色协调的浅边框 */
  box-shadow:
    0 12px 32px rgba(0, 0, 0, 0.12),
    inset 0 1px 0 rgba(255, 255, 255, 0.5); /* 外阴影 + 内部高光，增加立体感 */
  padding: 24px;
  font-size: 1rem;
  text-align: left;
  border-radius: 16px;
  max-width: 700px;
  margin: auto;
}



.delivery-options h2 {
  text-align: center;
  font-size: 1.6rem;
  margin-bottom: 24px;
}

.delivery-options label {
  display: block;
  margin-top: 12px;
  margin-bottom: 4px;
  font-weight: 500;
  font-size: 0.95rem;
}
/* Portrait mode: enlarge base fonts and controls for better readability */
body.portrait-mode {
  font-size: 20px;
}

body.portrait-mode button,
body.portrait-mode select,
body.portrait-mode input,
body.portrait-mode textarea {
  font-size: 1.1em;
}


.delivery-options input,
.delivery-options select {
  width: 100%;
  min-height: 44px;
  padding: 10px 12px;
  font-size: 1rem;
  border: 1px solid #ccc;
  border-radius: 12px;
  box-sizing: border-box;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background-color: white;
  background-image: url('data:image/svg+xml;utf8,<svg fill="%23666" height="20" viewBox="0 0 24 24" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 16px 16px;
  padding-right: 36px;
}


.delivery-options input:focus,
.delivery-options select:focus {
  border-color: var(--accent-color);
  outline: none;
}

.hidden {
  display: none;
}

@media (max-width: 600px) {
  .delivery-options {
    padding: 16px;
  }

  .delivery-options h2 {
    font-size: 1.25rem;
  }
}


.supply-row {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 10px 0;
  padding: 10px 12px;
  background-color: #f9f5ee;
  border-radius: 12px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  flex-wrap: wrap;
}

.supply-img.emoji {
  font-size: 40px;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.supply-label {
  font-size: 0.95rem;
  white-space: nowrap;
}

.supply-select {
  min-width: 80px;
  padding: 6px 10px;
  font-size: 0.95rem;
  border-radius: 10px;
  border: 1px solid #ccc;
  background: white;
  background-image: url("data:image/svg+xml;utf8,<svg fill='%23666' height='20' viewBox='0 0 24 24' width='20' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
  background-repeat: no-repeat;
  background-position: right 10px center;
  background-size: 16px 16px;
  appearance: none;
  box-sizing: border-box;
}






.checkout-btn {
  background: linear-gradient(
    to bottom,
    #eedec2,
    #f1deb3,
    #e6cc96
  );
  color: #3e2f24;
  padding: 14px 28px;
  border: none;
  border-radius: 12px;
  font-size: 1.05rem;
  font-weight: 600;
  cursor: pointer;
  width: 100%;
  margin-top: 20px;
  letter-spacing: 0.5px;

  text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.4),
    0 4px 6px rgba(0, 0, 0, 0.08);

  transition:
    transform 0.15s ease-in-out,
    box-shadow 0.15s ease-in-out,
    filter 0.15s ease-in-out;
}

.checkout-btn:hover {
  background: linear-gradient(
    to bottom,
    #ddcaa0,
    #d1b780,
    #c8a86c
  );
  transform: scale(1.03);
  filter: brightness(1.03);
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.5),
    0 6px 10px rgba(0, 0, 0, 0.12);
}

.checkout-btn:active {
  transform: scale(0.97);
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
}
@media (min-width: 768px) {
  .apply-discount-btn {
    margin-left: 8px;
    padding: 6px 12px;
    background: linear-gradient(
      to bottom,
       #eedec2,
    #f1deb3,
    #e6cc96
    );
    color: #3e2f24;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;

    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.4),
      0 3px 5px rgba(0, 0, 0, 0.08);

    transition: all 0.2s ease-in-out;
  }

  .apply-discount-btn:hover {
    background: linear-gradient(
      to bottom,
      #ddcaa0,
      #d1b780,
      #c8a86c
    );
    filter: brightness(1.05);
    transform: scale(0.96);
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.5),
      0 4px 8px rgba(0, 0, 0, 0.1);
  }

  .apply-discount-btn:active {
    transform: scale(0.95);
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15);
  }
}



@media (max-width: 768px) {
  .apply-discount-btn {
    margin-left: 8px;
    padding: 8px 16px; /* ↑↑ 增加上下 padding 提升居中感 */
    background: black;
    color: #f2e9d8;
    border: none;
    border-radius: 24px;
    cursor: pointer;
    font-weight: bold;
    font-size: 16px;
    line-height: 1; /* 避免字体撑高 */

    display: inline-flex;
    align-items: center;
    justify-content: center;

    box-shadow:
      4px 4px 8px rgba(0, 0, 0, 0.6),
      inset -1px -1px 2px rgba(255, 255, 255, 0.05),
      inset 1px 1px 3px rgba(0, 0, 0, 0.4);
    transition: transform 0.1s ease, box-shadow 0.3s ease;
  }

  .apply-discount-btn:active {
    transform: scale(0.90);
    color: #cfb365;
    box-shadow:
      2px 2px 4px rgba(0, 0, 0, 0.7),
      inset 2px 2px 6px rgba(0, 0, 0, 0.5),
      inset -1px -1px 2px rgba(255, 255, 255, 0.05);
  }
}

.contact-lines {
  display: flex;
  flex-direction: column;
  gap: 6px; /* 控制行距紧凑，但有呼吸感 */
}

.contact-line {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 1rem;
}

.contact-line img {
  height: 20px;
}

.contact-line a {
  color: var(--accent-color);
  text-decoration: underline;
}

.feedback {
  position: fixed;
  top: 80px;
  left: 50%;
  transform: translateX(-50%);
  background: #ede7e0; /* 温柔米白按钮背景 */
  color: #111111; /* 卡片、按钮背景的局部白 */
  padding: 10px 20px;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
  z-index: 1000;
  display: none;
}

#status-banner {
  font-weight: bold;
  margin-bottom: 8px;
  color: #c97b49; /* 焦糖色，醒目但柔和 */
}

#hours-info {
  margin-bottom: 8px;
  color: #4b3a2f; /* 深灰正文色，更柔和 */
}

#closed-overlay {
  position: fixed;
  inset: 0;
  z-index: 2000;
  display: none;
  background: rgba(0, 0, 0, 0.5); /* 保持半透明黑色适合作为遮罩 */
  align-items: center;
  justify-content: center;
}

#closed-popup {
  background: #fffaf5; /* 奶白色卡片背景 */
  padding: 20px;
  border-radius: 12px;
  text-align: center;
  max-width: 90%;
  color: #4b3a2f; /* 正文颜色 */
}


.feedback.error {
  background: #f8c8d0; /* 错误反馈使用樱花粉，符合整体和风感 */
}



input, select, textarea {
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 8px 10px;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
  transition: border-color 0.2s, box-shadow 0.2s;
}
input:hover, select:hover, textarea:hover {
  border-color: #999;
}
input:focus, select:focus, textarea:focus {
  outline: none;
  border-color: var(--accent-color);
  box-shadow: 0 0 0 2px rgba(63,92,75,0.2);
}
.cart-section select {
  width: 3.5em;                /* ✅ 容纳两个字符或短文字 */
  padding: 2px 4px;            /* ✅ 上下边距最小化 */
  font-size: 0.85rem;          /* ✅ 清晰但紧凑 */
  border-radius: 6px;
  border: 1px solid #ccc;
  background-color: #fff;
  background-image: url("data:image/svg+xml;utf8,<svg fill='%23666' height='10' viewBox='0 0 24 24' width='10' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
  background-repeat: no-repeat;
  background-position: right 4px center;
  background-size: 10px 10px;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  box-shadow: none;
  margin: 2px;
  box-sizing: border-box;
  text-align: center;
}

/* ✅ 统一 focus 样式 */
.cart-section select:focus,
.supply-select:focus {
  outline: none;
  border-color: var(--accent-color);
}

.cart-section textarea {
  width: 100%;
  padding: 10px 12px;
  font-size: 1.4rem;
  border-radius: 12px;
  border: 1px solid #ccc;
  box-sizing: border-box;
  resize: vertical;
}

.cart-section textarea:focus {
  outline: none;
  border-color: var(--accent-color);
}

.price-details {
  text-align: left;
  margin-top: 10px;
  font-size: 1.25rem;
}
.price-details .price-row {
  display: flex;
  justify-content: space-between;
  margin: 4px 0;
}
.price-details select {
  width: auto;
}
.price-details .total-row {
  font-weight: bold;
  border-top: 1px solid #ccc;
  padding-top: 4px;
}
.price-details .btw-note {
  font-size: 0.99rem;
  color: #555;
  text-align: right;
}

/* cart layout helpers */
.cart-items {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  padding-bottom: 1rem;
  text-align: left;
}

.cart-items.scrollable {
  max-height: 100vh;
}

@media (max-width: 767px) {
  #xBowlBase {
    width: 100%;
    font-size: 0.8rem;
    padding: 4px;
  }
}

@media (max-width: 480px) {
  .cart-section textarea {
    width: 100%;
    padding: 10px 12px;
    font-size: 0.85rem;
    border-radius: 12px;
    border: 1px solid #ccc;
    box-sizing: border-box;
    resize: vertical;
  }

  .cart-section textarea:focus {
    outline: none;
    border-color: var(--accent-color);
  }

  .price-details {
    text-align: left;
    margin-top: 10px;
    font-size: 0.95rem; /* 小屏缩小字体 */
  }

  .price-details .price-row {
    display: flex;
    justify-content: space-between;
    margin: 4px 0;
  }

  .price-details select {
    width: auto;
  }

  .price-details .total-row {
    font-weight: bold;
    border-top: 1px solid #ccc;
    padding-top: 4px;
  }

  .price-details .btw-note {
    font-size: 0.8rem;
    color: #555;
    text-align: right;
  }
}





#cartExtrasContainer {
  text-align: center;
  padding: 10px;
  box-sizing: border-box;
}

/* extras row inside cart */
.cart-extras {
  display: flex;
  justify-content: space-around;
  gap: 8px;
  margin-top: 4px;
}

.cart-extra-item {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.cart-extra-item img {
  width: 40px;
  height: 40px;
}

.cart-extra-item select {
  width: 50px;
  margin-top: 2px;
  padding: 4px;
  font-size: 0.9rem;
}
/* === Portrait 模式下购物车内的 textarea 优化 === */
body.portrait-mode .cart-section textarea {
  width: 100%;
  padding: 14px 16px;
  font-size: 1rem;
  border-radius: 16px;
  border: 1px solid #ccc;
  box-sizing: border-box;
  resize: vertical;
}

body.portrait-mode .cart-section textarea:focus {
  outline: none;
  border-color: var(--accent-color);
}

/* === Portrait 模式下价格明细块优化 === */
body.portrait-mode .price-details {
  text-align: left;
  margin-top: 12px;
  font-size: 1.1rem;  /* ⬆️ 字体略放大适配高分辨率 */
}

body.portrait-mode .price-details .price-row {
  display: flex;
  justify-content: space-between;
  margin: 6px 0;
}

body.portrait-mode .price-details select {
  width: auto;
  font-size: 1rem;
}

body.portrait-mode .price-details .total-row {
  font-weight: bold;
  border-top: 1px solid #ccc;
  padding-top: 6px;
}

body.portrait-mode .price-details .btw-note {
  font-size: 0.95rem;
  color: #555;
  text-align: right;
}


/* === Portrait 模式下额外选项容器 === */
body.portrait-mode #cartExtrasContainer {
  text-align: center;
  padding: 12px;
  box-sizing: border-box;
}

/* extras row inside cart */
body.portrait-mode .cart-extras {
  display: flex;
  justify-content: space-around;
  gap: 12px;
  margin-top: 6px;
}

/* 单个额外项：对齐、图片尺寸、下拉大小 */
body.portrait-mode .cart-extra-item {
  display: flex;
  flex-direction: column;
  align-items: center;
}

body.portrait-mode .cart-extra-item img {
  width: 56px;  /* ⬆️ 放大图标 */
  height: 56px;
}

body.portrait-mode .cart-extra-item select {
  width: 64px;
  margin-top: 4px;
  padding: 6px;
  font-size: 1rem;
}



/* 修复结账按钮遮挡问题 - 标准修复版 */
.checkout-panel {
  display: flex;
  flex-direction: column;
  height: 60vh;
}

.checkout-scroll-content {
  flex: 1;
  overflow-y: auto;
  padding-bottom: 80px;
}

.fixed-bottom-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  padding: 12px;
  background: #fff;
  border-top: 1px solid #ddd;
  z-index: 9999;
  text-align: center;
}

#submit-order {
  font-size: 18px;
  background-color: #222;
  color: white;
  border: none;
  padding: 16px;
  width: 100%;
  border-radius: 12px;
}

/* 进一步压缩 checkout-panel 高度并确保按钮可见 */
.checkout-panel {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 80vh; /* 明确限制高度为 80vh */
  max-height: 80vh;
  background: #c01d1d;
  z-index: 9998;
  display: flex;
  flex-direction: column;
  box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
}

.checkout-scroll-content {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  padding-bottom: 80px;
}

.fixed-bottom-bar {
  position: sticky;
  bottom: 0;
  left: 0;
  width: 100%;
  padding: 12px;
  background: #fff;
  border-top: 1px solid #ddd;
  z-index: 9999;
  text-align: center;
  box-shadow: 0 -1px 5px rgba(0,0,0,0.05);
}

#submit-order {
  font-size: 18px;
  background-color: #222;
  color: white;
  border: none;
  padding: 16px;
  width: 100%;
  border-radius: 12px;
}
.desktop-only {
  display: block;
}
.mobile-only {
  display: none;
}
@media (max-width: 768px) {
  .desktop-only {
    display: none !important;
  }
  .mobile-only {
    display: block !important;
  }
}

/* X-Bowl styles */
.xbowl-summary {
  background: rgba(255,255,255,0.7);
  backdrop-filter: blur(6px);
  border-radius: 8px;
  padding: 4px 8px;
  margin: 2px 0;
  font-size: 0.8rem;
}
.menu-item[data-name="X-Bowl"] .menu-content {
  align-items: flex-start;
}
@media (max-width: 767px) {
  .menu-item[data-name="X-Bowl"] { aspect-ratio: auto; height: auto; }
  .menu-item[data-name="X-Bowl"] .menu-content { position: static; }
  .menu-item[data-name="X-Bowl"] img { position: static; width: 100%; height: auto; }
  .menu-item[data-name="X-Bowl"] .qty-box { position: static; transform: none; width: 100%; margin-top: 8px; }
  #xBowlMains, #xBowlToppings {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 8px;
}



#xBowlMains > div,
#xBowlToppings > div {
  flex: 0 0 calc(50% - 3px);
  min-width: 140px;     /* 避免太小 */
  box-sizing: border-box;
  display: flex;
  align-items: center;
}

  #xBowlMains select, #xBowlToppings select { width: 100%; }
  #xBowlMains button, #xBowlToppings button {
    width: 1.4rem;
    height: 1.4rem;
    font-size: 0.7rem;
  }
}
/* 桌面端主料和配料布局优化 */
#xBowlMains,
#xBowlToppings {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 8px;
}

#xBowlMains > div,
#xBowlToppings > div {
  flex: 0 0 200px;       /* 固定宽度更清晰 */
  min-width: 160px;
  box-sizing: border-box;
  display: flex;
  align-items: center;
}

#xBowlMains select,
#xBowlToppings select {
  width: 100%;
  font-size: 0.8rem;
  padding: 4px;
}
@media (min-width: 768px) {
  #xBowlBase,
  #xBowlMains select,
  #xBowlToppings select {
    width: 280px !important;          /* 统一宽度 */
    max-width: 100% !important;
    font-size: 1.3rem !important;
    padding: 6px 10px !important;
    border: 1px solid #aaa !important;
    border-radius: 6px !important;
    background: rgba(255, 255, 255, 0.9) !important;
    box-sizing: border-box !important;
  }

  #xBowlMains > div,
  #xBowlToppings > div {
    flex: 0 0 280px !important;
    max-width: 280px !important;
  }
}

/* Increase font size on larger screens for better readability */
@media (min-width: 768px) {
  html { font-size: 19px; }
  body { font-size: 1.5rem !important; }
  h1 { font-size: 2.7rem !important; }
  h2 { font-size: 2.3rem !important; }
  h3 { font-size: 1.9rem !important; }
  h4 { font-size: 1.7rem !important; }
  h5 { font-size: 1.5rem !important; }
  h6 { font-size: 1.4rem !important; }
  p,
  label,
  input,
  select,
  textarea,
  button,
  a {
    font-size: 1.3rem !important;
  }
}
.slider-container {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%) scale(0.7);
  width: 50%;
  max-width: 300px;
  height: 64px;

  /* ✅ 灰色渐变背景：更有层次 */
  background: linear-gradient(145deg, #5A5A5A, #2F2F2F);

  /* ✅ 柔和磨砂玻璃感 */
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);

  /* ✅ 圆角和内边距 */
  border-radius: 32px;
  padding: 0;

  /* ✅ 立体阴影：下方浮起感 */
  box-shadow: 
    0 4px 12px rgba(0, 0, 0, 0.2),     /* 外部阴影 */
    inset 0 1px 2px rgba(255, 255, 255, 0.08); /* 内部高光 */

  z-index: 999;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;

  /* ✅ 边框淡描边（可选） */

}


.slider-track {
  position: relative;
  width: 100%;
  margin-left: -20px;
  height: 100%;
  border-radius: 42px;
  background: black;
  padding: 0 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  touch-action: pan-y;
  
}
.p-h3 {
  font-size: 1.9rem !important;
  font-weight: 600 !important;
  line-height: 1.2 !important;
  margin: 0 0 8px 0 !important;
  color: #3e2f24;
}

/* 手机端优化：≤ 767px */
@media (max-width: 767px) {
  .p-h3 {
    font-size: 1.3rem !important;
    line-height: 1.3 !important;
    margin-bottom: 6px !important;
  }
}


.slider-button {
  width: 61px;
  height: 61px;
  background: #f2e9d8;
  border-radius: 50%;
  position: absolute;
  left: 1px;
  top: 50%;
  transform: translateY(-50%);
  z-index: 10;
  transition: left 0.3s ease, box-shadow 0.3s ease, transform 0.1s ease;
  font-weight: bold;
  font-size: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #3e2f24;
  cursor: pointer;
  touch-action: pan-y;
  box-shadow:
    4px 4px 8px rgba(0, 0, 0, 0.5),   /* 外部阴影 */
    inset -2px -2px 4px rgba(255, 255, 255, 0.1), /* 内部高光 */
    inset 2px 2px 4px rgba(0, 0, 0, 0.3);         /* 内部阴影 */

  /* 可选加 hover 效果 */
}



.slider-button:active {
  transform: translateY(-50%) scale(0.95);
  box-shadow:
    inset 0 1px 1px rgba(255, 255, 255, 0.4),
    0 2px 4px rgba(166, 113, 68, 0.4),
    0 4px 12px rgba(0, 0, 0, 0.2);
}

@keyframes ios-shine {
  0% {
    background-position: 100% 0; /* 从左开始 */
  }
  100% {
    background-position: -100% 0;  /* 向右扫过去 */
  }
}


.slider-text {
  position: absolute;
  left: 51%;
  top: 50%;
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 1;
  font-size: 11px;
  font-weight: 600;
  background: linear-gradient(90deg, #363333 0%, #fffdfd 50%, #000000 100%);

  background-size: 200% auto;
  background-position: 100% 0;
  background-clip: text;
  -webkit-background-clip: text;
  color: black;
  -webkit-text-fill-color: transparent;
  animation: ios-shine 4s linear infinite;
}


.spinner {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: conic-gradient(
    #cdac6b 0deg,
    #a87c4a 120deg,
    #fdf8f0 160deg,
    transparent 220deg,
    #4a3824 360deg
  );
  animation: spin 0.8s linear infinite;
  mask: radial-gradient(farthest-side, transparent 60%, black 61%);
  -webkit-mask: radial-gradient(farthest-side, transparent 60%, black 61%);
  box-shadow: 0 0 4px rgba(108, 79, 61, 0.4);
  margin: auto;
}
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}




/* === Portrait 模式下：slider 容器整体放大 === */
body.portrait-mode .slider-container {
  transform: translateX(-50%) scale(1.4); /* 👉 放大 1.4 倍 */
  width: 20vw;                            /* 更宽，适配大屏 */
  max-width: 400px;
  border-radius: 50px;
  height: 90px;                           /* 原 64px → 放大 */
  bottom: 48px;                           /* 底部提高一点 */
}

/* Portrait 模式下滑块按钮加大 */
body.portrait-mode .slider-button {
  width: 88px;
  height: 88px;
  margin-left: -16px; 
  font-size: 40px;                        /* 字体更醒目 */
}

/* Portrait 模式下 slider 中的提示文字加大 */
body.portrait-mode .slider-text {
  font-size: 18px;                        /* 提示文字放大 */
  font-weight: 700;
  
}

/* Portrait 模式下滑块轨道调整 */
body.portrait-mode .slider-track {
  margin-left: 0px;
  padding: 0 28px;
  border-radius: 42px;
  background: #747373e0;
}

/* Portrait 模式下加载旋转动画的 spinner 放大 */
body.portrait-mode .spinner {
  width: 48px;
  height: 48px;
}



/* 默认：手机端样式 */
.order-type-slider {
  margin: 16px auto 20px;
  width: 90%;
  max-width: 340px;
  height: 50px;
  

  transition: box-shadow 0.3s ease, border 0.3s ease;
  border-radius: 26px;
  position: relative;
  overflow: hidden;
}

.order-type-track {
  position: relative;
  width: 100%;
  height: 100%;
  padding: 0 8px;
  box-sizing: border-box;
  border-radius: 26px;
  background:#3e2f24;
  box-shadow: inset 0 1px 3px rgba(255, 255, 255, 0.2), 
              0 2px 8px rgba(0, 0, 0, 0.15); /* 内外阴影提升立体感 */
  backdrop-filter: blur(12px); 
}

.order-type-button {
  position: absolute;
  left: 6px;
  top: 50%;
  transform: translateY(-50%);
  width: 45%;
  height: 85%;
  border-radius: 26px;
  background: linear-gradient(145deg, var(--accent-gradient-start), var(--accent-gradient-end));
  color: #3e2f24;
  font-weight: 600;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: left 0.3s ease;
  user-select: none;
}

.order-type-text {
  position: absolute;
  right: 6px;
  top: 50%;
  transform: translateY(-50%);
  pointer-events: none;
  font-weight: 600;
  font-size: 1.5rem;
  white-space: nowrap;
  background: linear-gradient(90deg, #363333 0%, #fffdfd 50%, #000000 100%);
  background-size: 200% auto;
  background-position: -200% 0;
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: shine 4s linear infinite;
}

.order-type-text.left {
  left: 12px;
  right: auto;
}

/* ✅ 桌面端放大版本：仅限宽度 ≥768px */
@media (min-width: 768px) {
  .order-type-slider {
    margin: 20px auto 24px;
    width: 95%;
    max-width: 400px;
    height: 65px;
    font-size: 1.4rem;
    border-radius: 30px;
    background: #f2e9d8;
    backdrop-filter: blur(14px);
  }

  .order-type-track {
    padding: 0 10px;
    border-radius: 30px;
    backdrop-filter: blur(14px);
  }

  .order-type-button {
    left: 8px;
    width: 46%;
    height: 88%;
    border-radius: 30px;
    font-size: 1.3rem;
  }

  .order-type-text {
    font-size: 2rem;
    right: 10px;
  }

  .order-type-text.left {
    left: 14px;
    font-size: 1.4;
  }
}


@keyframes shine {
  0% {
    background-position: 100% 0; /* 从左开始 */
  }
  100% {
    background-position: -100% 0;  /* 向右扫过去 */
  }
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

@media (max-width: 768px) {
.order-type-text {
  font-size: 0.8rem; /* slightly smaller text */
  font-weight: 400; /* keep bold */
  /* prevent text wrapping */

}}
@media (min-width: 768px) {
  .order-type-text {
  font-size: 1.2rem; /* slightly smaller text */
  font-weight: 500; /* keep bold */
  /* prevent text wrapping */

}}
.install-popup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.4); /* 背景半透明 */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 999;
}

.install-popup {
    background: #fdf7f2; /* 奶茶色 */
    padding: 20px 30px;
    border-radius: 16px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    max-width: 300px;
    text-align: center;
    animation: fadeIn 0.3s ease;
}

.wapp-section {
    background: #f0e2c3;
    padding: 20px;
    margin: 20px;
    border-radius: 12px;
    border: 1px solid #e09142;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    font-family: 'Noto Sans', 'Open Sans', sans-serif;
}

.wapp-section h3 {
    margin-top: 0;
    color: #3f220b;
}

.wapp-section p {
    color: #3f220b;
}





@keyframes fadeIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
}

.clipboard {
  position: fixed;     /* ✅ 固定在视口位置，滚动时不动 */
  top: 670px;            /* 距离页面顶端 80px */
  left: 6px;             /* 贴右边 */
  width: 600px;
  background: yellow;
  padding: 16px;
  text-align: center;
  border-top-right-radius: 16px;
  border-bottom-right-radius: 16px;
  box-shadow:
    0 -4px 8px rgba(224, 176, 126, 0.15),
    4px 0 8px rgba(224, 176, 126, 0.15);
  z-index: 1000;       /* 确保它在上层可见 */
}
body.portrait-mode #cart-toggle {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background-color: #6b4f3b;
  color: white;
  border: none;
  border-radius: 50%;
  padding: 16px;
  z-index: 999;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}



.clipboard-header {
  display: flex;
  align-items: center;
  justify-content: center; /* ✅ 加这个就能居中标题 */
  gap: 8px;
  font-size: 1.4rem;
  color: #333;
  margin-bottom: 12px;
  white-space: nowrap;
  text-align: center;
}


.clipboard-content {
  color: var(--accent-color);
  font-size: 1rem;
  line-height: 1.5;
}
@media (max-width: 768px) {
  .clipboard {
    display: none;
  }
}



@media (min-width: 768px) {
    .cart-title-icon {
      font-size: 2.4rem; /* 放大图标尺寸 */
      top: -5px !important   ;           /* 微调图标位置 */
    }
  }


/* 响应式控制 */
.desktop-only {
  display: block;
}
.mobile-only {
  display: none;
}
@media (max-width: 768px) {
  .desktop-only {
    display: none !important;
  }
  .mobile-only {
    display: block !important;
  }
}




.logo-heading {
  font-size: 2em;
  display: flex;
  align-items: center;
  justify-content: center;  /* ✅ 水平居中 */
  text-align: center;
}

.logo-desktop {
  display: none;             /* 默认隐藏 */
  height: 1.8em;             /* ✅ 稍大于文字（可调 1.5 ~ 2.0em） */
  margin-right: 0.5em;
  vertical-align: middle;
}

/* 在桌面端显示图片 */
@media (min-width: 768px) {
  .logo-desktop {
    display: inline-block;
  }
}


body.portrait-mode .menu-container {
  flex-direction: column;
  padding: 10px;
}

/* Portrait layout overrides mimicking max-width: 768px rules */
body.portrait-mode .apply-discount-btn {
  margin-left: 8px;
  padding: 8px 16px;
  background: linear-gradient(145deg, #2c2c2c, #1a1a1a);
  color: #ffffff;
  border: none;
  border-radius: 24px;
  cursor: pointer;
  font-weight: bold;
  font-size: 10px;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-shadow:
    4px 4px 8px rgba(0, 0, 0, 0.6),
    inset -1px -1px 2px rgba(255, 255, 255, 0.05),
    inset 1px 1px 3px rgba(0, 0, 0, 0.4);
  transition: transform 0.1s ease, box-shadow 0.3s ease;
}
body.portrait-mode .apply-discount-btn:active {
  transform: scale(0.90);
  color: #ffbc03;
  box-shadow:
    2px 2px 4px rgba(0, 0, 0, 0.7),
    inset 2px 2px 6px rgba(0, 0, 0, 0.5),
    inset -1px -1px 2px rgba(255, 255, 255, 0.05);
}
body.portrait-mode #back-to-top-logo {
  display: block;
}
body.portrait-mode .apply-discount-btn {
  font-size: 16px;
  color: #f9d571;
}
body.portrait-mode .desktop-only {
  display: none !important;
}
body.portrait-mode .mobile-only {
  display: block !important;
}
body.portrait-mode .order-type-text {
  font-size: 0.8rem;
  font-weight: 400;
}
body.portrait-mode .clipboard {
  display: none;
}

/* Hide desktop checkout panel and enable mobile cart in portrait */
body.portrait-mode .checkout-panel {
  display: none !important;
}
body.portrait-mode .cart-section {
  display: none !important;
}
body.portrait-mode .cart-section.mobile-visible {
  display: flex !important;
}
body.portrait-mode #cart-toggle {
  display: flex !important;
}

/* 🛒购物篮按钮 - 适中放大为 144px */
body.portrait-mode #cart-toggle {
  width: 144px;
  height: 144px;
  bottom: 32px;
  right: 32px;
  font-size: 52px; /* 用于 emoji 或字体图标 */
  border-radius: 24px;
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
  z-index: 999;
}

/* 🔝回到顶部按钮 - 同样放大，间隔拉高 */
body.portrait-mode #back-to-top-logo {
  display: block;
  width: 144px;
  height: 144px;
  bottom: 200px; /* 确保和购物车之间有充分空间 */
  right: 32px;
  background-color: #444;
  border-radius: 24px;
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
  z-index: 998;
}

/* ⬆️ 确保图标或图像适应容器 */
body.portrait-mode #cart-toggle svg,
body.portrait-mode #back-to-top-logo svg,
body.portrait-mode #back-to-top-logo img {
  width: 100%;
  height: 100%;
}
.cart-badge {
  position: absolute;
  top: -6px;
  right: -6px;
  background-color: red;
  color: white;
  border-radius: 50%;
  padding: 2px 6px;
  font-size: 0.75rem;
  font-weight: bold;
  line-height: 1;
  z-index: 10;
}
@media (max-width: 767px) {
  .cart-badge {
    top: -4px;
    right: -4px;
    font-size: 0.75rem;
    padding: 2px 5px;
  }
}
body.portrait-mode .cart-badge {
  transform: scale(2);
  transform-origin: top right;
}





  
</style>



</head>
<body>
<div id="closed-overlay">
  <div id="closed-popup">
    <p id="closed-text"></p>
    <button id="closed-ok">OK</button>
  </div>
</div>
<div class="feedback" id="feedback"></div>
<div class="navbar-container" id="navbar-container">
<nav class="navbar" id="navbar">
<div class="nav-categories">
<a href="#delivery-options">Bestelwijze</a>
<a href="#checkbox-group">Benodigdheden</a>
<a href="#bento">Bento Box</a>
<a href="#Ramen">Ramen</a>
<a href="#Pokebowl">Pokebowl</a>
<a href="#Teppanyaki">Teppanyaki Gebakken Rijst</a>
<a href="#sushi">Omakase Sushi</a>
<a href="#sashimi">Sashimi</a>
<a href="#Crispy-rice-sandwich">Crispy Rice</a>
<a href="#snack">Snack</a>
<a href="#dessert">Dessert</a>
<a href="#drinks">Drinks</a>
<a href="#bubble">Bubble Tea</a>
<a href="#info">Info</a>
<a href="#wapp">Wapp</a>



<a href="/review-list" class="review-link">Review</a>

</div>
<a href="#" class="home-btn" id="homeBtn" onclick="window.scrollTo({top:0,behavior:'smooth'});return false;">Home</a>
<a href="/en" class="review-link lang-switch" title="Switch to English" style="display: inline-flex; align-items: center; gap: 8px;">
<svg xmlns="http://www.w3.org/2000/svg" width="32" height="21" viewBox="0 0 60 40" style="border-radius: 4px; box-shadow: 0 0 2px rgba(0,0,0,0.3);">
    <rect width="60" height="40" fill="#012169"/>
    <path d="M0,0 L60,40 M60,0 L0,40" stroke="#fff" stroke-width="6"/>
    <path d="M0,0 L60,40 M60,0 L0,40" stroke="#C8102E" stroke-width="4"/>
    <path d="M30,0 V40 M0,20 H60" stroke="#fff" stroke-width="10"/>
    <path d="M30,0 V40 M0,20 H60" stroke="#C8102E" stroke-width="6"/>
  </svg>
</a>
<div class="indicator" id="indicator"></div>
</nav>
</div>
<h1 class="logo-heading">
  <img src="static/images/Logo.png" alt="Nova Asia Logo" class="logo-desktop" />
  Nova Asia Online Bestellen
</h1>


<section id="delivery-options">
<div class="delivery-options">
<h2>Kies uw bestelmethode</h2>
<div id="status-banner"></div>
<div id="hours-info"></div>
<div class="order-type-slider">
  <input id="afhalen" name="orderType" type="radio" value="afhalen" onchange="toggleOrderType()" checked class="hidden">
  <input id="bezorgen" name="orderType" type="radio" value="bezorgen" onchange="toggleOrderType()" class="hidden">
  <div class="order-type-track" id="typeSliderTrack">
    <div class="order-type-button" id="typeSliderButton">Pick Up</div>
    <span class="order-type-text" id="typeSliderText">Slide to Deliver</span>
  </div>
</div>
<div class="info-text" id="locationInfo" style="white-space: pre-line; font-size: 0.95rem; margin-top: 8px;"></div>
<!-- Afhalen 表单 -->
<div id="afhalenFields">
<label>Naam:</label>
<input id="pickupName" type="text"/>
<label>Telefoonnummer:</label>
<input id="pickupPhone" type="tel"/>
<label>Email:</label>
<input id="pickupEmail" type="email" required/>
<label>Tijd van afhalen:</label>
<select id="pickup_time"></select>
<label>Betaalmethode:</label>
<select id="pickupPayment">
<option value="online" selected>Online betaling</option>
<option value="contant">Contant</option>
<option value="pin">Pin</option>
</select>
</div>
<!-- Bezorgen 表单（默认隐藏） -->
<div class="hidden" id="bezorgenFields">
<label>Naam:</label>
<input id="deliveryName" type="text"/>
<label>Telefoonnummer:</label>
<input id="deliveryPhone" type="tel"/>
<label>Email:</label>
<input id="deliveryEmail" type="email" required/>
<label>Postcode:</label>
<input id="deliveryPostcode" type="text"/>
<label>Huisnummer:</label>
<input id="deliveryHouseNumber" type="text"/>
<label>Adres:</label>
<input id="deliveryAddress" type="text"/>
<label>Gebied:</label>
<input id="deliveryArea" type="text"/>
<div id="mapLinkContainer" style="margin-top: 4px;"></div>
<label>Bezorgtijd:</label>
<select id="delivery_time"></select>
<label>Betaalmethode:</label>
<select id="deliveryPayment">
<option value="online" selected>Online betaling</option>
<option value="contant">Contant</option>
<option value="oprekening">Op rekening</option>
</select>
</div>
</div>
</section>
<section id="checkbox-group">
<div class="checkbox-group">
<h2>Benodigdheden</h2>
<p style="margin-top: -12px; font-size: 0.95rem; color: #6A994E; text-align: center;">
    Geef aan wat u nodig heeft. Voorkom verspilling, denk aan het milieu. 🌱
</p>
<div class="supply-row">
    <img alt="Stokjes" class="supply-img photo" src="{{ url_for('static', filename='images/chopsticks.png') }}"/>
    <div class="supply-content">
        <label for="chopstickCount">Aantal stokjes</label>
        <select class="supply-select" id="chopstickCount"></select>
    </div>
</div>

<!-- Sojasaus -->
<div class="supply-row">
<img alt="Sojasaus" class="supply-img photo" src="{{ url_for('static', filename='images/sjal.png') }}"/>
<div class="supply-content">
<label for="soyCount">Aantal sojasaus</label>
<select class="supply-select" id="soyCount"></select>
</div>
</div>
<!-- Wasabi -->
<div class="supply-row">
<img alt="Wasabi" class="supply-img photo" src="{{ url_for('static', filename='images/wasabib.png') }}"/>
<div class="supply-content">
<label for="wasabiCount">Aantal wasabi</label>
<select class="supply-select" id="wasabiCount"></select>
</div>
</div>
<!-- Gember -->
<div class="supply-row">
<img alt="Gember" class="supply-img photo" src="{{ url_for('static', filename='images/gembeerr.png') }}"/>
<div class="supply-content">
<label for="gemberCount">Aantal gember</label>
<select class="supply-select" id="gemberCount"></select>
</div>
</div>
</div></section>
<div class="cart-section" id="mobileCart">

  <!-- 左侧: Winkelwagen 商品列表 -->
<div class="cart-left">  
  <div class="cart-items">
    <div style="
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 12px;
    ">
      <!-- 配送方式显示 -->
      <span style="display: flex; align-items: center; gap: 6px;">
  <select id="cartOrderTypeSelect" style="
    padding: 6px 10px;
    border-radius: 10px;
    border: 1px solid #ccc;
    font-size: 1rem;
    width: 120px;
  ">
    <option value="afhalen">Afhaal</option>
    <option value="bezorgen">Bezorg</option>
  </select>
  <img
    id="orderTypeIcon"
    src="/static/images/pickup.svg"
    alt="Order type icon"
    style="height: 24px; margin-left: 4px;"
  />
</span>



      <!-- 支付方式 + 图标 -->
      <span style="display: flex; align-items: center; gap: 6px;">
        <select id="cartPaymentSelect" style="
          padding: 6px 10px;
  border-radius: 10px;
  border: 1px solid #ccc;
  font-size: 1rem;
  width: 190px;
        ">
          <option value="online" selected>Online betaling</option>
          <option value="contant">Contant</option>
          <option value="pin">Pin</option>
          <option value="oprekening">Op rekening</option>
        </select>
        <img
          id="cartIcon"
          src="https://raw.githubusercontent.com/iamatimnl/Nova-Asia/main/icons/online.svg"
          alt="Payment icon"
          style="height: 24px; vertical-align: middle;"
        />
      </span>
    </div>



    <!-- 购物车商品列表 -->
    <ul id="cart"></ul>

  </div>
</div>



  <!-- 右侧: 结算区域 -->
  <div class="cart-summary pretty-gradient">

   <button id="closeCartBtn" onclick="toggleMobileCart()" style="background: none; border: none; padding: 6px; cursor: pointer;">
  <img src="https://raw.githubusercontent.com/iamatimnl/Nova-Asia/main/icons/close.svg" alt="Close" style="width: 30px; height: 30px;"> Terug
</button>


    <div id="cartExtrasContainer"></div>

    <textarea id="remark" placeholder="Opmerking: bijv. geen komkommer,extra avocado" rows="2"></textarea>


    <div class="price-details">
      <div class="price-row"><span>Subtotaal:</span> <span id="subtotalDisplay">€0,00</span></div>
      <div class="price-row"><span>Verpakkingskosten:</span> <span id="packagingDisplay">€0,00</span></div>
      <div class="price-row" id="deliveryRow"><span>Bezorgkosten:</span> <span id="deliveryDisplay">€2,50</span></div>
      <div class="spacer"></div>
      <div class="spacer"></div>
      <div class="spacer"></div>
      <div class="spacer"></div>
      <div class="price-row">
        <label for="discountCode">Kortingscode:</label>
        <input id="discountCode" />
        <!-- 桌面端按钮（原样保留） -->
        <button id="validateDiscountBtn" class="apply-discount-btn" type="button">Apply</button>

      </div>
      <div class="price-row" id="discountRow" style="display:none;"><span>Korting:</span> <span id="discountDisplay">- €0,00</span></div>
      <div class="spacer"></div>
      <div class="spacer"></div>
      <div class="price-row">
  <label for="tipSelect">Fooi:</label>
  <select id="tipSelect" style="width: 85px; border-radius: 6px;"></select>
</div>

      <div class="price-row"><span>BTW:</span> <span id="btwDisplay">€0,00</span></div>
      <div class="price-row total-row"><span>Totaal:</span> <span id="totalDisplay">€0,00</span></div>
      <div class="btw-note">Alle prijzen zijn inclusief BTW</div>
    </div>
     
    <!-- 桌面端正常结账按钮 -->
    <button class="checkout-btn desktop-only" onclick="checkout()">Afrekenen &amp; Betalen</button>

    <!-- 移动端滑动确认按钮 -->
    <div class="slider-container mobile-only">
      <div class="slider-track" id="sliderTrack">
        <div class="slider-button" id="sliderButton">➜</div>
        <span class="slider-text" id="sliderText">Schuif om te bestellen</span>
      </div>
    </div>
  </div>
</div>
<div class="clipboard">
  <div class="clipboard-header">📋 <strong>Mededeling</strong></div>
  <div class="clipboard-content">
    <p>Vandaag zijn we gesloten wegens onderhoud. Bedankt voor uw begrip!</p>
  </div>
</div>
<button id="cart-toggle" onclick="toggleMobileCart()">
  <svg xmlns="http://www.w3.org/2000/svg" class="ionicon" width="30" height="30"    viewBox="0 0 512 512"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M256 256v128M320 320H192M80 176a16 16 0 00-16 16v216c0 30.24 25.76 56 56 56h272c30.24 0 56-24.51 56-54.75V192a16 16 0 00-16-16zM160 176v-32a96 96 0 0196-96h0a96 96 0 0196 96v32"/></svg>
  <span id="cart-count" class="cart-badge">0</span>

</button>
<img alt="Back to top" id="back-to-top-logo" src="{{ url_for('static', filename='images/Logo.png') }}"/>

<section id="bento">
<div class="menu-group">
<h2 style="margin-top: -8px; font-size: 1.5rem; color: #333; text-align: center; font-weight: bold;">
  Bento box
</h2>
<!-- Japans Chicken Bento -->
<div class="menu-row menu-item" data-name="Japans Chicken Bento" data-packaging="0.2" data-price="22">
<div class="menu-img">
<img alt="Japans Chicken Bento" src="{{ url_for('static', filename='images/chicken-bento.jpg') }}"/>
</div>
<div class="menu-content">
<h3>Japans Chicken Bento</h3>
<p>€ 22.00</p>
<p id="soldoutJapansChickenBento" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="japansChickenBentoCount" type="button">-</button>
<select id="japansChickenBentoCount" name="japansChickenBentoCount"></select>
<button class="qty-plus add-button" data-target="japansChickenBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Korean Chicken Bento -->
<div class="menu-row menu-item" data-name="Korean Chicken Bento" data-packaging="0.2" data-price="22">
<div class="menu-img">
<img alt="Korean Chicken Bento" src="{{ url_for('static', filename='images/chicken-bento.jpg') }}"/>
</div>
<div class="menu-content">
<h3>Korean Spicy Chicken Bento 🌶</h3>


<p>€ 22.00</p>
<p id="soldoutKoreanChickenBento" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="koreanChickenBentoCount" type="button">-</button>
<select id="koreanChickenBentoCount" name="koreanChickenBentoCount"></select>
<button class="qty-plus add-button" data-target="koreanChickenBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Korean Beef Bento -->
<div class="menu-row menu-item" data-name="Korean Beef Bento" data-packaging="0.2" data-price="25">
<div class="menu-img">
<img alt="Korean Beef Bento" src="{{ url_for('static', filename='images/Meatlove bento.png') }}"/>
</div>
<div class="menu-content">
<h3>Korean Beef Bento</h3>
<p>€ 25.00</p>
<p id="soldoutKoreanBeefBento" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="koreanBeefBentoCount" type="button">-</button>
<select id="koreanBeefBentoCount" name="koreanBeefBentoCount"></select>
<button class="qty-plus add-button" data-target="koreanBeefBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Meatlover Bento -->
<!-- Meatlover Bento -->
<div class="menu-row menu-item" data-name="Meatlover Bento" data-packaging="0.2" data-price="25">
<div class="menu-img">
<img alt="Meatlover Bento" src="{{ url_for('static', filename='images/Meatlove bento.png') }}"/>
</div>
<div class="menu-content">
<h3>Meatlover Bento</h3>
<p>€ 25.00</p>
<p id="soldoutMeatloverBento" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="meatloverBentoCount" type="button">-</button>
<select id="meatloverBentoCount" name="meatloverBentoCount"></select>
<button class="qty-plus add-button" data-target="meatloverBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Zalm Lover Bento -->
<div class="menu-row menu-item" data-name="Zalm Lover Bento" data-packaging="0.2" data-price="23">
<div class="menu-img">
<img alt="Zalm Lover Bento" src="{{ url_for('static', filename='images/zalm-lover-bento.jpg') }}"/>
</div>
<div class="menu-content">
<h3>Zalm Lover Bento</h3>
<p>€ 23.00</p>
<p id="soldoutZalmLoverBento" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="zalmLoverBentoCount" type="button">-</button>
<select id="zalmLoverBentoCount" name="zalmLoverBentoCount"></select>
<button class="qty-plus add-button" data-target="zalmLoverBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Ebi Lover Bento -->
<div class="menu-row menu-item" data-name="Ebi Lover Bento" data-packaging="0.2" data-price="23">
<div class="menu-img">
<img alt="Ebi Lover Bento" src="{{ url_for('static', filename='images/ebi-lover-bento.png') }}"/>
</div>
<div class="menu-content">
<h3>Ebi Lover Bento</h3>
<p>€ 23.00</p>
<p id="soldoutEbiLoverBento" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="ebiLoverBentoCount" type="button">-</button>
<select id="ebiLoverBentoCount" name="ebiLoverBentoCount"></select>
<button class="qty-plus add-button" data-target="ebiLoverBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Surf & Turf Bento -->
<div class="menu-row menu-item" data-name="Surf &amp; Turf Bento" data-packaging="0.2" data-price="25">
<div class="menu-img">
<img alt="Surf &amp; Turf Bento" src="{{ url_for('static', filename='images/surf-turf-bento.jpg') }}"/>
</div>
<div class="menu-content">
<h3>Surf &amp; Turf Bento</h3>
<p>€ 25.00</p>
<p id="soldoutSurfTurfBento" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="surfTurfBentoCount" type="button">-</button>
<select id="surfTurfBentoCount" name="surfTurfBentoCount"></select>
<button class="qty-plus add-button" data-target="surfTurfBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Dimsum Bento -->
<div class="menu-row menu-item" data-name="Dimsum Bento" data-packaging="0.2" data-price="20">
<div class="menu-img">
<img alt="Dimsum Bento" src="{{ url_for('static', filename='images/dimsum-bento.png') }}"/>
</div>
<div class="menu-content">
<h3>Dimsum Bento</h3>
<p>€ 20.00</p>
<p id="soldoutDimsumBento" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="dimsumBentoCount" type="button">-</button>
<select id="dimsumBentoCount" name="dimsumBentoCount"></select>
<button class="qty-plus add-button" data-target="dimsumBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Lamskotelet Bento -->
<div class="menu-row menu-item" data-name="Lamskotelet Bento" data-packaging="0.2" data-price="30">
<div class="menu-img">
<img alt="Lamskotelet Bento" src="{{ url_for('static', filename='images/lamskotelet-bento.jpg') }}"/>
</div>
<div class="menu-content">
<h3>Lamskotelet(NZL) Bento</h3>


<p>€ 30.00</p>
<p id="soldoutLamskoteletBento" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="lamsBentoCount" type="button">-</button>
<select id="lamsBentoCount" name="lamsBentoCount"></select>
<button class="qty-plus add-button" data-target="lamsBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Unagi Bento -->
<div class="menu-row menu-item" data-name="Unagi Bento" data-packaging="0.2" data-price="24">
<div class="menu-img">
<img alt="Unagi Bento" src="{{ url_for('static', filename='images/UNA.jpg') }}"/>
</div>
<div class="menu-content">
<h3>Unagi Bento</h3>
<p>€ 24.00</p>
<p id="soldoutUnagiBento" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="unagiBentoCount" type="button">-</button>
<select id="unagiBentoCount" name="unagiBentoCount"></select>
<button class="qty-plus add-button" data-target="unagiBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Tuna Bento -->
<div class="menu-row menu-item" data-name="Tuna Bento" data-packaging="0.2" data-price="25">
<div class="menu-img">
<img alt="Tuna Bento" src="{{ url_for('static', filename='images/tunapo.png') }}"/>
</div>
<div class="menu-content">
<h3>Usuyaki(beefrolletjes) Bento</h3>
<p>€ 25.00</p>
<p id="soldoutTunaBento" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="tunaBentoCount" type="button">-</button>
<select id="tunaBentoCount" name="tunaBentoCount"></select>
<button class="qty-plus add-button" data-target="tunaBentoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Veggie Bento -->
<div class="menu-row menu-item" data-name="Veggie Bento" data-packaging="0.2" data-price="20">
<div class="menu-img">
<img alt="Veggie Bento" src="{{ url_for('static', filename='images/veggie-bento.png') }}"/>
</div>
<div class="menu-content">
<h3>Veggie Bento</h3>
<p>€ 20.00</p>
<p id="soldoutVeggieBento" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="veggieBentoCount" type="button">-</button>
<select id="veggieBentoCount" name="veggieBentoCount"></select>
<button class="qty-plus add-button" data-target="veggieBentoCount" type="button">+</button>
</div>
</div>
</div>
<div class="menu-row menu-item" data-name="Bento Sushi Omakase" data-packaging="0.2" data-price="22">
<div class="menu-img">
<img alt="Bento Sushi Omakase" src="{{ url_for('static', filename='images/SUSHI.png') }}"/>
</div>
<div class="menu-content">
<h3>Bento Sushi Omakase</h3>
<p>€ 22.00</p>
<p id="soldoutSushiBento" class="sold-out-msg hidden">Uitverkocht!</p>
<p class="menu-description">±16st Verrassing van de chef!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="sushiBentoCount" type="button">-</button>
<select id="sushiBentoCount" name="sushiBentoCount"></select>
<button class="qty-plus add-button" data-target="sushiBentoCount" type="button">+</button>
</div>
<div id="omakasePrefs"></div>
</div>
</div>
<!-- Xbento - Stel je eigen bento samen -->
<!-- Xbento - Stel je eigen bento samen -->
<div class="menu-row menu-item" data-name="Xbento" data-packaging="0.2" data-price="25">
<div class="menu-img">
<img alt="Xbento" src="{{ url_for('static', filename='images/xbento.png') }}"/>
</div>
<div class="menu-content">
<p class="p-h3">Xbento Vanaf € X</p>
<p id="soldoutXbento" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="bubble-option">
<select id="xBentoMain">
<option value="">Hoofdgerecht</option>
</select>
</div>
<div class="bubble-option">
<select id="xBentoSide">
<option value="">Bijgerecht</option>
</select>
</div>
<div class="bubble-option">
  <select id="xBentoRice">
<option value="">Rijstsoort</option>
  </select>
</div>
<div class="bubble-option">
  <select id="xBentoVeg">
    <option value="">Groente</option>
  </select>
</div>
    <div class="new-set-wrap hidden" id="xBentoNewWrap">
      <span class="new-set-msg">Toegevoegd aan winkelwagen!</span>
      <button type="button" class="new-set-button" id="xBentoNew">Selecteer een nieuwe optie</button>
    </div>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="xBentoQty" type="button">-</button>
<select class="qty-select" id="xBentoQty" name="xBentoQty"></select>
<button class="qty-plus add-button" data-target="xBentoQty" type="button">+</button>
</div>
</div>
</div>
</div>
</section>
<!-- Pokebowl Section -->
<section id="Ramen">
<h2>Ramen</h2>
<div class="menu-section">
  <!-- Ebi Furai Ramen -->
  <div class="menu-row menu-item" data-code="ebi" data-name="Ebi Furai" data-packaging="0.2" data-price="18">
    <div class="menu-img">
      <img alt="Ebi Furai Ramen" src="{{ url_for('static', filename='images/REBI.png') }}"/>
    </div>
    <div class="menu-content">
      <h3>Ebi Furai</h3>
      <p>€ 18.00</p>
      <p id="soldoutEbiRamen" class="sold-out-msg hidden">Uitverkocht!</p>
      <div class="bubble-option">
        <select id="ebiBase">
          <option value="">Base</option>
          <option value="Ramen">Ramen</option>
          <option value="Udon">Udon</option>
        </select>
      </div>
      <div class="bubble-option">
        <select id="ebiSmaak">
          <option value="">Smaak</option>
          <option value="Miso">Miso</option>
          <option value="Soyu">Shoyu</option>
        </select>
      </div>
      <div class="new-set-wrap hidden" id="ebiNewWrap">
        <span class="new-set-msg">Toegevoegd aan winkelwagen!</span>
        <button type="button" class="new-set-button" id="ebiNew">Selecteer een nieuwe optie</button>
      </div>
      <div class="qty-box">

        <button class="qty-minus remove-button" data-target="ebiQty" type="button">-</button>
        <select id="ebiQty"></select>
        <button class="qty-plus add-button" data-target="ebiQty" type="button">+</button>
      </div>
    </div>
  </div>
  <!-- Chicken Ramen -->
  <div class="menu-row menu-item" data-code="chicken" data-name="Chicken" data-packaging="0.2" data-price="18">
    <div class="menu-img">
      <img alt="Chicken Ramen" src="{{ url_for('static', filename='images/RCHICKEN.png') }}"/>
    </div>
    <div class="menu-content">
      <h3>Chicken</h3>
      <p>€ 18.00</p>
      <p id="soldoutChickenRamen" class="sold-out-msg hidden">Uitverkocht!</p>
      <div class="bubble-option">
        <select id="chickenBase">
          <option value="">Base</option>
          <option value="Ramen">Ramen</option>
          <option value="Udon">Udon</option>
        </select>
      </div>
      <div class="bubble-option">
        <select id="chickenSmaak">
          <option value="">Smaak</option>
          <option value="Miso">Miso</option>
          <option value="Soyu">Shoyu</option>
        </select>
      </div>
      <div class="new-set-wrap hidden" id="chickenNewWrap">
        <span class="new-set-msg">Toegevoegd aan winkelwagen!</span>
        <button type="button" class="new-set-button" id="chickenNew">Selecteer een nieuwe optie</button>
      </div>
      <div class="qty-box">
  
        <button class="qty-minus remove-button" data-target="chickenQty" type="button">-</button>
        <select id="chickenQty"></select>
        <button class="qty-plus add-button" data-target="chickenQty" type="button">+</button>
      </div>
    </div>
  </div>
  <!-- Beef Ramen -->
  <div class="menu-row menu-item" data-code="beef" data-name="Beef" data-packaging="0.2" data-price="18">
    <div class="menu-img">
      <img alt="Beef Ramen" src="{{ url_for('static', filename='images/RBEEF.png') }}"/>
    </div>
    <div class="menu-content">
      <h3>Beef</h3>
      <p>€ 18.00</p>
      <p id="soldoutBeefRamen" class="sold-out-msg hidden">Uitverkocht!</p>
      <div class="bubble-option">
        <select id="beefBase">
          <option value="">Base</option>
          <option value="Ramen">Ramen</option>
          <option value="Udon">Udon</option>
        </select>
      </div>
      <div class="bubble-option">
        <select id="beefSmaak">
          <option value="">Smaak</option>
          <option value="Miso">Miso</option>
          <option value="Soyu">Shoyu</option>
        </select>
      </div>
      <div class="new-set-wrap hidden" id="beefNewWrap">
        <span class="new-set-msg">Toegevoegd aan winkelwagen!</span>
        <button type="button" class="new-set-button" id="beefNew">Selecteer een nieuwe optie</button>
      </div>
      <div class="qty-box">

        <button class="qty-minus remove-button" data-target="beefQty" type="button">-</button>
        <select id="beefQty"></select>
        <button class="qty-plus add-button" data-target="beefQty" type="button">+</button>
      </div>
    </div>
  </div>
  <!-- Ribeye Ramen -->
  <div class="menu-row menu-item" data-code="ribeye" data-name="Ribeye" data-packaging="0.2" data-price="18">
    <div class="menu-img">
      <img alt="Ribeye Ramen" src="{{ url_for('static', filename='images/RUSU.png') }}"/>
    </div>
    <div class="menu-content">
      <h3>Ribeye</h3>
      <p>€ 18.00</p>
      <p id="soldoutRibeyeRamen" class="sold-out-msg hidden">Uitverkocht!</p>
      <div class="bubble-option">
        <select id="ribeyeBase">
          <option value="">Base</option>
          <option value="Ramen">Ramen</option>
          <option value="Udon">Udon</option>
        </select>
      </div>
      <div class="bubble-option">
        <select id="ribeyeSmaak">
          <option value="">Smaak</option>
          <option value="Miso">Miso</option>
          <option value="Soyu">Shoyu</option>
        </select>
      </div>
      <div class="new-set-wrap hidden" id="ribeyeNewWrap">
        <span class="new-set-msg">Toegevoegd aan winkelwagen!</span>
        <button type="button" class="new-set-button" id="ribeyeNew">Selecteer een nieuwe optie</button>
      </div>
      <div class="qty-box">
  
        <button class="qty-minus remove-button" data-target="ribeyeQty" type="button">-</button>
        <select id="ribeyeQty"></select>
        <button class="qty-plus add-button" data-target="ribeyeQty" type="button">+</button>
      </div>
    </div>
  </div>
  <!-- Chasiu Ramen -->
  <div class="menu-row menu-item" data-code="chasiu" data-name="Chasiu" data-packaging="0.2" data-price="18">
    <div class="menu-img">
      <img alt="Chasiu Ramen" src="{{ url_for('static', filename='images/tonkotsu-ramen.png') }}"/>
    </div>
    <div class="menu-content">
      <h3>Cha siu (Geroosterd varkensvless)</h3>
      <p>€ 18.00</p>
      <p id="soldoutChasiuRamen" class="sold-out-msg hidden">Uitverkocht!</p>
      <div class="bubble-option">
        <select id="chasiuBase">
          <option value="">Base</option>
          <option value="Ramen">Ramen</option>
          <option value="Udon">Udon</option>
        </select>
      </div>
      <div class="bubble-option">
        <select id="chasiuSmaak">
          <option value="">Smaak</option>
          <option value="Miso">Miso</option>
          <option value="Soyu">Shoyu</option>
        </select>
      </div>
      <div class="new-set-wrap hidden" id="chasiuNewWrap">
        <span class="new-set-msg">Toegevoegd aan winkelwagen!</span>
        <button type="button" class="new-set-button" id="chasiuNew">Selecteer een nieuwe optie</button>
      </div>
      <div class="qty-box">

        <button class="qty-minus remove-button" data-target="chasiuQty" type="button">-</button>
        <select id="chasiuQty"></select>
        <button class="qty-plus add-button" data-target="chasiuQty" type="button">+</button>
      </div>
    </div>
  </div>
  <!-- Zhai Ramen -->
  <div class="menu-row menu-item" data-code="zhai" data-name="Zhai" data-packaging="0.2" data-price="18">
    <div class="menu-img">
      <img alt="Zhai Ramen" src="{{ url_for('static', filename='images/斋.png') }}"/>
    </div>
    <div class="menu-content">
      <h3>Vegetarisch</h3>
      <p>€ 18.00</p>
      <p id="soldoutZhaiRamen" class="sold-out-msg hidden">Uitverkocht!</p>
      <div class="bubble-option">
        <select id="zhaiBase">
          <option value="">Base</option>
          <option value="Ramen">Ramen</option>
          <option value="Udon">Udon</option>
        </select>
      </div>
      <div class="bubble-option">
        <select id="zhaiSmaak">
          <option value="">Smaak</option>
          <option value="Miso">Miso</option>
          <option value="Soyu">Shoyu</option>
        </select>
      </div>
      <div class="new-set-wrap hidden" id="zhaiNewWrap">
        <span class="new-set-msg">Toegevoegd aan winkelwagen!</span>
        <button type="button" class="new-set-button" id="zhaiNew">Selecteer een nieuwe optie</button>
      </div>
      <div class="qty-box">

        <button class="qty-minus remove-button" data-target="zhaiQty" type="button">-</button>
        <select id="zhaiQty"></select>
        <button class="qty-plus add-button" data-target="zhaiQty" type="button">+</button>
      </div>
    </div>
  </div>
</div>
</section>
<section id="Pokebowl">
  <h2>Pokebowl</h2>
  <div class="menu-section">
    <div class="menu-row menu-item" data-name="Zalm Bowl" data-price="15" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/zwp.png') }}" alt="Zalm Bowl">
      </div>
      <div class="menu-content">
        <h3>Zalm Bowl</h3>
        <p>€ 15.00</p>
        <p id="soldoutZalmBowl" class="sold-out-msg hidden">Uitverkocht!</p>
        <div class="qty-box">
 
          <button class="qty-minus remove-button" data-target="zalmBowlQty" type="button">-</button>
          <select id="zalmBowlQty" name="zalmBowlQty"></select>
          <button class="qty-plus add-button" data-target="zalmBowlQty" type="button">+</button>
        </div>
        <div id="zalmBowlQtySauces" class="pokebowl-sauces"></div>
      </div>
    </div>
    <div class="menu-row menu-item" data-name="Tuna Bowl" data-price="15" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/tup.png') }}" alt="Tuna Bowl">
      </div>
      <div class="menu-content">
        <h3>Tuna Bowl</h3>
        <p>€ 15.00</p>
        <p id="soldoutTunaBowl" class="sold-out-msg hidden">Uitverkocht!</p>
        <div class="qty-box">
       
          <button class="qty-minus remove-button" data-target="tunaBowlQty" type="button">-</button>
          <select id="tunaBowlQty" name="tunaBowlQty"></select>
          <button class="qty-plus add-button" data-target="tunaBowlQty" type="button">+</button>
        </div>
        <div id="tunaBowlQtySauces" class="pokebowl-sauces"></div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Ebi Fry Bowl" data-price="15.5" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/虾boel.png') }}" alt="Ebi Fry Bowl">
      </div>
      <div class="menu-content">
        <h3>Ebi Fry Bowl</h3>
        <p>€ 15.50</p>
        <p id="soldoutEbiFryBowl" class="sold-out-msg hidden">Uitverkocht!</p>
        <div class="qty-box">
        
          <button class="qty-minus remove-button" data-target="ebiFryBowlQty" type="button">-</button>
          <select id="ebiFryBowlQty" name="ebiFryBowlQty"></select>
          <button class="qty-plus add-button" data-target="ebiFryBowlQty" type="button">+</button>
        </div>
        <div id="ebiFryBowlQtySauces" class="pokebowl-sauces"></div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Chicken Karaage Bowl" data-price="15.5" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/chicken-kar.jpg') }}" alt="Chicken Karaage Bowl">
      </div>
      <div class="menu-content">
        <h3>Chicken Karaage Bowl</h3>
        <p>€ 15.50</p>
        <p id="soldoutChickenKaraageBowl" class="sold-out-msg hidden">Uitverkocht!</p>
        <div class="qty-box">

          <button class="qty-minus remove-button" data-target="chickenKaraageBowlQty" type="button">-</button>
          <select id="chickenKaraageBowlQty" name="chickenKaraageBowlQty"></select>
          <button class="qty-plus add-button" data-target="chickenKaraageBowlQty" type="button">+</button>
        </div>
        <div id="chickenKaraageBowlQtySauces" class="pokebowl-sauces"></div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Spicy Chicken Bowl" data-price="15.5" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/chicken-kar.jpg') }}" alt="Spicy Chicken Bowl">
      </div>
      <div class="menu-content">
        <h3>Spicy Chicken Bowl</h3>
        <p>€ 15.50</p>
        <p id="soldoutSpicyChickenBowl" class="sold-out-msg hidden">Uitverkocht!</p>
        <div class="qty-box">
         
          <button class="qty-minus remove-button" data-target="spicyChickenBowlQty" type="button">-</button>
          <select id="spicyChickenBowlQty" name="spicyChickenBowlQty"></select>
          <button class="qty-plus add-button" data-target="spicyChickenBowlQty" type="button">+</button>
        </div>
        <div id="spicyChickenBowlQtySauces" class="pokebowl-sauces"></div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Teriyaki Chicken Bowl" data-price="15.5" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/teriyaki-chicken-bowl.jpg') }}" alt="Teriyaki Chicken Bowl">
      </div>
      <div class="menu-content">
        <h3>Teriyaki Chicken Bowl</h3>
        <p>€ 15.50</p>
        <p id="soldoutTeriyakiChickenBowl" class="sold-out-msg hidden">Uitverkocht!</p>
        <div class="qty-box">
    
          <button class="qty-minus remove-button" data-target="teriyakiChickenBowlQty" type="button">-</button>
          <select id="teriyakiChickenBowlQty" name="teriyakiChickenBowlQty"></select>
          <button class="qty-plus add-button" data-target="teriyakiChickenBowlQty" type="button">+</button>
        </div>
        <div id="teriyakiChickenBowlQtySauces" class="pokebowl-sauces"></div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Teriyaki Beef Bowl" data-price="15.5" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/nrp.png') }}" alt="Teriyaki Beef Bowl">
      </div>
      <div class="menu-content">
        <h3>Teriyaki Beef Bowl</h3>
        <p>€ 15.50</p>
        <p id="soldoutTeriyakiBeefBowl" class="sold-out-msg hidden">Uitverkocht!</p>
        <div class="qty-box">
        
          <button class="qty-minus remove-button" data-target="teriyakiBeefBowlQty" type="button">-</button>
          <select id="teriyakiBeefBowlQty" name="teriyakiBeefBowlQty"></select>
          <button class="qty-plus add-button" data-target="teriyakiBeefBowlQty" type="button">+</button>
        </div>
        <div id="teriyakiBeefBowlQtySauces" class="pokebowl-sauces"></div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="California Bowl" data-price="14" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/calibowl.png') }}" alt="California Bowl">
      </div>
      <div class="menu-content">
        <h3>California Bowl</h3>
        <p>€ 14.00</p>
        <p id="soldoutCaliforniaBowl" class="sold-out-msg hidden">Uitverkocht!</p>
        <div class="qty-box">
    
          <button class="qty-minus remove-button" data-target="californiaBowlQty" type="button">-</button>
          <select id="californiaBowlQty" name="californiaBowlQty"></select>
          <button class="qty-plus add-button" data-target="californiaBowlQty" type="button">+</button>
        </div>
        <div id="californiaBowlQtySauces" class="pokebowl-sauces"></div>
      </div>
    </div>



    <div class="menu-row menu-item" data-name="Unagi Bowl" data-price="16" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/Unagi.jpg') }}" alt="Vega Bowl">
      </div>
      <div class="menu-content">
        <h3>Unagi Bowl (Gerilde paling)</h3>
        <p>€ 16.00</p>
        <p id="soldoutVegaBowl" class="sold-out-msg hidden">Uitverkocht!</p>
        <div class="qty-box">
   
          <button class="qty-minus remove-button" data-target="unagiBowlQty" type="button">-</button>
          <select id="unagiBowlQty" name="unagiBowlQty"></select>
          <button class="qty-plus add-button" data-target="unagiBowlQty" type="button">+</button>
        </div>
        <div id="unagiBowlQtySauces" class="pokebowl-sauces"></div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Vega Bowl" data-price="13" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/vega-bowl.jpg') }}" alt="Vega Bowl">
      </div>
      <div class="menu-content">
        <h3>Vega Bowl (Vegetarisch)</h3>
        <p>€ 13.00</p>
        <p id="soldoutVegaBowl" class="sold-out-msg hidden">Uitverkocht!</p>
        <div class="qty-box">

          <button class="qty-minus remove-button" data-target="vegaBowlQty" type="button">-</button>
          <select id="vegaBowlQty" name="vegaBowlQty"></select>
          <button class="qty-plus add-button" data-target="vegaBowlQty" type="button">+</button>
        </div>
        <div id="vegaBowlQtySauces" class="pokebowl-sauces"></div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Meatlover Bowl" data-price="17" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/meatlover-bowl.jpg') }}" alt="Meatlover Bowl">
      </div>
      <div class="menu-content">
        <h3>Meatlover Bowl</h3>
        <p>€ 17.00</p>
        <p id="soldoutMeatloverBowl" class="sold-out-msg hidden">Uitverkocht!</p>
        <div class="qty-box">
       
          <button class="qty-minus remove-button" data-target="meatloverBowlQty" type="button">-</button>
          <select id="meatloverBowlQty" name="meatloverBowlQty"></select>
          <button class="qty-plus add-button" data-target="meatloverBowlQty" type="button">+</button>
        </div>
        <div id="meatloverBowlQtySauces" class="pokebowl-sauces"></div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Rainbow Bowl" data-price="17" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/rainbowl.png') }}" alt="Rainbow Bowl">
      </div>
      <div class="menu-content">
        <h3>Rainbowl</h3>
        <p>€ 17.00</p>
        <p id="soldoutRainbowBowl" class="sold-out-msg hidden">Uitverkocht!</p>
        <div class="qty-box">
   
          <button class="qty-minus remove-button" data-target="rainbowBowlQty" type="button">-</button>
          <select id="rainbowBowlQty" name="rainbowBowlQty"></select>
          <button class="qty-plus add-button" data-target="rainbowBowlQty" type="button">+</button>
        </div>
        <div id="rainbowBowlQtySauces" class="pokebowl-sauces"></div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Spicy Tuna Bowl" data-price="15.5" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/spicy-tuna-bowl.jpg') }}" alt="Spicy Tuna Bowl">
      </div>
      <div class="menu-content">
        <h3>Spicy Tuna Bowl</h3>
        <p>€ 15.50</p>
        <p id="soldoutSpicyTunaBowl" class="sold-out-msg hidden">Uitverkocht!</p>
        <div class="qty-box">
          <label for="spicyTunaBowlQty">Aantal</label>
          <button class="qty-minus remove-button" data-target="spicyTunaBowlQty" type="button">-</button>
          <select id="spicyTunaBowlQty" name="spicyTunaBowlQty"></select>
          <button class="qty-plus add-button" data-target="spicyTunaBowlQty" type="button">+</button>
        </div>
        <div id="spicyTunaBowlQtySauces" class="pokebowl-sauces"></div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Flamed Zalm Bowl" data-price="16" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/flamed-salmon-bowl.jpg') }}" alt="Flamed Zalm Bowl">
      </div>
      <div class="menu-content">
        <h3>Flamed Zalm Bowl</h3>
        <p>€ 16.00</p>
        <p id="soldoutFlamedZalmBowl" class="sold-out-msg hidden">Uitverkocht!</p>
        <div class="qty-box">

          <button class="qty-minus remove-button" data-target="flamedZalmBowlQty" type="button">-</button>
          <select id="flamedZalmBowlQty" name="flamedZalmBowlQty"></select>
          <button class="qty-plus add-button" data-target="flamedZalmBowlQty" type="button">+</button>
        </div>
        <div id="flamedZalmBowlQtySauces" class="pokebowl-sauces"></div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="Flamed Tuna Bowl" data-price="16" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/flamed-tuna-bowl.png') }}" alt="Flamed Tuna Bowl">
      </div>
      <div class="menu-content">
        <h3>Flamed Tuna Bowl</h3>
        <p>€ 16.00</p>
        <p id="soldoutFlamedTunaBowl" class="sold-out-msg hidden">Uitverkocht!</p>
        <div class="qty-box">
    
          <button class="qty-minus remove-button" data-target="flamedTunaBowlQty" type="button">-</button>
          <select id="flamedTunaBowlQty" name="flamedTunaBowlQty"></select>
          <button class="qty-plus add-button" data-target="flamedTunaBowlQty" type="button">+</button>
        </div>
        <div id="flamedTunaBowlQtySauces" class="pokebowl-sauces"></div>
      </div>
    </div>

    <div class="menu-row menu-item" data-name="X-Bowl" data-price="0" data-packaging="0.2">
      <div class="menu-img">
          <img src="{{ url_for('static', filename='images/Xbowl.png') }}" alt="X-Bowl">
      </div>
      <div class="menu-content">
        <h3>X-Bowl</h3>
        <p id="xBowlSummary" class="xbowl-summary"></p>
        <p id="xBowlPrice" class="xbowl-summary">Prijs afhankelijk van keuzes</p>
        <div class="bubble-option">
          <select id="xBowlBase">
            <option value="">Basis</option>
            <option value="Sushi rijst" data-price="4">Sushi rijst</option>
            <option value="IJsbergsla" data-price="5">IJsbergsla</option>
            <option value="Tempura crispy rijst" data-price="6">Tempura crispy rijst</option>
          </select>
        </div>
        <div id="xBowlMains"></div>
        <div id="xBowlToppings"></div>
        <div class="new-set-wrap hidden" id="xBowlNewWrap">
          <span class="new-set-msg">Toegevoegd aan winkelwagen!</span>
          <button type="button" class="new-set-button" id="xBowlNew">Selecteer een nieuwe optie</button>
        </div>
        <div class="qty-box">
      
          <button class="qty-minus remove-button" data-target="xBowlQty" type="button">-</button>
          <select id="xBowlQty" class="qty-select" name="xBowlQty"></select>
          <button class="qty-plus add-button" data-target="xBowlQty" type="button">+</button>
        </div>
      </div>
    </div>


</div>
</section>
<section id="Teppanyaki">
  <h2>Teppanyaki Gebakken Rijst-Japanse stijl</h2>
  <div class="menu-section">
    <div class="menu-row menu-item" data-name="Teppanyaki Shrimp" data-price="18" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/REBI.png') }}" alt="Teppanyaki Shrimp" />
      </div>
      <div class="menu-content">
        <h3>Garnaal</h3>
        <p>€ 18.00</p>
        <p id="soldoutTeppShrimp" class="sold-out-msg hidden">Uitverkocht!</p>
        <div class="qty-box">

          <button class="qty-minus remove-button" data-target="teppShrimpQty" type="button">-</button>
          <select id="teppShrimpQty" name="teppShrimpQty"></select>
          <button class="qty-plus add-button" data-target="teppShrimpQty" type="button">+</button>
        </div>
      </div>
    </div>
    <div class="menu-row menu-item" data-name="Teppanyaki Beef" data-price="18" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/RBEEF.png') }}" alt="Teppanyaki Beef" />
      </div>
      <div class="menu-content">
        <h3>Rundvlees</h3>
        <p>€ 18.00</p>
        <p id="soldoutTeppBeef" class="sold-out-msg hidden">Uitverkocht!</p>
        <div class="qty-box">
     
          <button class="qty-minus remove-button" data-target="teppBeefQty" type="button">-</button>
          <select id="teppBeefQty" name="teppBeefQty"></select>
          <button class="qty-plus add-button" data-target="teppBeefQty" type="button">+</button>
        </div>
      </div>
    </div>
    <div class="menu-row menu-item" data-name="Teppanyaki Chicken" data-price="18" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/RCHICKEN.png') }}" alt="Teppanyaki Chicken" />
      </div>
      <div class="menu-content">
        <h3>Kip</h3>
        <p>€ 18.00</p>
        <p id="soldoutTeppChicken" class="sold-out-msg hidden">Uitverkocht!</p>
        <div class="qty-box">
      
          <button class="qty-minus remove-button" data-target="teppChickenQty" type="button">-</button>
          <select id="teppChickenQty" name="teppChickenQty"></select>
          <button class="qty-plus add-button" data-target="teppChickenQty" type="button">+</button>
        </div>
      </div>
    </div>
    <div class="menu-row menu-item" data-name="Teppanyaki Char Siu" data-price="18" data-packaging="0.2">
      <div class="menu-img">
        <img src="{{ url_for('static', filename='images/tonkotsu-ramen.png') }}" alt="Teppanyaki Char Siu" />
      </div>
      <div class="menu-content">
        <h3>Char Siu (BBQ-varkensvlees)</h3>
        <p>€ 18.00</p>
        <p id="soldoutTeppCharSiu" class="sold-out-msg hidden">Uitverkocht!</p>
        <div class="qty-box">
     
          <button class="qty-minus remove-button" data-target="teppCharSiuQty" type="button">-</button>
          <select id="teppCharSiuQty" name="teppCharSiuQty"></select>
          <button class="qty-plus add-button" data-target="teppCharSiuQty" type="button">+</button>
        </div>
      </div>
    </div>
  </div>
</section>
<section id="sushi">
<div class="menu-group">
<h2 style="margin-top: -8px; font-size: 1.5rem; color: #333; text-align: center; font-weight: bold;">
  Omakase Sushi
</h2>
<div class="menu-row menu-item" data-name="Salmon Roll Omakase" data-packaging="0.2" data-price="16">
<div class="menu-img">
<img alt="Green Dragon Roll" src="{{ url_for('static', filename='images/green-dragon-roll.png') }}"/>
</div>
<div class="menu-content">
<h3>Salmon Roll Omakase</h3>
<p>9 st verrassing samengesteld<br/>€ 16.00</p>
<p id="soldoutSalmonRoll" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="salmonRollCount" type="button">-</button>
<select id="salmonRollCount" name="salmonRollCount"></select>
<button class="qty-plus add-button" data-target="salmonRollCount" type="button">+</button>
</div>
</div>
</div>
<div class="menu-row menu-item" data-name="Dragon Roll Omakase" data-packaging="0.2" data-price="16">
<div class="menu-img">
<img alt="Angry Dragon Roll" src="{{ url_for('static', filename='images/angry-dragon.png') }}"/>
</div>
<div class="menu-content">
<h3>Dragon Roll Omakase</h3>
<p>9 st verrassing samengesteld<br/>€ 16.00</p>
<p id="soldoutDragonRoll" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="dragonRollCount" type="button">-</button>
<select id="dragonRollCount" name="dragonRollCount"></select>
<button class="qty-plus add-button" data-target="dragonRollCount" type="button">+</button>
</div>
<div id="dragonPrefs"></div>
</div>
</div>
<div class="menu-row menu-item" data-name="Beef Roll Omakase" data-packaging="0.2" data-price="16">
<div class="menu-img">
<img alt="Beef Roll Omakase" src="{{ url_for('static', filename='images/牛圈.png') }}"/>
</div>
<div class="menu-content">
<h3>Beef Roll Omakase</h3>
<p>9 st verrassing samengesteld<br/>€ 16.00</p>
<p id="soldoutBeefRoll" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="beefRollCount" type="button">-</button>
<select id="beefRollCount" name="beefRollCount"></select>
<button class="qty-plus add-button" data-target="beefRollCount" type="button">+</button>
</div>
</div>
</div>
<div class="menu-row menu-item" data-name="Chicken Roll Omakase" data-packaging="0.2" data-price="16">
<div class="menu-img">
<img alt="Chicken Roll Omakase" src="{{ url_for('static', filename='images/几卷.png') }}"/>
</div>
<div class="menu-content">
<h3>Chicken Roll Omakase</h3>
<p>9 st verrassing samengesteld<br/>€ 16.00</p>
<p id="soldoutChickenRoll" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="chickenRollCount" type="button">-</button>
<select id="chickenRollCount" name="chickenRollCount"></select>
<button class="qty-plus add-button" data-target="chickenRollCount" type="button">+</button>
</div>
</div>
</div>
<div class="menu-row menu-item" data-name="Nigiri Box Omakase" data-packaging="0.2" data-price="10">
<div class="menu-img">
<img alt="Nigiri Box Omakase" src="{{ url_for('static', filename='images/NIG.png') }}"/>
</div>
<div class="menu-content">
<h3>Nigiri Box Omakase</h3>
<p>5 stuks nigiri, verrassend samengesteld door de chef<br/>€ 10.00</p>
<p id="soldoutNigiriBox" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="nigiriBoxCount" type="button">-</button>
<select id="nigiriBoxCount" name="nigiriBoxCount"></select>
<button class="qty-plus add-button" data-target="nigiriBoxCount" type="button">+</button>
</div>
</div>
</div>
</div></section>
<section id="sashimi">
<div class="menu-group">
<h2 style="margin-top: -8px; font-size: 1.5rem; color: #333; text-align: center; font-weight: bold;">
      Sashimi per 6 stuks
    </h2>

<div class="menu-row menu-item" data-name="Salmon sashimi" data-packaging="0.2" data-price="9">
<div class="menu-img">
<img alt="Salmon sashimi" src="{{ url_for('static', filename='images/ss.png') }}"/>
</div>
<div class="menu-content">
<h3>Salmon sashimi</h3>
<p>€ 9.00</p>
<p id="soldoutSalmonSashimi" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="salmonSashimiQty" type="button">-</button>
<select id="salmonSashimiQty" name="salmonSashimiQty"></select>
<button class="qty-plus add-button" data-target="salmonSashimiQty" type="button">+</button>
</div>
</div>
</div>
 <div class="menu-row menu-item" data-name="Flamed salmon sashimi" data-packaging="0.2" data-price="10">
<div class="menu-img">
<img alt="Flamed salmon sashimi" src="{{ url_for('static', filename='images/fz.png') }}"/>
</div>
<div class="menu-content">
<h3>Flamed salmon sashimi</h3>
<p>€ 10.00</p>
<p id="soldoutFlamedSalmonSashimi" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="flamedsalmonSashimiQty" type="button">-</button>
<select id="flamedsalmonSashimiQty" name="flamedsalmonSashimiQty"></select>
<button class="qty-plus add-button" data-target="flamedsalmonSashimiQty" type="button">+</button>
</div>
</div>
</div>
<div class="menu-row menu-item" data-name="Tonijn sashimi" data-packaging="0.2" data-price="10">
<div class="menu-img">
<img alt="Tonijn sashimi" src="{{ url_for('static', filename='images/st.png') }}"/>
</div>
<div class="menu-content">
<h3>Tonijn sashimi</h3>
<p>€ 10.00</p>
<p id="soldoutTonijnSashimi" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="tonijnSashimiQty" type="button">-</button>
<select id="tonijnSashimiQty" name="tonijnSashimiQty"></select>
<button class="qty-plus add-button" data-target="tonijnSashimiQty" type="button">+</button>
</div>
</div>
</div>
<div class="menu-row menu-item" data-name="Salmon sashimi" data-packaging="0.2" data-price="10.5">
<div class="menu-img">
<img alt="Salmon sashimi" src="{{ url_for('static', filename='images/ft.png') }}"/>
</div>
<div class="menu-content">
<h3>Flamed tonijn sashimi</h3>
<p>€ 10.50</p>
<p id="soldoutFlamedTonijnSashimi" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="flamedtonijnSashimiQty" type="button">-</button>
<select id="flamedtonijnSashimiQty" name="flamedtonijnSashimiQty"></select>
<button class="qty-plus add-button" data-target="flamedtonijnSashimiQty" type="button">+</button>
</div>
</div>
</div>

<div class="menu-row menu-item" data-name="Beef sashimi" data-packaging="0.2" data-price="10">
<div class="menu-img">
<img alt="Beef sashimi" src="{{ url_for('static', filename='images/suy.png') }}"/>
</div>
<div class="menu-content">
<h3>Beef sashimi</h3>
<p>€ 10.00</p>
<p id="soldoutBeefSashimi" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="beefSashimiQty" type="button">-</button>
<select id="beefSashimiQty" name="beefSashimiQty"></select>
<button class="qty-plus add-button" data-target="beefSashimiQty" type="button">+</button>
</div>
</div>
</div>

</div>
</section>
<section id="Crispy-rice-sandwich">
<div class="menu-group">
<h2 style="margin-top: -8px; font-size: 1.5rem; color: #333; text-align: center; font-weight: bold;">
      Crispy rice sandwich
    </h2>
<!-- Zalm -->
<div class="menu-row menu-item" data-name="Zalm crispy rice sandwich" data-packaging="0.2" data-price="7">
<div class="menu-img">
<img alt="Zalm crispy rice sandwich" src="{{ url_for('static', filename='images/zalm.png') }}"/>
</div>
<div class="menu-content">
<h3>Zalm crispy rice sandwich</h3>
<p>€ 7.00</p>
<p id="soldoutZalmCrispyRiceSandwich" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="zalm-crispy-rice-sandwich" type="button">-</button>
<select id="zalm-crispy-rice-sandwich" name="Zalm crispy rice sandwich"></select>
<button class="qty-plus add-button" data-target="zalm-crispy-rice-sandwich" type="button">+</button>
</div>
</div>
</div>

<!-- Zalm -->
<div class="menu-row menu-item" data-name="Spicytuna crispy rice sandwich" data-packaging="0.2" data-price="7">
<div class="menu-img">
<img alt="Spicytuna crispy rice sandwich" src="{{ url_for('static', filename='images/zalm.png') }}"/>
</div>
<div class="menu-content">
<h3>Spicytuna crispy rice sandwich</h3>
<p>€ 7.00</p>
<p id="soldoutSpicytunaCrispyRiceSandwich" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="spicytuna-crispy-rice-sandwich" type="button">-</button>
<select id="spicytuna-crispy-rice-sandwich" name="Spicytuna crispy rice sandwich"></select>
<button class="qty-plus add-button" data-target="spicytuna-crispy-rice-sandwich" type="button">+</button>
</div>
</div>
</div>
  
<!-- Ebi -->
<!-- Ebi Crispy Rice Sandwich -->
<div class="menu-row menu-item" data-name="Ebi crispy rice sandwich" data-packaging="0.2" data-price="7">
<div class="menu-img">
<img alt="Ebi Crispy Rice Sandwich" src="{{ url_for('static', filename='images/Ebi.png') }}"/>
</div>
<div class="menu-content">
<h3>Ebi crispy rice sandwich</h3>
<p>€ 7.00</p>
<p id="soldoutEbiCrispyRiceSandwich" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="ebiCrispyRiceSandwich" type="button">-</button>
<select id="ebiCrispyRiceSandwich" name="ebiCrispyRiceSandwich"></select>
<button class="qty-plus add-button" data-target="ebiCrispyRiceSandwich" type="button">+</button>
</div>
</div>
</div>
<!-- Beef Crispy Rice Sandwich -->
<div class="menu-row menu-item" data-name="Beef crispy rice sandwich" data-packaging="0.2" data-price="7.5">
<div class="menu-img">
<img alt="Beef Crispy Rice Sandwich" src="{{ url_for('static', filename='images/beef-crispy.png') }}"/>
</div>
<div class="menu-content">
<h3>Beef crispy rice sandwich</h3>
<p>€ 7.50</p>
<p id="soldoutBeefCrispyRiceSandwich" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="beefCrispyRiceSandwich" type="button">-</button>
<select id="beefCrispyRiceSandwich" name="beefCrispyRiceSandwich"></select>
<button class="qty-plus add-button" data-target="beefCrispyRiceSandwich" type="button">+</button>
</div>
</div>
</div>
<!-- California Crispy Rice Sandwich -->
<div class="menu-row menu-item" data-name="California crispy rice sandwich" data-packaging="0.2" data-price="7.5">
<div class="menu-img">
<img alt="California Crispy Rice Sandwich" src="{{ url_for('static', filename='images/california-crispy.png') }}"/>
</div>
<div class="menu-content">
<h3>California crispy rice sandwich</h3>
<p>€ 7.50</p>
<p id="soldoutCaliforniaCrispyRiceSandwich" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="californiaCrispyRiceSandwich" type="button">-</button>
<select id="californiaCrispyRiceSandwich" name="californiaCrispyRiceSandwich"></select>
<button class="qty-plus add-button" data-target="californiaCrispyRiceSandwich" type="button">+</button>
</div>
</div>
</div>
<!-- Chicken Crispy Rice Sandwich -->
<div class="menu-row menu-item" data-name="Chicken crispy rice sandwich" data-packaging="0.2" data-price="7">
<div class="menu-img">
<img alt="Chicken Crispy Rice Sandwich" src="{{ url_for('static', filename='images/chicken-crispy.png') }}"/>
</div>
<div class="menu-content">
<h3>Chicken crispy rice sandwich</h3>
<p>€ 7.00</p>
<p id="soldoutChickenCrispyRiceSandwich" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="chickenCrispyRiceSandwich" type="button">-</button>
<select id="chickenCrispyRiceSandwich" name="chickenCrispyRiceSandwich"></select>
<button class="qty-plus add-button" data-target="chickenCrispyRiceSandwich" type="button">+</button>
</div>
</div>
</div>
</div>
</section>
<section id="snack">
<div class="menu-group">
<h2 style="margin-top: -8px; font-size: 1.5rem; color: #333; text-align: center; font-weight: bold;">
  Snack
</h2>
<div class="menu-row menu-item" data-name="Karaage" data-packaging="0.2" data-price="6.5">
<img alt="Karaage" class="menu-img" loading="lazy" src="{{ url_for('static', filename='images/karaage.png') }}">
<div class="menu-content">
<h3>Karaage (Japanse gefrituurde kip)</h3>
<p>€ 6.50</p>
<p id="soldoutKaraage" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="snackCount" type="button">-</button>
<select id="snackCount" name="snackCount"></select>
<button class="qty-plus add-button" data-target="snackCount" type="button">+</button>
</div>
<div id="snackCountSauces" class="pokebowl-sauces"></div>
</div>
</img></div>
<!-- Ebi Fry -->
<div class="menu-row menu-item" data-name="Ebi Fry – 4 st" data-packaging="0.2" data-price="6.5">
  <div class="menu-img">
    <img alt="Ebi Fry" loading="lazy" src="{{ url_for('static', filename='images/EB.jpg') }}">
    </img></div>
  <div class="menu-content">
    <h3>Ebi Fry – 4 st</h3>
    <p>€ 6.50</p>
    <p id="soldoutEbiFry" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">
     
      <button class="qty-minus remove-button" data-target="ebiFryCount" type="button">-</button>
      <select id="ebiFryCount" name="ebiFryCount"></select>
      <button class="qty-plus add-button" data-target="ebiFryCount" type="button">+</button>
    </div>
    <div id="ebiFryCountSauces" class="pokebowl-sauces"></div>
  </div>
</div>
 <div class="menu-row menu-item" data-name="Ebi kroket" data-packaging="0.2" data-price="5">
  <div class="menu-img">
    <img alt="Ebi kroket" loading="lazy" src="{{ url_for('static', filename='images/KRO.png') }}">
    </img></div>
  <div class="menu-content">
    <h3>Ebi kroket 4st</h3>
    <p>€ 5.00</p>
    <p id="soldoutEbikroket" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">
    
      <button class="qty-minus remove-button" data-target="ebikroketCount" type="button">-</button>
      <select id="ebikroketCount" name="ebikroketCount"></select>
      <button class="qty-plus add-button" data-target="ebikroketCount" type="button">+</button>
    </div>
    <div id="ebikroketCountSauces" class="pokebowl-sauces"></div>
  </div>
</div> 
 
<!-- Spicy Crispy Chicken -->
<div class="menu-row menu-item" data-name="Spicy Crispy Chicken – 5 st" data-packaging="0.2" data-price="6.5">
  <div class="menu-img">
    <img alt="Spicy Crispy Chicken" loading="lazy" src="{{ url_for('static', filename='images/karaage.png') }}">
    </img></div>
  <div class="menu-content">
    <h3>Spicy Crispy Chicken – 5 st</h3>
    <p>€ 6.50</p>
    <p id="soldoutSpicyCrispyChicken" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">
     
      <button class="qty-minus remove-button" data-target="spicyCrispyChickenCount" type="button">-</button>
      <select id="spicyCrispyChickenCount" name="spicyCrispyChickenCount"></select>
      <button class="qty-plus add-button" data-target="spicyCrispyChickenCount" type="button">+</button>
    </div>
    <div id="spicyCrispyChickenCountSauces" class="pokebowl-sauces"></div>
    </div>
</div>
<!-- Japans Zalm Nugget -->
<div class="menu-row menu-item" data-name="Japans Zalm Nugget" data-packaging="0.2" data-price="6.5">
  <div class="menu-img">
    <img alt="Japans Zalm Nugget" loading="lazy" src="{{ url_for('static', filename='images/JZN.png') }}">
    </img></div>
  <div class="menu-content">
    <h3>Japans Zalm Nugget</h3>
    <p>€ 6.50</p>
    <p id="soldoutJapansZalmNugget" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">
     
      <button class="qty-minus remove-button" data-target="japansZalmNuggetCount" type="button">-</button>
      <select id="japansZalmNuggetCount" name="japansZalmNuggetCount"></select>
      <button class="qty-plus add-button" data-target="japansZalmNuggetCount" type="button">+</button>
    </div>
    <div id="japansZalmNuggetCountSauces" class="pokebowl-sauces"></div>
  </div>
</div>
<div class="menu-row menu-item" data-name="Mini Loempia – 6 st" data-packaging="0.2" data-price="3.5">
  <div class="menu-img">
    <img alt="Mini Loempia" loading="lazy" src="{{ url_for('static', filename='images/LOM.png') }}">
    </img></div>
  <div class="menu-content">
    <h3>Mini Loempia – 6 st</h3>
    <p>€ 3.50</p>
    <p id="soldoutMiniLoempia" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">
     
      <button class="qty-minus remove-button" data-target="miniLoempiaCount" type="button">-</button>
      <select id="miniLoempiaCount" name="miniLoempiaCount"></select>
      <button class="qty-plus add-button" data-target="miniLoempiaCount" type="button">+</button>
    </div>
    <div id="miniLoempiaCountSauces" class="pokebowl-sauces"></div>
  </div>
</div>
<!-- Chicken Loempia -->
<div class="menu-row menu-item" data-name="Chicken Loempia – 2 st" data-packaging="0.2" data-price="5">
  <div class="menu-img">
    <img alt="Chicken Loempia" loading="lazy" src="{{ url_for('static', filename='images/KIPL.png') }}">
    </img></div>
  <div class="menu-content">
    <h3>Chicken Loempia – 2 st</h3>
    <p>€ 5.00</p>
    <p id="soldoutChickenLoempia" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">
   
      <button class="qty-minus remove-button" data-target="chickenLoempiaCount" type="button">-</button>
      <select id="chickenLoempiaCount" name="chickenLoempiaCount"></select>
      <button class="qty-plus add-button" data-target="chickenLoempiaCount" type="button">+</button>
    </div>
    <div id="chickenLoempiaCountSauces" class="pokebowl-sauces"></div>
  </div>
</div>
<!-- Gyoza -->
<div class="menu-row menu-item" data-name="Gyoza – 5 st" data-packaging="0.2" data-price="5">
  <div class="menu-img">
    <img alt="Gyoza" loading="lazy" src="{{ url_for('static', filename='images/GYO.jpg') }}">
    </img></div>
  <div class="menu-content">
    <h3>Gyoza – 5 st</h3>
    <p>€ 5.00</p>
    <p id="soldoutGyoza" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">
      
      <button class="qty-minus remove-button" data-target="gyozaCount" type="button">-</button>
      <select id="gyozaCount" name="gyozaCount"></select>
      <button class="qty-plus add-button" data-target="gyozaCount" type="button">+</button>
    </div>
    <div id="gyozaCountSauces" class="pokebowl-sauces"></div>
  </div>
</div>
<!-- Inktvis Ringen -->
<div class="menu-row menu-item" data-name="Inktvis Ringen – 5 st" data-packaging="0.2" data-price="5">
  <div class="menu-img">
    <img alt="Inktvis Ringen" loading="lazy" src="{{ url_for('static', filename='images/INKT.jpg') }}">
    </img></div>
  <div class="menu-content">
    <h3>Inktvis Ringen – 5 st</h3>
    <p>€ 5.00</p>
    <p id="soldoutInktvisRingen" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">
     
      <button class="qty-minus remove-button" data-target="inktvisRingenCount" type="button">-</button>
      <select id="inktvisRingenCount" name="inktvisRingenCount"></select>
      <button class="qty-plus add-button" data-target="inktvisRingenCount" type="button">+</button>
    </div>
    <div id="inktvisRingenCountSauces" class="pokebowl-sauces"></div>
  </div>
</div>
<!-- Crispy Rijst -->
<div class="menu-row menu-item" data-name="Sesambal – 5 st" data-packaging="0.2" data-price="5">
  <div class="menu-img">
    <img alt="Sasambal" loading="lazy" src="{{ url_for('static', filename='images/SEM.jpg') }}">
    </img></div>
  <div class="menu-content">
    <h3>Sesambal – 5 st</h3>
    <p>€ 5.00</p>
    <p id="soldoutSesambal" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">

      <button class="qty-minus remove-button" data-target="sesambalCount" type="button">-</button>
      <select id="sesambalCount" name="sesambalCount"></select>
      <button class="qty-plus add-button" data-target="sesambalCount" type="button">+</button>
    </div>
  </div>
</div>
<!-- Yakitori -->
<div class="menu-row menu-item" data-name="Yakitori – 4 st" data-packaging="0.2" data-price="6">
  <div class="menu-img">
    <img alt="Yakitori" loading="lazy" src="{{ url_for('static', filename='images/YAK.jpg') }}">
    </img></div>
  <div class="menu-content">
    <h3>Yakitori – 4 st</h3>
    <p>€ 6.00</p>
    <p id="soldoutYakitori" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">

      <button class="qty-minus remove-button" data-target="yakitoriCount" type="button">-</button>
      <select id="yakitoriCount" name="yakitoriCount"></select>
      <button class="qty-plus add-button" data-target="yakitoriCount" type="button">+</button>
    </div>
  </div>
</div>


<!-- Edamame -->
<div class="menu-row menu-item" data-name="Edamame" data-packaging="0.2" data-price="4.5">
  <div class="menu-img">
    <img alt="Edamame" loading="lazy" src="{{ url_for('static', filename='images/EDA.jpg') }}">
    </img></div>
  <div class="menu-content">
    <h3>Edamame</h3>
    <p>€ 4.50</p>
    <p id="soldoutEdamame" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">
   
      <button class="qty-minus remove-button" data-target="edamameCount" type="button">-</button>
      <select id="edamameCount" name="edamameCount"></select>
      <button class="qty-plus add-button" data-target="edamameCount" type="button">+</button>
    </div>
  </div>
</div>
<!-- Kimchi Komkommer -->
<div class="menu-row menu-item" data-name="Kimchi Komkommer" data-packaging="0.2" data-price="4.5">
  <div class="menu-img">
    <img alt="Kimchi Komkommer" loading="lazy" src="{{ url_for('static', filename='images/KKK.jpg') }}">
    </img></div>
  <div class="menu-content">
    <h3>Kimchi Komkommer</h3>
    <p>€ 4.50</p>
    <p id="soldoutKimchiKomkommer" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">
  
      <button class="qty-minus remove-button" data-target="kimchiKomkommerCount" type="button">-</button>
      <select id="kimchiKomkommerCount" name="kimchiKomkommerCount"></select>
      <button class="qty-plus add-button" data-target="kimchiKomkommerCount" type="button">+</button>
    </div>
  </div>
</div>
<!-- Kimchi Kool -->
<div class="menu-row menu-item" data-name="Kimchi Kool" data-packaging="0.2" data-price="5">
  <div class="menu-img">
    <img alt="Kimchi Kool" loading="lazy" src="{{ url_for('static', filename='images/KIM.png') }}">
    </img></div>
  <div class="menu-content">
    <h3>Kimchi Kool</h3>
    <p>€ 5.00</p>
    <p id="soldoutKimchiKool" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">
    
      <button class="qty-minus remove-button" data-target="kimchiKoolCount" type="button">-</button>
      <select id="kimchiKoolCount" name="kimchiKoolCount"></select>
      <button class="qty-plus add-button" data-target="kimchiKoolCount" type="button">+</button>
    </div>
  </div>
</div>

 


  
<!-- Zeewiersalade -->
  
<div class="menu-row menu-item" data-name="Zeewiersalade – 100g" data-packaging="0.2" data-price="5">
  <div class="menu-img">
    <img alt="Zeewiersalade" loading="lazy" src="{{ url_for('static', filename='images/ZEW.png') }}">
    </img></div>
  <div class="menu-content">
    <h3>Zeewiersalade – 100g</h3>
    <p>€ 5.00</p>
    <p id="soldoutZeewiersalade" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">
     
      <button class="qty-minus remove-button" data-target="zeewiersaladeCount" type="button">-</button>
      <select id="zeewiersaladeCount" name="zeewiersaladeCount"></select>
      <button class="qty-plus add-button" data-target="zeewiersaladeCount" type="button">+</button>
    </div>
  </div>
</div>
</div>
</section>
<section id="dessert">
<div class="menu-group">
<!-- Mango -->
<div class="menu-row menu-item" data-name="Mochi Mango" data-packaging="0.2" data-price="4">
<div class="menu-img">
<img alt="Mochi Mango" loading="lazy" src="{{ url_for('static', filename='images/mochi-mango.png') }}">
</img></div>
<div class="menu-content">
  <h3>Mochi – Mango</h3>
  <p>€ 4.00</p>
  <p id="soldoutMochiMango" class="sold-out-msg hidden">Uitverkocht!</p>
  <div class="qty-box">

<button class="qty-minus remove-button" data-target="mochiMangoCount" type="button">-</button>
<select id="mochiMangoCount" name="mochiMangoCount"></select>
<button class="qty-plus add-button" data-target="mochiMangoCount" type="button">+</button>
</div>
</div>
</div>
<!-- Aardbei -->
<div class="menu-row menu-item" data-name="Mochi Aardbei" data-packaging="0.2" data-price="4">
<div class="menu-img">
<img alt="Mochi Aardbei" loading="lazy" src="{{ url_for('static', filename='images/mochi-aardbei.png') }}">
</img></div>
<div class="menu-content">
  <h3>Mochi – Aardbei</h3>
  <p>€ 4.00</p>
  <p id="soldoutMochiAardbei" class="sold-out-msg hidden">Uitverkocht!</p>
  <div class="qty-box">

<button class="qty-minus remove-button" data-target="mochiAardbeiCount" type="button">-</button>
<select id="mochiAardbeiCount" name="mochiAardbeiCount"></select>
<button class="qty-plus add-button" data-target="mochiAardbeiCount" type="button">+</button>
</div>
</div>
</div>
<!-- Matcha -->
<div class="menu-row menu-item" data-name="Mochi Matcha" data-packaging="0.2" data-price="4">
<div class="menu-img">
<img alt="Mochi Matcha" loading="lazy" src="{{ url_for('static', filename='images/mochi-matcha.png') }}">
</img></div>
<div class="menu-content">
  <h3>Mochi – Matcha</h3>
  <p>€ 4.00</p>
  <p id="soldoutMochiMatcha" class="sold-out-msg hidden">Uitverkocht!</p>
  <div class="qty-box">

<button class="qty-minus remove-button" data-target="mochiMatchaCount" type="button">-</button>
<select id="mochiMatchaCount" name="mochiMatchaCount"></select>
<button class="qty-plus add-button" data-target="mochiMatchaCount" type="button">+</button>
</div>
</div>
</div>
<!-- Pistachio -->
<div class="menu-row menu-item" data-name="Mochi Pistachio" data-packaging="0.2" data-price="4">
<div class="menu-img">
<img alt="Mochi Pistachio" loading="lazy" src="{{ url_for('static', filename='images/mochi-pistachio.png') }}">
</img></div>
<div class="menu-content">
  <h3>Mochi – Pistachio</h3>
  <p>€ 4.00</p>
  <p id="soldoutMochiPistachio" class="sold-out-msg hidden">Uitverkocht!</p>
  <div class="qty-box">

<button class="qty-minus remove-button" data-target="mochiPistachioCount" type="button">-</button>
<select id="mochiPistachioCount" name="mochiPistachioCount"></select>
<button class="qty-plus add-button" data-target="mochiPistachioCount" type="button">+</button>
</div>
</div>
</div>
</div>
</section>
<section id="drinks">
<div class="menu-group">
<div class="menu-row menu-item" data-name="Cola" data-packaging="0.15" data-price="2.5">
  <div class="menu-img">
    <img alt="Cola" loading="lazy" src="{{ url_for('static', filename='images/COLA.png') }}">
  </div>
  <div class="menu-content">
    <h3>Cola</h3>
    <p>€ 2.5</p>
    <p id="soldoutCola" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">
      
      <button class="qty-minus remove-button" data-target="colaCount" type="button">-</button>
      <select id="colaCount" name="colaCount"></select>
      <button class="qty-plus add-button" data-target="colaCount" type="button">+</button>
    </div>
  </div>
</div>
<div class="menu-row menu-item" data-name="Cola Zero" data-packaging="0.15" data-price="2.5">
  <div class="menu-img">
    <img alt="Cola Zero" loading="lazy" src="{{ url_for('static', filename='images/COLAZERO.webp') }}">
  </div>
  <div class="menu-content">
    <h3>Cola Zero</h3>
    <p>€ 2.50</p>
    <p id="soldoutColaZero" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">
    
      <button class="qty-minus remove-button" data-target="colaZeroCount" type="button">-</button>
      <select id="colaZeroCount" name="colaZeroCount"></select>
      <button class="qty-plus add-button" data-target="colaZeroCount" type="button">+</button>
         </div>
</div>
</div>
<div class="menu-row menu-item" data-name="Spa Blauw" data-packaging="0.15" data-price="2.5">
  <div class="menu-img">
    <img alt="Spa Blauw" loading="lazy" src="{{ url_for('static', filename='images/SPA_BLAUW.png') }}">
  </div>
  <div class="menu-content">
    <h3>Spa Blauw</h3>
    <p>€ 2.50</p>
    <p id="soldoutSpaBlauw" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">
      <label for="spaBlauwCount"></label>
      <button class="qty-minus remove-button" data-target="spaBlauwCount" type="button">-</button>
      <select id="spaBlauwCount" name="spaBlauwCount"></select>
      <button class="qty-plus add-button" data-target="spaBlauwCount" type="button">+</button>
    </div>
  </div>
</div>
<div class="menu-row menu-item" data-name="Spa Rood" data-packaging="0.15" data-price="2.5">
  <div class="menu-img">
    <img alt="Spa Rood" loading="lazy" src="{{ url_for('static', filename='images/SPA_ROOD.png') }}">
  </div>
  <div class="menu-content">
    <h3>Spa Rood</h3>
    <p>€ 2.50</p>
    <p id="soldoutSpaRood" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">
    
      <button class="qty-minus remove-button" data-target="spaRoodCount" type="button">-</button>
      <select id="spaRoodCount" name="spaRoodCount"></select>
      <button class="qty-plus add-button" data-target="spaRoodCount" type="button">+</button>
    </div>
  </div>
</div>
<div class="menu-row menu-item" data-name="Red Bull" data-packaging="0.15" data-price="2.5">
  <div class="menu-img">
    <img alt="Red Bull" loading="lazy" src="{{ url_for('static', filename='images/RED_BULL.png') }}">
  </div>
  <div class="menu-content">
    <h3>Red Bull</h3>
    <p>€ 2.50</p>
    <p id="soldoutRedBull" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">
     
      <button class="qty-minus remove-button" data-target="redBullCount" type="button">-</button>
      <select id="redBullCount" name="redBullCount"></select>
      <button class="qty-plus add-button" data-target="redBullCount" type="button">+</button>
    </div>
  </div>
</div>
 <div class="menu-row menu-item" data-name="Heineken 330ml" data-packaging="0.15" data-price="3">
  <div class="menu-img">
    <img alt="Heineken 330ml" loading="lazy" src="{{ url_for('static', filename='images/HEINEKEN.png') }}">
  </div>
  <div class="menu-content">
    <h3>Heineken 330ml</h3>
    <p>€ 3.00</p>
    <p id="soldoutHeineken" class="sold-out-msg hidden">Uitverkocht!</p>
    <div class="qty-box">

      <button class="qty-minus remove-button" data-target="heinekenCount" type="button">-</button>
      <select id="heinekenCount" name="heinekenCount"></select>
      <button class="qty-plus add-button" data-target="heinekenCount" type="button">+</button>
    </div>
  </div>
</div> 
</div>
</section>
<section id="bubble">
<div class="menu-group">
<h2 style="margin-top: -8px; font-size: 1.5rem; color: #333; text-align: center; font-weight: bold;">
  Bubble Tea
</h2>
<div class="menu-row menu-item" data-name="Bubble Tea" data-packaging="0.2" data-price="5">
<div class="menu-img">
<img alt="Bubble Tea" src="{{ url_for('static', filename='images/bubble-tea-main.jpg') }}"/>
</div>
<div class="menu-content">
<h3>Bubble Tea</h3>
<p>€ 5.00</p>
<p id="bubbleSoldOut" class="sold-out-msg hidden">Uitverkocht!</p>
<div class="bubble-option">
<select id="bubbleType">
<option value="">Base</option>
<option value="Green Tea">Green Tea</option>
<option value="Milk Tea">Milk Tea</option>
<option value="Milkshake">Milkshake</option>
</select>
</div>
<div class="bubble-option">
<select id="bubbleFlavor">
<option value="">Smaak</option>
<option value="Mango">Mango</option>
<option value="Appel">Appel</option>
<option value="Matcha">Matcha</option>
<option value="Brown Sugar">Brown Sugar</option>
</select>
</div>
<div class="bubble-option">
  <select id="bubbleTopping">
<option value="">Topping</option>
<option value="Appel Popping">Appel Popping</option>
<option value="Perzik Popping">Perzik Popping</option>
  <option value="Tapioca">Tapioca</option>
  </select>
</div>
        <div class="new-set-wrap hidden" id="bubbleNewWrap">
          <span class="new-set-msg">Toegevoegd aan winkelwagen!</span>
          <button type="button" class="new-set-button" id="bubbleNew">Selecteer een nieuwe optie</button>
        </div>
<div class="qty-box">

<button class="qty-minus remove-button" data-target="bubbleTeaQty" type="button">-</button>
<select id="bubbleTeaQty"></select>
<button class="qty-plus add-button" data-target="bubbleTeaQty" type="button">+</button>
</div>
</div>
</div>
</div>
</section>
  
<section id="info">
  <h2>Info</h2>
  <p>We zijn nog niet open en bevinden ons in de testfase. Nieuwe ontwikkelingen worden tijdig gecommuniceerd.</p>
</section>

<!-- iPhone 主屏幕提示 -->
<section id="wapp" class="menu-tip-section">
    <div class="menu-row menu-item" style="background: #f0e2c3; border: 2px dashed #e09142;">
        <div class="menu-img">
            <img alt="iPhone Tip" loading="lazy" src="{{ url_for('static', filename='images/iphone-tip.png') }}">
        </div>
        <div class="menu-content">
            <!-- 不需要再写任何文字 -->
        </div>
    </div>
</section>

<section class="menu-tip-section">
    <div class="menu-row menu-item" style="background: #f0e2c3; border: 2px dashed #e09142;">
        <div class="menu-img">
            <img alt="Bookmark Tip" loading="lazy" src="{{ url_for('static', filename='images/bookmark-tip.png') }}">
        </div>
        <div class="menu-content">
            <!-- 不需要再写任何文字 -->
        </div>
    </div>
</section>




<script>




function togglePortraitMode() {
    const mqPortrait = window.matchMedia('(orientation: portrait)').matches;
    const ratioPortrait = window.innerHeight > window.innerWidth;
    const isPortrait = mqPortrait || ratioPortrait;

    // ✅ 判断是否为大屏竖屏（如 Surface、iPad），排除手机
    const isLargeScreen = window.innerWidth > 600;

    // ✅ 给 body 加类名
    document.body.classList.toggle('portrait-mode', isPortrait && isLargeScreen);
    document.body.classList.toggle('mobile-portrait', isPortrait && !isLargeScreen);
}

window.addEventListener('load', togglePortraitMode);
window.addEventListener('resize', togglePortraitMode);
window.addEventListener('orientationchange', togglePortraitMode);



  
const cart = {};
const DRINK_ITEMS = ['Cola','Cola Zero','Spa Blauw','Spa Rood','Red Bull','Bubble Tea'];

function calculateBtw(cartObj, packagingTotal, discount = 0){
  let total9 = packagingTotal;
  let total21 = 0;
  Object.entries(cartObj).forEach(([name,item])=>{
    const lineTotal = (item.price || 0) * (item.qty || 0);
    if (DRINK_ITEMS.includes(name)) {
      total21 += lineTotal;
    } else {
      total9 += lineTotal;
    }
  });
  const total = total9 + total21;
  if(discount > 0 && total > 0){
    const ratio9 = total9 / total;
    const ratio21 = total21 / total;
    total9 -= discount * ratio9;
    total21 -= discount * ratio21;
  }
  const btw9 = total9 / 1.09 * 0.09;
  const btw21 = total21 / 1.21 * 0.21;
  return {btw9, btw21, btw: btw9 + btw21};
}
const extras = {
  chopstickCount: {
    label: 'Stokjes',
    price: 0,
    icon: "{{ url_for('static', filename='images/chopsticks.png') }}"
  },
  soyCount: {
    label: 'Sojasaus',
    price: 0,
    icon: "{{ url_for('static', filename='images/sjal.png') }}"
  },
  wasabiCount: {
    label: 'Wasabi',
    price: 0,
    icon: "{{ url_for('static', filename='images/wasabib.png') }}"
  },
  gemberCount: {
    label: 'Gember',
    price: 0,
    icon: "{{ url_for('static', filename='images/gembeerr.png') }}"
  }
};

const DEFAULT_PACKAGING_FEE = 0.20;
const DELIVERY_FEE = 2.50;
let milkTeaPrice = 0;
let bubbleOptions = {base: [], smaak: [], topping: []};
let xbentoOptions = {main: [], side: [], rice: [], groente: []};
const xbowlBases = [
  {name:'Sushi rijst', price:4},
  {name:'IJsbergsla', price:5},
  {name:'Tempura crispy rijst', price:6}
];
const xbowlMains = [
  {name:'geen', price:0},
  {name:'Zalm', price:9},
  {name:'Tonijn', price:9},
  {name:'Gamba', price:8},
  {name:'Crispy chicken', price:8},
  {name:'Spicy crispy chicken', price:8},
  {name:'Teriyaki beef', price:9},
  {name:'Teriyaki chicken', price:9},
  {name:'Ribeye', price:9},
  {name:'Unagi', price:9},
  {name:'Spicy tuna', price:9},
  {name:'Krabstick', price:8}
];
const xbowlToppings=['geen','Komkommer','Avocado','Sojabonen','Mais','Zeewiersalade','Masago','Inari','Tamago'];
const XBOWL_TOPPING_PRICE=1.5;
const SAUCE_OPTIONS=['Geen saus','Japans mayo','Spicy mayo','Unagi saus','Spicy teriyaki saus','Korean chili saus','Cury mayo','Japans chili saus','Soy saus','Truffel mayo','Wasabi mayo'];
const POKEBOWL_IDS=['zalmBowlQty','tunaBowlQty','ebiFryBowlQty','chickenKaraageBowlQty','spicyChickenBowlQty','teriyakiChickenBowlQty','teriyakiBeefBowlQty','californiaBowlQty','unagiBowlQty','vegaBowlQty','meatloverBowlQty','rainbowBowlQty','spicyTunaBowlQty','flamedZalmBowlQty','flamedTunaBowlQty','snackCount','ebiFryCount','ebikroketCount','spicyCrispyChickenCount','japansZalmNuggetCount','miniLoempiaCount','chickenLoempiaCount','gyozaCount','inktvisRingenCount'];
let currentXBowlName = '';
let currentPackaging = 0;
let currentSubtotal = 0;
let finalTotal = 0;
let currentDiscount = 0;
let bubbleSetControls;
let xbentoSetControls;
const soldoutMap = {
  "Japans Chicken Bento": "soldout_japans_chicken_bento",
  "Korean Chicken Bento": "soldout_korean_chicken_bento",
  "Korean Beef Bento": "soldout_korean_beef_bento",
  "Meatlover Bento": "soldout_meatlover_bento",
  "Zalm Lover Bento": "soldout_zalm_lover_bento",
  "Ebi Lover Bento": "soldout_ebi_lover_bento",
  "Surf & Turf Bento": "soldout_surf_turf_bento",
  "Dimsum Bento": "soldout_dimsum_bento",
  "Lamskotelet Bento": "soldout_lamskotelet_bento",
  "Unagi Bento": "soldout_unagi_bento",
  "Tuna Bento": "soldout_tuna_bento",
  "Veggie Bento": "soldout_veggie_bento",
  "Bento Sushi Omakase": "soldout_sushi_bento",
  "Salmon Roll Omakase": "soldout_salmon_roll",
  "Dragon Roll Omakase": "soldout_dragon_roll",
  "Beef Roll Omakase": "soldout_beef_roll",
  "Chicken Roll Omakase": "soldout_chicken_roll",
  "Nigiri Box Omakase": "soldout_nigiri_box",
  "Salmon sashimi": "soldout_salmon_sashimi",
  "Flamed salmon sashimi": "soldout_flamed_salmon_sashimi",
  "Tonijn sashimi": "soldout_tonijn_sashimi",
  "Flamed tonijn sashimi": "soldout_flamed_tonijn_sashimi",
  "Beef sashimi": "soldout_beef_sashimi",
  "Zalm crispy rice sandwich": "soldout_zalm_crispy_rice_sandwich",
  "Ebi crispy rice sandwich": "soldout_ebi_crispy_rice_sandwich",
  "Beef crispy rice sandwich": "soldout_beef_crispy_rice_sandwich",
  "California crispy rice sandwich": "soldout_california_crispy_rice_sandwich",
  "Chicken crispy rice sandwich": "soldout_chicken_crispy_rice_sandwich",
  "Xbento": "soldout_xbento",
  "Zalm Bowl": "soldout_zalm_bowl",
  "Tuna Bowl": "soldout_tuna_bowl",
  "Ebi Fry Bowl": "soldout_ebi_fry_bowl",
  "Chicken Karaage Bowl": "soldout_chicken_karaage_bowl",
  "Spicy Chicken Bowl": "soldout_spicy_chicken_bowl",
  "Teriyaki Chicken Bowl": "soldout_teriyaki_chicken_bowl",
  "Teriyaki Beef Bowl": "soldout_teriyaki_beef_bowl",
  "California Bowl": "soldout_california_bowl",
  "Vega Bowl": "soldout_vega_bowl",
  "Meatlover Bowl": "soldout_meatlover_bowl",
  "Rainbow Bowl": "soldout_rainbow_bowl",
  "Spicy Tuna Bowl": "soldout_spicy_tuna_bowl",
  "Flamed Zalm Bowl": "soldout_flamed_zalm_bowl",
  "Flamed Tuna Bowl": "soldout_flamed_tuna_bowl",
  "Ebi Furai": "soldout_ebi_ramen",
  "Chicken": "soldout_chicken_ramen",
  "Beef": "soldout_beef_ramen",
  "Ribeye": "soldout_ribeye_ramen",
  "Chasiu": "soldout_chasiu_ramen",
  "Teppanyaki Shrimp": "soldout_teppanyaki_shrimp",
  "Teppanyaki Beef": "soldout_teppanyaki_beef",
  "Teppanyaki Chicken": "soldout_teppanyaki_chicken",
  "Teppanyaki Char Siu": "soldout_teppanyaki_char_siu",
  "Karaage": "soldout_karaage",
  "Ebi Fry": "soldout_ebi_fry",
  "Spicy Crispy Chicken": "soldout_spicy_crispy_chicken",
  "Japans Zalm Nugget": "soldout_japans_zalm_nugget",
  "Chicken Loempia": "soldout_chicken_loempia",
  "Gyoza": "soldout_gyoza",
  "Inktvis Ringen": "soldout_inktvis_ringen",
  "Sesambal – 5 st": "soldout_sesambal",
  "Yakitori": "soldout_yakitori",
  "Mini Loempia": "soldout_mini_loempia",
  "Edamame": "soldout_edamame",
  "Kimchi Komkommer": "soldout_kimchi_komkommer",
  "Kimchi Kool": "soldout_kimchi_kool",
  "Zeewiersalade": "soldout_zeewiersalade",
  "Mochi Mango": "soldout_mochi_mango",
  "Mochi Aardbei": "soldout_mochi_aardbei",
  "Mochi Matcha": "soldout_mochi_matcha",
  "Mochi Pistachio": "soldout_mochi_pistachio",
  "Cola": "soldout_cola",
  "Cola Zero": "soldout_cola_zero",
  "Spa Blauw": "soldout_spa_blauw",
  "Spa Rood": "soldout_spa_rood",
  "Red Bull": "soldout_red_bull"
};

const iconMap = {
  online: "https://raw.githubusercontent.com/iamatimnl/Nova-Asia/main/icons/online.svg",
  contant: "https://raw.githubusercontent.com/iamatimnl/Nova-Asia/main/icons/contant.svg",
  pin: "https://raw.githubusercontent.com/iamatimnl/Nova-Asia/main/icons/pin.svg",
  oprekening: "https://raw.githubusercontent.com/iamatimnl/Nova-Asia/main/icons/oprekening.svg"
};

const cartIcon = document.getElementById("cartIcon");
const cartPaymentSelect = document.getElementById("cartPaymentSelect");
const pickupPaymentSelect = document.getElementById("pickupPayment");
const deliveryPaymentSelect = document.getElementById("deliveryPayment");

const afhalenFields = document.getElementById("afhalenFields");
const bezorgenFields = document.getElementById("bezorgenFields");

function getActivePaymentMethod() {
  return !bezorgenFields.classList.contains("hidden")
    ? deliveryPaymentSelect.value
    : pickupPaymentSelect.value;
}

function updatePaymentIcon(value) {
  const iconPath = iconMap[value] || iconMap.online;
  cartIcon.setAttribute("src", iconPath);
}

function syncAllPaymentDropdowns(value) {
  pickupPaymentSelect.value = value;
  deliveryPaymentSelect.value = value;
  cartPaymentSelect.value = value;
  updatePaymentIcon(value);
}

// 监听器
pickupPaymentSelect.addEventListener("change", () => {
  syncAllPaymentDropdowns(pickupPaymentSelect.value);
});

deliveryPaymentSelect.addEventListener("change", () => {
  syncAllPaymentDropdowns(deliveryPaymentSelect.value);
});

cartPaymentSelect.addEventListener("change", () => {
  syncAllPaymentDropdowns(cartPaymentSelect.value);
});

// 初始化图标
document.addEventListener("DOMContentLoaded", () => {
  updatePaymentIcon(getActivePaymentMethod());
});



// ✅ 当前配送方式初始状态（根据滑块判断）
let currentOrderType = document.getElementById('afhalen').checked ? 'afhalen' : 'bezorgen';

// ✅ 更新图标函数（包含尺寸设置）
function updateOrderTypeIcon(value) {
  const icon = document.getElementById('orderTypeIcon');
  icon.src = value === 'afhalen'
    ? "/static/images/pickup.png"
    : "/static/images/delivery.png";

  // ✅ 设置图标尺寸
  icon.style.height = '24px';
  icon.style.width = '24px';
  icon.style.objectFit = 'contain';
}

// ✅ 监听配送方式下拉菜单切换
document.getElementById('cartOrderTypeSelect').addEventListener('change', function () {
  const selected = this.value;

  if (selected !== currentOrderType) {
    // ✅ 自动切换滑块按钮（radio）并触发相应事件
    const radio = document.getElementById(selected);
    if (radio) {
      radio.checked = true;
      radio.dispatchEvent(new Event('change', { bubbles: true }));
    }

    // ✅ 切换图标
    updateOrderTypeIcon(selected);

    // ✅ 移动端关闭购物车后再滚动至配送区域
    const cartSection = document.getElementById('mobileCart');
    if (cartSection && cartSection.classList.contains('mobile-visible')) {
      toggleMobileCart();
    }

    const deliveryOptions = document.getElementById('delivery-options');
    if (deliveryOptions) {
      deliveryOptions.scrollIntoView({ behavior: 'smooth' });
    }

    // ✅ 更新当前状态
    currentOrderType = selected;
  }
});

// ✅ 页面初始化时同步一次图标
updateOrderTypeIcon(currentOrderType);



function isItemSoldOut(name){
  for(const [base,key] of Object.entries(soldoutMap)){
    if(name.startsWith(base) && currentSettings[key]==="true"){
      return true;
    }
  }
  return false;
}

function getOptionPrice(cat, name){
  const opt = (bubbleOptions[cat]||[]).find(o=>o.name===name);
  return opt ? parseFloat(opt.price) : 0;
}
function fixXbowlLayout() {
  const wrap = document.getElementById('xBowlNewWrap');
  wrap.classList.remove('hidden');   // 强制显示一次
  wrap.offsetHeight;                 // 强制 reflow
  wrap.classList.add('shown-temp');  // 可选样式 class
  setTimeout(() => {
    wrap.classList.add('hidden');
    wrap.classList.remove('shown-temp');
  }, 50);
}

document.addEventListener('DOMContentLoaded', () => {
  fixXbowlLayout();  // 页面加载时触发一次
});

function getBubbleTeaPrice(){
  const type = document.getElementById('bubbleType').value;
  const flavor = document.getElementById('bubbleFlavor').value;
  const topping = document.getElementById('bubbleTopping').value;
  return getOptionPrice('base', type)+getOptionPrice('smaak', flavor)+getOptionPrice('topping', topping);
}

function updateMilkTeaDisplay(){
  milkTeaPrice = getBubbleTeaPrice();
  const item = document.querySelector('.menu-item[data-name="Bubble Tea"]');
  if(item){
    item.dataset.price = milkTeaPrice;
    const p = item.querySelector('p');
    if(p) p.textContent = `€ ${milkTeaPrice.toFixed(2)}`;
  }
}

function getXbentoOptionPrice(cat, name){
  const opt = (xbentoOptions[cat]||[]).find(o=>o.name===name);
  return opt ? parseFloat(opt.price) : 0;
}

function getXbentoPrice(){
  const main=document.getElementById('xBentoMain').value;
  const side=document.getElementById('xBentoSide').value;
  const rice=document.getElementById('xBentoRice').value;
  const veg=document.getElementById('xBentoVeg').value;
  return getXbentoOptionPrice('main',main)+getXbentoOptionPrice('side',side)+getXbentoOptionPrice('rice',rice)+getXbentoOptionPrice('groente',veg);
}

function updateXbentoDisplay(){
  const main = document.getElementById('xBentoMain').value;
  const side = document.getElementById('xBentoSide').value;
  const rice = document.getElementById('xBentoRice').value;
  const veg = document.getElementById('xBentoVeg').value;

  const item = document.querySelector('.menu-item[data-name="Xbento"]');
  const p = item?.querySelector('p');

  // 如果一个都没选，就显示提示语
  if (!main && !side && !rice && !veg) {
    if (p) p.textContent = "Xbento Zelf Samenstellen";
    return;
  }

  const price = getXbentoPrice();
  if(item){
    item.dataset.price = price;
    if(p) p.textContent = `€ ${price.toFixed(2)}`;
  }
}


function applyCrispyPrices(prices){
  const map={
    'Zalm crispy rice sandwich': parseFloat(prices.price_zalm_crispy_rice_sandwich),
    'Spicytuna crispy rice sandwich': parseFloat(prices.price_spicytuna_crispy_rice_sandwich),
    'Ebi crispy rice sandwich': parseFloat(prices.price_ebi_crispy_rice_sandwich),
    'Beef crispy rice sandwich': parseFloat(prices.price_beef_crispy_rice_sandwich),
    'California crispy rice sandwich': parseFloat(prices.price_california_crispy_rice_sandwich),
    'Chicken crispy rice sandwich': parseFloat(prices.price_chicken_crispy_rice_sandwich)
  };
  Object.entries(map).forEach(([name,price])=>{
    if(isNaN(price)) return;
    const el=document.querySelector(`.menu-item[data-name="${name}"]`);
    if(el){
      el.dataset.price=price;
      const pe=el.querySelector('p');
      if(pe) pe.textContent=`€ ${price.toFixed(2)}`;
    }
  });
}

function saveCart() {
  sessionStorage.setItem('novaCart', JSON.stringify(cart));
}

function loadCart() {
  const stored = sessionStorage.getItem('novaCart');
  if (stored) {
    const data = JSON.parse(stored);
    Object.keys(data).forEach(k => { cart[k] = data[k]; });
  }
}








function populateBubbleSelectors(){
  const baseSel=document.getElementById('bubbleType');
  const flavorSel=document.getElementById('bubbleFlavor');
  const toppingSel=document.getElementById('bubbleTopping');
  const curBase=baseSel.value; const curFlavor=flavorSel.value; const curTopping=toppingSel.value;
  baseSel.innerHTML='<option value="">Base</option>';
  bubbleOptions.base.forEach(o=>{const opt=document.createElement('option');opt.value=o.name;opt.textContent=o.name;if(o.name===curBase) opt.selected=true;baseSel.appendChild(opt);});
  flavorSel.innerHTML='<option value="">Smaak</option>';
  bubbleOptions.smaak.forEach(o=>{const opt=document.createElement('option');opt.value=o.name;opt.textContent=o.name;if(o.name===curFlavor) opt.selected=true;flavorSel.appendChild(opt);});
  toppingSel.innerHTML='<option value="">Topping</option>';
  bubbleOptions.topping.forEach(o=>{const opt=document.createElement('option');opt.value=o.name;opt.textContent=o.name;if(o.name===curTopping) opt.selected=true;toppingSel.appendChild(opt);});
}

function populateXbentoSelectors(){
  const mainSel=document.getElementById('xBentoMain');
  const sideSel=document.getElementById('xBentoSide');
  const riceSel=document.getElementById('xBentoRice');
  const vegSel=document.getElementById('xBentoVeg');
  const curMain=mainSel.value,curSide=sideSel.value,curRice=riceSel.value,curVeg=vegSel.value;
  mainSel.innerHTML='<option value="">Hoofdgerecht</option>';
  xbentoOptions.main.forEach(o=>{const opt=document.createElement('option');opt.value=o.name;opt.textContent=o.name;if(o.name===curMain) opt.selected=true;mainSel.appendChild(opt);});
  sideSel.innerHTML='<option value="">Bijgerecht</option>';
  xbentoOptions.side.forEach(o=>{const opt=document.createElement('option');opt.value=o.name;opt.textContent=o.name;if(o.name===curSide) opt.selected=true;sideSel.appendChild(opt);});
  riceSel.innerHTML='<option value="">Rijstsoort</option>';
  xbentoOptions.rice.forEach(o=>{const opt=document.createElement('option');opt.value=o.name;opt.textContent=o.name;if(o.name===curRice) opt.selected=true;riceSel.appendChild(opt);});
  vegSel.innerHTML='<option value="">Groente</option>';
  xbentoOptions.groente.forEach(o=>{const opt=document.createElement('option');opt.value=o.name;opt.textContent=o.name;if(o.name===curVeg) opt.selected=true;vegSel.appendChild(opt);});
}

function updateBubbleCartPrices(){
  Object.entries(cart).forEach(([name,item])=>{
    const m=name.match(/^Bubble Tea \(([^,]+), ([^,]+), ([^)]+)\)$/);
    if(!m) return;
    const price=getOptionPrice('base',m[1])+getOptionPrice('smaak',m[2])+getOptionPrice('topping',m[3]);
    item.price=price;
  });
  updateCart();
}

function updateXbentoCartPrices(){
  Object.entries(cart).forEach(([name,item])=>{
    const m=name.match(/^Xbento \(([^,]+), ([^,]+), ([^,]+), ([^)]+)\)$/);
    if(!m) return;
    const price=getXbentoOptionPrice('main',m[1])+getXbentoOptionPrice('side',m[2])+getXbentoOptionPrice('rice',m[3])+getXbentoOptionPrice('groente',m[4]);
    item.price=price;
  });
  updateCart();
}
// 同步支付方式
function syncPaymentMethod(id1, id2) {
  const sel1 = document.getElementById(id1);
  const sel2 = document.getElementById(id2);
  if (!sel1 || !sel2) return;

  // 当一个改变，另一个也改变
  sel1.addEventListener('change', () => {
    sel2.value = sel1.value;
  });
  sel2.addEventListener('change', () => {
    sel1.value = sel2.value;
  });
}

// 页面加载时绑定
document.addEventListener('DOMContentLoaded', () => {
  syncPaymentMethod('deliveryPayment', 'checkoutPayment'); // 替换ID为你真实的
});

function fetchBubbleOptions(){
  fetch('/api/bubble_options').then(r=>r.json()).then(data=>{
    bubbleOptions=data;
    populateBubbleSelectors();
    updateMilkTeaDisplay();
    updateBubbleCartPrices();
  });
}

function fetchXbentoOptions(){
  fetch('/api/xbento_options').then(r=>r.json()).then(data=>{
    xbentoOptions=data;
    populateXbentoSelectors();
    updateXbentoDisplay();
    updateXbentoCartPrices();
  });
}

const FORM_KEY = 'orderForm';
const storageOk = (() => {
  try {
    const t = '__test';
    sessionStorage.setItem(t, t);
    sessionStorage.removeItem(t);
    return true;
  } catch (e) {
    return false;
  }
})();

const LOCAL_INFO_KEY = 'customerInfo';
const localOk = (() => {
  try {
    const t = '__test_local';
    localStorage.setItem(t, t);
    localStorage.removeItem(t);
    return true;
  } catch (e) {
    return false;
  }
})();

function saveOrderForm() {
  if (!storageOk) return;
  const data = { orderType: document.querySelector('input[name="orderType"]:checked')?.id };
  document.querySelectorAll('#afhalenFields input, #afhalenFields select, #bezorgenFields input, #bezorgenFields select, #checkbox-group select, #remark, #discountCode, #tipSelect').forEach(el => {
    if (el.id) data[el.id] = el.value;
  });
  sessionStorage.setItem(FORM_KEY, JSON.stringify(data));
}

function loadOrderForm() {
  if (!storageOk) return;
  const stored = sessionStorage.getItem(FORM_KEY);
  if (!stored) return;
  const data = JSON.parse(stored);
  Object.keys(data).forEach(id => {
    if (id === 'orderType') return;
    const el = document.getElementById(id);
    if (el) el.value = data[id];
  });
  if (data.orderType) {
    const radio = document.getElementById(data.orderType);
    if (radio) {
      radio.checked = true;
      toggleOrderType();
    }
  }
}

function attachFormListeners() {
  if (!storageOk) return;
  document.querySelectorAll('#afhalenFields input, #afhalenFields select, #bezorgenFields input, #bezorgenFields select, #checkbox-group select, #remark, #discountCode, #tipSelect, input[name="orderType"]').forEach(el => {
    ['input', 'change'].forEach(evt => el.addEventListener(evt, saveOrderForm));
  });
}

function saveCustomerInfo() {
  if (!localOk) return;
  const fields = [
    'pickupName','pickupPhone','pickupEmail',
    'deliveryName','deliveryPhone','deliveryEmail',
    'deliveryAddress','deliveryHouseNumber','deliveryPostcode','deliveryArea'
  ];
  const data = { orderType: document.querySelector('input[name="orderType"]:checked')?.id };
  fields.forEach(id => {
    const el = document.getElementById(id);
    if (el && el.value.trim()) data[id] = el.value.trim();
  });
  localStorage.setItem(LOCAL_INFO_KEY, JSON.stringify(data));
}

function loadCustomerInfo() {
  if (!localOk) return;
  const stored = localStorage.getItem(LOCAL_INFO_KEY);
  if (!stored) return;
  const data = JSON.parse(stored);
  Object.keys(data).forEach(id => {
    if (id === 'orderType') return;
    const el = document.getElementById(id);
    if (el && !el.value) el.value = data[id];
  });
  if (data.orderType) {
    const radio = document.getElementById(data.orderType);
    if (radio && !document.querySelector('input[name="orderType"]:checked')) {
      radio.checked = true;
      toggleOrderType();
    }
  }
}

function formatEuro(val) {
  return `€${val.toFixed(2).replace('.', ',')}`;
}

function updatePriceBreakdown(subtotal, packaging) {
  currentSubtotal = subtotal;
  currentPackaging = packaging;
  const tip = parseFloat(document.getElementById('tipSelect').value || '0');
  const orderType = document.querySelector('input[name="orderType"]:checked').value;
  const deliveryFee = orderType === 'bezorgen' ? DELIVERY_FEE : 0;
  const {btw} = calculateBtw(cart, packaging, currentDiscount);
  finalTotal = subtotal + packaging + deliveryFee + tip - currentDiscount;
  document.getElementById('subtotalDisplay').textContent = formatEuro(subtotal);
  document.getElementById('packagingDisplay').textContent = formatEuro(packaging);
  document.getElementById('deliveryDisplay').textContent = formatEuro(deliveryFee);
  document.getElementById('discountDisplay').textContent = `- ${formatEuro(currentDiscount)}`;
  document.getElementById('discountRow').style.display = currentDiscount > 0 ? 'flex' : 'none';
  document.getElementById('btwDisplay').textContent = formatEuro(btw);
  document.getElementById('totalDisplay').textContent = formatEuro(finalTotal);
}

let isValidating = false; // 防止重复点击的锁

function applyDiscount() {
  const code = document.getElementById('discountCode').value.trim();
  if (!code) {
    currentDiscount = 0;
    updatePriceBreakdown(currentSubtotal, currentPackaging);
    return;
  }

  fetch('/api/discounts/validate', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      code: code,
      order_total: currentSubtotal + currentPackaging + 
        (document.querySelector('input[name="orderType"]:checked').value === 'bezorgen' ? DELIVERY_FEE : 0)
      // 🚨 去掉小费：+ parseFloat(document.getElementById('tipSelect').value || '0')
    })
  })
  .then(r => r.json())
  .then(res => {
    if (res.valid) {
      currentDiscount = res.discount_amount;
    } else {
      currentDiscount = 0;
      alert('Ongeldige kortingscode');
    }
    updatePriceBreakdown(currentSubtotal, currentPackaging);
  })
  .catch(() => {
    currentDiscount = 0;
    updatePriceBreakdown(currentSubtotal, currentPackaging);
  });
}




function changeBubbleQty(delta) {
  const qtySel = document.getElementById('bubbleTeaQty');
  let val = parseInt(qtySel.value || 0);
  val = Math.max(0, Math.min(20, val + delta));
  qtySel.value = val;

  const type = document.getElementById("bubbleType").value;
  const flavor = document.getElementById("bubbleFlavor").value;
  const topping = document.getElementById("bubbleTopping").value;

  if (!type || !flavor || !topping) return;

  const fullName = `Bubble Tea (${type}, ${flavor}, ${topping})`;
  const price = getBubbleTeaPrice();
  setQty(fullName, price, val, DEFAULT_PACKAGING_FEE);
  if (bubbleSetControls) bubbleSetControls.update();
}

function changeXbentoQty(delta) {
  const qtySel = document.getElementById('xBentoQty');
  let val = parseInt(qtySel.value || 0);

  const main = document.getElementById("xBentoMain").value;
  const side = document.getElementById("xBentoSide").value;
  const rice = document.getElementById("xBentoRice").value;
  const veg = document.getElementById("xBentoVeg").value;

  // 如果没选完配料，不更新数量也不更新购物车
  if (!main || !side || !rice || !veg) return;

  val = Math.max(0, Math.min(20, val + delta));
  qtySel.value = val;  // ✅ 只有当所有项都选择后再更新数量

  const price = getXbentoPrice();

  const fullName = `Xbento (${main}, ${side}, ${rice}, ${veg})`;
  setQty(fullName, price, val, DEFAULT_PACKAGING_FEE);
  if (xbentoSetControls) xbentoSetControls.update();
}




function changeOmakaseQty(delta) {
  const qtySel = document.getElementById('sushiBentoCount');
  let val = parseInt(qtySel.value || 0);
  val = Math.max(0, Math.min(20, val + delta));
  qtySel.value = val;
  updateOmakasePrefs();
}

function updateOmakasePrefs() {
  const qty = parseInt(document.getElementById('sushiBentoCount').value || 0);
  const container = document.getElementById('omakasePrefs');
  container.innerHTML = '';

  const existing = (cart['Bento Sushi Omakase'] && cart['Bento Sushi Omakase'].prefs) || [];
  for (let i = 1; i <= qty; i++) {
    const sel = document.createElement('select');
    ['Geen voorkeur','Alleen vis','Alleen vlees','Alleen veggie'].forEach(opt => {
      const o = document.createElement('option');
      o.value = opt;
      o.textContent = opt;
      sel.appendChild(o);
    });
    sel.value = existing[i-1] || 'Geen voorkeur';
    sel.id = `omakasePref${i}`;
    sel.addEventListener('change', setOmakaseQty);
    container.appendChild(sel);
  }
  setOmakaseQty();
}

function setOmakaseQty() {
  const qty = parseInt(document.getElementById('sushiBentoCount').value || 0);
  const prefs = [];

  for (let i = 1; i <= qty; i++) {
    prefs.push(document.getElementById(`omakasePref${i}`).value);
  }
  const price = parseFloat(document.querySelector('[data-name="Bento Sushi Omakase"]').dataset.price);
  setQty('Bento Sushi Omakase', price, qty, DEFAULT_PACKAGING_FEE, prefs);
}

function changeDragonQty(delta) {
  const qtySel = document.getElementById('dragonRollCount');
  let val = parseInt(qtySel.value || 0);
  val = Math.max(0, Math.min(20, val + delta));
  qtySel.value = val;
  updateDragonPrefs();
}

function updateDragonPrefs() {
  const qty = parseInt(document.getElementById('dragonRollCount').value || 0);
  const container = document.getElementById('dragonPrefs');
  container.innerHTML = '';

  const existing = (cart['Dragon Roll Omakase'] && cart['Dragon Roll Omakase'].prefs) || [];
  for (let i = 1; i <= qty; i++) {
    const sel = document.createElement('select');
    ['Geen voorkeur','Alleen met vis','Alleen met vlees'].forEach(opt => {
      const o = document.createElement('option');
      o.value = opt;
      o.textContent = opt;
      sel.appendChild(o);
    });
    sel.value = existing[i-1] || 'Geen voorkeur';
    sel.id = `dragonPref${i}`;
    sel.addEventListener('change', setDragonQty);
    container.appendChild(sel);
  }
  setDragonQty();
}

function setDragonQty() {
  const qty = parseInt(document.getElementById('dragonRollCount').value || 0);
  const prefs = [];
  for (let i = 1; i <= qty; i++) {
    prefs.push(document.getElementById(`dragonPref${i}`).value);
  }
  const price = parseFloat(document.querySelector('[data-name="Dragon Roll Omakase"]').dataset.price);
  setQty('Dragon Roll Omakase', price, qty, DEFAULT_PACKAGING_FEE, prefs);
}

function updatePokebowlSauces(id, name) {
  const qty = parseInt(document.getElementById(id).value || 0);
  const container = document.getElementById(id + 'Sauces');
  if (!container) return;
  container.innerHTML = '';
  const existing = (cart[name] && cart[name].prefs) || [];
  for (let i = 1; i <= qty; i++) {
    const sel = document.createElement('select');
    SAUCE_OPTIONS.forEach(opt => {
      const o = document.createElement('option');
      o.value = opt;
      o.textContent = opt;
      sel.appendChild(o);
    });
    sel.value = existing[i - 1] || 'Geen saus';
    sel.dataset.index = i;
    sel.addEventListener('change', () => setPokebowlQty(id, name));
    container.appendChild(sel);
  }
  setPokebowlQty(id, name);
}

function setPokebowlQty(id, name) {
  const sel = document.getElementById(id);
  const qty = parseInt(sel.value || 0);
  const pack = parseFloat(sel.closest('.menu-item').dataset.packaging || DEFAULT_PACKAGING_FEE);
  const price = parseFloat(sel.closest('.menu-item').dataset.price || 0);
  const container = document.getElementById(id + 'Sauces');
  const prefs = [];
  for (let i = 1; i <= qty; i++) {
    const s = container.querySelector(`select[data-index="${i}"]`);
    prefs.push(s ? s.value : 'Geen saus');
  }
  setQty(name, price, qty, pack, prefs);
}

function getXBowlSelections(){
  const baseSel=document.getElementById('xBowlBase');
  const baseOpt=baseSel?baseSel.selectedOptions[0]:null;
  const mains=Array.from(document.querySelectorAll('#xBowlMains select')).map(s=>s.selectedOptions[0]).filter(o=>o&&o.value);
  const toppings=Array.from(document.querySelectorAll('#xBowlToppings select')).map(s=>s.value).filter(v=>v);
  return {baseOpt,mains,toppings};
}

function updateXBowlDisplay(){
  const {baseOpt,mains,toppings}=getXBowlSelections();
  let price=0;
  if(baseOpt&&baseOpt.dataset.price) price+=parseFloat(baseOpt.dataset.price);
  mains.forEach(o=>{price+=parseFloat(o.dataset.price||0);});
  const paidTops = toppings.filter(t => t.toLowerCase() !== 'geen');
  price += paidTops.length * XBOWL_TOPPING_PRICE;
  const item=document.querySelector('.menu-item[data-name="X-Bowl"]');
  if(item){
    item.dataset.price=price;
    const p=document.getElementById('xBowlPrice');
    if(p) p.textContent=price?`€ ${price.toFixed(2)}`:'Prijs afhankelijk van keuzes';
    const info=document.getElementById('xBowlSummary');
    if(info){
      const mainNames=mains.map(o=>o.value).join(', ');
      const topNames=toppings.join(', ');
      let parts=[];
      if(baseOpt&&baseOpt.value) parts.push(baseOpt.value);
      if(mainNames) parts.push(mainNames);
      if(topNames) parts.push(topNames);
      const text=parts.join(' | ');
      info.textContent=text?`${text} - € ${price.toFixed(2)}`:'';
    }
  }
}

function getXBowlName(){
  const {baseOpt,mains,toppings}=getXBowlSelections();
  if(!baseOpt||!baseOpt.value||mains.length===0) return '';
  const mainNames=mains.map(o=>o.value).join(', ');
  const topNames=toppings.join(', ');
  return `X-Bowl (${baseOpt.value} | ${mainNames}${topNames?' | '+topNames:''})`;
}

function isXbowlValid(){
  const base=document.getElementById('xBowlBase').value;
  const hasMain=Array.from(document.querySelectorAll('#xBowlMains select')).some(s=>s.value);
  return base && hasMain;
}

function updateXBowlControls(){
  const wrap=document.getElementById('xBowlNewWrap');
  const qty=parseInt(document.getElementById('xBowlQty').value||0);
  if(isXbowlValid()&&qty>0) wrap.classList.remove('hidden');
  else wrap.classList.add('hidden');
}

function changeXbowlQty(delta) {
  const sel = document.getElementById('xBowlQty');
  let val = parseInt(sel.value || 0);
  const name = getXBowlName();
  if (!name) return;
  val = Math.max(0, Math.min(20, val + delta));
  sel.value = val;

  updateXBowlDisplay(); // 确保 price 被设置
  let price = parseFloat(document.querySelector('.menu-item[data-name="X-Bowl"]').dataset.price || '0');
  if (isNaN(price)) price = 0;

  if (currentXBowlName && currentXBowlName !== name && cart[currentXBowlName]) {
    delete cart[currentXBowlName];
  }
  setQty(name, price, val, DEFAULT_PACKAGING_FEE);
  currentXBowlName = name;
  updateXBowlControls();
  if (delta > 0 && val > 0) showXBowlModal();
}

function createXBowlMainSelect(){
  const div=document.createElement('div');
  const sel=document.createElement('select');
  sel.innerHTML='<option value="">Hoofdingredient</option>';
  xbowlMains.forEach(o=>{const opt=document.createElement('option');opt.value=o.name;opt.dataset.price=o.price;opt.textContent=o.name;sel.appendChild(opt);});
  const del=document.createElement('button');del.type='button';del.textContent='❌';
  del.addEventListener('click',()=>{div.remove();ensureXBowlMain();updateXBowlDisplay();updateXBowlControls();changeXbowlQty(0);});
  sel.addEventListener('change',()=>{
    const val = sel.value.toLowerCase();
    if(sel.value && val !== 'geen' && div===document.querySelector('#xBowlMains').lastElementChild){
      if(confirm('Wil je extra portie?')){
        document.getElementById('xBowlMains').appendChild(createXBowlMainSelect());
      }
    }
    updateXBowlDisplay();
    updateXBowlControls();
    changeXbowlQty(0);
  });
  div.appendChild(sel);div.appendChild(del);return div;
}

function createXBowlToppingSelect(){
  const div=document.createElement('div');
  const sel=document.createElement('select');
  sel.innerHTML='<option value="">Topping</option>';
  xbowlToppings.forEach(n=>{const opt=document.createElement('option');opt.value=n;opt.textContent=n;sel.appendChild(opt);});
  const del=document.createElement('button');del.type='button';del.textContent='❌';
  del.addEventListener('click',()=>{div.remove();ensureXBowlTopping();updateXBowlDisplay();updateXBowlControls();changeXbowlQty(0);});
  sel.addEventListener('change',()=>{
    const val = sel.value.toLowerCase();
    if(sel.value && val !== 'geen' && div===document.querySelector('#xBowlToppings').lastElementChild){
      if(confirm('Wil je extra topping toevoegen?')){
        document.getElementById('xBowlToppings').appendChild(createXBowlToppingSelect());
      }
    }
    updateXBowlDisplay();
    updateXBowlControls();
    changeXbowlQty(0);
  });
  div.appendChild(sel);div.appendChild(del);return div;
}

function ensureXBowlMain(){
  const wrap=document.getElementById('xBowlMains');
  if(!wrap.querySelector('select')) wrap.appendChild(createXBowlMainSelect());
}

function ensureXBowlTopping(){
  const wrap=document.getElementById('xBowlToppings');
  if(!wrap.querySelector('select')) wrap.appendChild(createXBowlToppingSelect());
}

function clearXBowlSet(){
  document.getElementById('xBowlBase').value='';
  document.getElementById('xBowlMains').innerHTML='';
  document.getElementById('xBowlToppings').innerHTML='';
  document.getElementById('xBowlQty').value=0;
  ensureXBowlMain();
  ensureXBowlTopping();
  updateXBowlDisplay();
  updateXBowlControls();
  currentXBowlName = '';
}



 document.addEventListener('DOMContentLoaded', () => {
  function isBubbleTeaValid() {
    const type = document.getElementById("bubbleType").value;
    const flavor = document.getElementById("bubbleFlavor").value;
    const topping = document.getElementById("bubbleTopping").value;
    return type && flavor && topping;
  }

  function isXbentoValid() {
    const main = document.getElementById("xBentoMain").value;
    const side = document.getElementById("xBentoSide").value;
    const rice = document.getElementById("xBentoRice").value;
    const veg = document.getElementById("xBentoVeg").value;
    return main && side && rice && veg;
  }


  bubbleSetControls = initNewSetControls({
    qtyId: 'bubbleTeaQty',
    wrapId: 'bubbleNewWrap',
    buttonId: 'bubbleNew',
    fieldIds: ['bubbleType','bubbleFlavor','bubbleTopping']
  });
  bubbleSetControls.update();
  ['bubbleType','bubbleFlavor','bubbleTopping'].forEach(id=>{
    document.getElementById(id).addEventListener('change', () => {
      updateMilkTeaDisplay();
    });
  });

  ['xBentoMain','xBentoSide','xBentoRice','xBentoVeg'].forEach(id=>{
    document.getElementById(id).addEventListener('change', () => {
      updateXbentoDisplay();
    });
  });

  ensureXBowlMain();
  ensureXBowlTopping();
  document.getElementById('xBowlBase').addEventListener('change', () => { updateXBowlDisplay(); updateXBowlControls(); changeXbowlQty(0); });
  document.getElementById('xBowlNew').addEventListener('click', clearXBowlSet);
  document.querySelector('.qty-plus[data-target="xBowlQty"]').addEventListener('click', () => {
    if (!isXbowlValid()) { alert('🥗 Basis en hoofdingrediënt vereist.'); return; }
    changeXbowlQty(1);
  });
  document.querySelector('.qty-minus[data-target="xBowlQty"]').addEventListener('click', () => {
    if (!isXbowlValid()) { alert('🥗 Basis en hoofdingrediënt vereist.'); return; }
    changeXbowlQty(-1);
  });
  document.getElementById('xBowlQty').addEventListener('change', () => {
    if (!isXbowlValid()) {
      alert('🥗 Basis en hoofdingrediënt vereist.');
      document.getElementById('xBowlQty').value = 0;
      return;
    }
    changeXbowlQty(0);
  });

  xbentoSetControls = initNewSetControls({
    qtyId: 'xBentoQty',
    wrapId: 'xBentoNewWrap',
    buttonId: 'xBentoNew',
    fieldIds: ['xBentoMain','xBentoSide','xBentoRice','xBentoVeg'],
    onClear: () => updateXbentoDisplay()  // ✅ 添加这个确保价格归零显示提示
  });
  xbentoSetControls.update();


  // 🧋 奶茶按钮加减
  document.querySelector('.qty-plus[data-target="bubbleTeaQty"]').addEventListener('click', () => {
    if (!isBubbleTeaValid()) {
      alert("🧋 Kies eerst type, smaak en topping voor je bubble tea.");
      return;
    }
    changeBubbleQty(1);
  });

  document.querySelector('.qty-minus[data-target="bubbleTeaQty"]').addEventListener('click', () => {
    if (!isBubbleTeaValid()) {
      alert("🧋 Kies eerst type, smaak en topping voor je bubble tea.");
      return;
    }
    changeBubbleQty(-1);
  });

  // 🍱 Xbento 按钮加减（保留一次即可）
  document.querySelector('.qty-plus[data-target="xBentoQty"]').addEventListener('click', () => {
    if (!isXbentoValid()) {
      alert("🍱 Kies eerst hoofdgerecht, bijgerecht, rijstsoort en groente voor je Xbento.");
      return;
    }
    changeXbentoQty(1);
  });

  document.querySelector('.qty-minus[data-target="xBentoQty"]').addEventListener('click', () => {
    if (!isXbentoValid()) {
      alert("🍱 Kies eerst hoofdgerecht, bijgerecht, rijstsoort en groente voor je Xbento.");
      return;
    }
    changeXbentoQty(-1);
  });



  // 🧋 奶茶 select 直接选择数量时
  document.getElementById('bubbleTeaQty').addEventListener('change', () => {
    if (!isBubbleTeaValid()) {
      alert("🧋 Kies eerst type, smaak en topping voor je bubble tea.");
      document.getElementById('bubbleTeaQty').value = 0;
      return;
    }
    changeBubbleQty(0);
  });

  // 🍱 Xbento select 直接选择数量时
  document.getElementById('xBentoQty').addEventListener('change', () => {
    if (!isXbentoValid()) {
      alert("🍱 Kies eerst hoofdgerecht, bijgerecht, rijstsoort en groente voor je Xbento.");
      document.getElementById('xBentoQty').value = 0;
      return;
    }
    changeXbentoQty(0);
  });


  // 🧁 初始化下拉数量为 0～20
  ['bubbleTeaQty','xBentoQty','xBowlQty','ebiQty','chickenQty','beefQty','ribeyeQty','chasiuQty','zhaiQty'].forEach(id => {
    const sel = document.getElementById(id);
    for (let i = 0; i <= 20; i++) {
      const opt = document.createElement('option');
      opt.value = i;
      opt.text = i;
      sel.appendChild(opt);
    }
    sel.value = 0;
  });
});

function isRamenValid(code) {
  return document.getElementById(code + 'Base').value && document.getElementById(code + 'Smaak').value;
}

function updateRamenControls(code) {
  const base = document.getElementById(code + 'Base').value;
  const smaak = document.getElementById(code + 'Smaak').value;
  const qty = parseInt(document.getElementById(code + 'Qty').value || 0);
  const wrap = document.getElementById(code + 'NewWrap');
  if (wrap) {
    if (base && smaak && qty > 0) wrap.classList.remove('hidden');
    else wrap.classList.add('hidden');
  }
}

function changeRamenQty(code, delta) {
  const sel = document.getElementById(code + 'Qty');
  let val = parseInt(sel.value || 0);
  val = Math.max(0, Math.min(20, val + delta));
  sel.value = val;
  const item = document.querySelector(`.menu-item[data-code="${code}"]`);
  const base = document.getElementById(code + 'Base').value;
  const smaak = document.getElementById(code + 'Smaak').value;
  if (!base || !smaak) return;
  const name = item.dataset.name;
  const price = parseFloat(item.dataset.price);
  const pack = parseFloat(item.dataset.packaging || DEFAULT_PACKAGING_FEE);
  const fullName = `${name} - ${base} - ${smaak}`;
  setQty(fullName, price, val, pack);
  updateRamenControls(code);
}

function clearRamenSet(code) {
  document.getElementById(code + 'Base').value = '';
  document.getElementById(code + 'Smaak').value = '';
  document.getElementById(code + 'Qty').value = 0;
  updateRamenControls(code);
}

function initNewSetControls({qtyId, wrapId, buttonId, fieldIds, onClear}) {
  const qtyEl = document.getElementById(qtyId);
  const wrapEl = document.getElementById(wrapId);
  const btn = document.getElementById(buttonId);

  function update() {
    const filled = fieldIds.every(id => document.getElementById(id).value);
    const qty = parseInt(qtyEl.value || 0);
    if (filled && qty > 0) wrapEl.classList.remove('hidden');
    else wrapEl.classList.add('hidden');
  }

  function clear() {
    fieldIds.forEach(id => { document.getElementById(id).value = ''; });
    qtyEl.value = 0;
    update();
    if (typeof onClear === 'function') onClear();  // ✅ 增加这一行
  }

  fieldIds.forEach(id => document.getElementById(id).addEventListener('change', update));
  qtyEl.addEventListener('change', update);
  if (btn) btn.addEventListener('click', clear);
  return { update, clear };
}


document.addEventListener('DOMContentLoaded', () => {
  const codes = ['ebi','chicken','beef','ribeye','chasiu','zhai'];
  codes.forEach(code => {
    const qty = document.getElementById(code + 'Qty');
    populateSelect(qty);
    qty.value = 0;
    updateRamenControls(code);
    document.getElementById(code + 'Base').addEventListener('change', () => updateRamenControls(code));
    document.getElementById(code + 'Smaak').addEventListener('change', () => updateRamenControls(code));
    document.querySelector(`.qty-plus[data-target="${code}Qty"]`).addEventListener('click', () => {
      if (!isRamenValid(code)) { alert('🍜 Kies eerst base en smaak voor je ramen.'); return; }
      changeRamenQty(code, 1);
    });
    document.querySelector(`.qty-minus[data-target="${code}Qty"]`).addEventListener('click', () => {
      if (!isRamenValid(code)) { alert('🍜 Kies eerst base en smaak voor je ramen.'); return; }
      changeRamenQty(code, -1);
    });
    qty.addEventListener('change', () => {
      if (!isRamenValid(code)) { alert('🍜 Kies eerst base en smaak voor je ramen.'); qty.value = 0; return; }
      changeRamenQty(code, 0);
    });
    document.getElementById(code + 'New').addEventListener('click', () => clearRamenSet(code));
  });
});



  


  
function populateSelect(select) {
  for (let i = 0; i <= 20; i++) {
    const opt = document.createElement('option');
    opt.value = i;
    opt.textContent = i;
    select.appendChild(opt);
  }
}

function createSelect(current, onChange) {
  const select = document.createElement('select');
  for (let i = 0; i <= 20; i++) {
    const opt = document.createElement('option');
    opt.value = i;
    opt.textContent = i;
    if (i === current) opt.selected = true;
    select.appendChild(opt);
  }
  select.addEventListener('change', () => onChange(parseInt(select.value)));
  return select;
}

function setQty(name, price, qty, packaging = DEFAULT_PACKAGING_FEE, prefs = null) {
  if (isItemSoldOut(name)) {
    showFeedback('Uitverkocht!', true);
    return;
  }
  price = parseFloat(price);
  if (isNaN(price)) price = 0;
  qty = parseInt(qty, 10);
  if (isNaN(qty) || qty <= 0) {
    delete cart[name];
  } else {
    cart[name] = { price, qty, packaging };
    if (prefs) cart[name].prefs = prefs;
    else if (cart[name] && cart[name].prefs) delete cart[name].prefs;
  }
  updateCart();
  saveCart();
}

function updateCart() {
  const list = document.getElementById('cart');
  list.innerHTML = '';
  let total = 0;
  let packagingTotal = 0;

  Object.entries(cart).forEach(([name, item]) => {
    const li = document.createElement('li');
    const sel = createSelect(item.qty, val => {
      const menuItem = document.querySelector(`[data-name="${name}"]`);
      if (menuItem) {
        const qtyInput = menuItem.querySelector('select');
        if (qtyInput) qtyInput.value = val;
      } else if (name.startsWith('Bubble Tea')) {
        const match = name.match(/^Bubble Tea \(([^,]+), ([^,]+), ([^)]+)\)$/);
        if (match) {
          const [, type, flavor, topping] = match;
          const curType = document.getElementById('bubbleType').value;
          const curFlavor = document.getElementById('bubbleFlavor').value;
          const curTopping = document.getElementById('bubbleTopping').value;
          if (type === curType && flavor === curFlavor && topping === curTopping) {
            document.getElementById('bubbleTeaQty').value = val;
          }
        }
      }
      setQty(name, item.price, val, item.packaging, item.prefs);
      if (name === 'Bento Sushi Omakase') {
        document.getElementById('sushiBentoCount').value = val;
        updateOmakasePrefs();
      } else if (name === 'Dragon Roll Omakase') {
        document.getElementById('dragonRollCount').value = val;
        updateDragonPrefs();
      }
    });
    const subtotal = item.qty * item.price;
    li.textContent = `${name} - €${subtotal.toFixed(2)} `;
    li.appendChild(sel);
    if (item.prefs) {
      const prefTitle = document.createElement('div');
      prefTitle.textContent = 'Voorkeur:';
      const ul = document.createElement('ul');
      item.prefs.forEach((p, i) => {
        const pli = document.createElement('li');
        pli.textContent = `${i + 1}. ${p}`;
        ul.appendChild(pli);
      });
      li.appendChild(prefTitle);
      li.appendChild(ul);
    }
    list.appendChild(li);
    if (item.qty > 0) {
      total += subtotal;
      packagingTotal += (item.packaging || 0) * item.qty;
    }
  });

  const extrasContainer = document.getElementById('cartExtrasContainer');
  extrasContainer.innerHTML = '';
  

  const row = document.createElement('div');
  row.className = 'cart-extras';
  Object.keys(extras).forEach(id => {
    const wrapper = document.createElement('div');
    wrapper.className = 'cart-extra-item';
    const img = document.createElement('img');
    img.src = extras[id].icon;
    img.alt = extras[id].label;
    wrapper.appendChild(img);
    const sel = createSelect(parseInt(document.getElementById(id).value || 0), val => {
      document.getElementById(id).value = val;
      updateCart();
    });
    wrapper.appendChild(sel);
    row.appendChild(wrapper);
  });
  extrasContainer.appendChild(row);

  const cartContainer = document.querySelector('.cart-items');
  if (list.children.length > 3) {
    cartContainer.classList.add('scrollable');
  } else {
    cartContainer.classList.remove('scrollable');
  }

  updatePriceBreakdown(total, packagingTotal);

  const totalQty = Object.values(cart).reduce((s, it) => s + (isNaN(it.qty) ? 0 : it.qty), 0) +
    Object.keys(extras).reduce((s, id) => s + parseInt(document.getElementById(id).value || 0), 0);

  const badge = document.getElementById('cart-count');
  badge.textContent = totalQty;
  badge.style.display = totalQty > 0 ? 'inline-block' : 'none';
  saveCart();
}

document.addEventListener('DOMContentLoaded', () => {
  loadCart();
  loadOrderForm();
  loadCustomerInfo();
  attachFormListeners();
  updateCart();
});

document.addEventListener('DOMContentLoaded', () => {
  const bubbleSel = document.getElementById("bubbleTeaQty");
  populateSelect(bubbleSel);
  bubbleSel.addEventListener('change', () => changeBubbleQty(0));



  document.querySelectorAll('.menu-item select').forEach(sel => {
    if (['bubbleTeaQty','bubbleType','bubbleFlavor','bubbleTopping','xBentoMain','xBentoSide','xBentoRice','xBentoVeg','xBowlBase','xBowlQty','ebiBase','ebiSmaak','ebiQty','chickenBase','chickenSmaak','chickenQty','beefBase','beefSmaak','beefQty','ribeyeBase','ribeyeSmaak','ribeyeQty','chasiuBase','chasiuSmaak','chasiuQty','zhaiBase','zhaiSmaak','zhaiQty'].includes(sel.id)) return;
    populateSelect(sel);
    const parent = sel.closest('.menu-item');
    const name = parent.dataset.name;
    const price = parseFloat(parent.dataset.price);
    const pack = parseFloat(parent.dataset.packaging || DEFAULT_PACKAGING_FEE);
    if (name === 'Bento Sushi Omakase') {
      sel.addEventListener('change', () => changeOmakaseQty(0));
    } else if (name === 'Dragon Roll Omakase') {
      sel.addEventListener('change', () => changeDragonQty(0));
    } else if (POKEBOWL_IDS.includes(sel.id)) {
      sel.addEventListener('change', () => updatePokebowlSauces(sel.id, name));
      updatePokebowlSauces(sel.id, name);
    } else {
      sel.addEventListener('change', () => {
        setQty(name, price, parseInt(sel.value), pack);
      });
    }
  });

  document.querySelectorAll('.qty-plus').forEach(btn => {
    if (['bubbleTeaQty','xBentoQty','xBowlQty','ebiQty','chickenQty','beefQty','ribeyeQty','chasiuQty','zhaiQty'].includes(btn.dataset.target)) return;
    btn.addEventListener('click', () => {
      const sel = document.getElementById(btn.dataset.target);
      let val = parseInt(sel.value);
      if (val < 20) val++;
      sel.value = val;
      const parent = sel.closest('.menu-item');
      const pack = parseFloat(parent.dataset.packaging || DEFAULT_PACKAGING_FEE);
      if (parent.dataset.name === 'Bento Sushi Omakase') {
        changeOmakaseQty(0);
      } else if (parent.dataset.name === 'Dragon Roll Omakase') {
        changeDragonQty(0);
      } else if (POKEBOWL_IDS.includes(sel.id)) {
        updatePokebowlSauces(sel.id, parent.dataset.name);
      } else {
        setQty(parent.dataset.name, parseFloat(parent.dataset.price), val, pack);
      }
    });
  });

  document.querySelectorAll('.qty-minus').forEach(btn => {
    if (['bubbleTeaQty','xBentoQty','xBowlQty','ebiQty','chickenQty','beefQty','ribeyeQty','chasiuQty','zhaiQty'].includes(btn.dataset.target)) return;
    btn.addEventListener('click', () => {
      const sel = document.getElementById(btn.dataset.target);
      let val = parseInt(sel.value);
      if (val > 0) val--;
      sel.value = val;
      const parent = sel.closest('.menu-item');
      const pack = parseFloat(parent.dataset.packaging || DEFAULT_PACKAGING_FEE);
      if (parent.dataset.name === 'Bento Sushi Omakase') {
        changeOmakaseQty(0);
      } else if (parent.dataset.name === 'Dragon Roll Omakase') {
        changeDragonQty(0);
      } else if (POKEBOWL_IDS.includes(sel.id)) {
        updatePokebowlSauces(sel.id, parent.dataset.name);
      } else {
        setQty(parent.dataset.name, parseFloat(parent.dataset.price), val, pack);
      }
    });
  });

  Object.keys(extras).forEach(id => {
    const sel = document.getElementById(id);
    populateSelect(sel);
    sel.addEventListener('change', updateCart);
  });

 function formatEuro(value) {
  value = parseFloat(value);
  return '€' + (value % 1 === 0 ? value.toFixed(0) : value.toFixed(2)).replace('.', ',');
}

const tipSel = document.getElementById('tipSelect');
for (let i = 0; i <= 20; i++) {
  const opt = document.createElement('option');
  opt.value = i;
  opt.textContent = formatEuro(i);  // ✅ 正确设置显示文本
  tipSel.appendChild(opt);
}

  tipSel.value = 0;
  tipSel.addEventListener('change', () => updatePriceBreakdown(currentSubtotal, currentPackaging));

  
  const validateBtn = document.getElementById('validateDiscountBtn');
  validateBtn.addEventListener('click', applyDiscount);

  updateCart();
  loadOrderForm();
});
</script>
<script>
let storeOpen = true;
let businessHours = '';
let closedMessage = '';
let pickupAvailable = true;
let deliveryAvailable = true;
let pickupOpenTime = '12:00';
let pickupCloseTime = '23:59';
let deliveryOpenTime = '12:00';
let deliveryCloseTime = '23:59';
let timeInterval = 15;
let showZSM = true;
let pickupAddress = '';
let allowedPostcodes = [];
let currentSettings = {};
function showFeedback(msg, isError=false) {
  const el = document.getElementById('feedback');
  el.textContent = msg;
  if (isError) el.classList.add('error');
  else el.classList.remove('error');
  el.style.display = 'block';
  setTimeout(() => { el.style.display = 'none'; }, 3000);
}

const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
function beep(){
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  osc.type = 'sine';
  osc.frequency.setValueAtTime(660, audioCtx.currentTime);
  gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
  osc.connect(gain);
  gain.connect(audioCtx.destination);
  osc.start();
  osc.stop(audioCtx.currentTime + 0.2);
}
document.body.addEventListener('click',()=>{if(audioCtx.state==='suspended') audioCtx.resume();},{once:true});

function setButtonsDisabled(dis){
  document.querySelectorAll('button').forEach(btn=>{
    if(btn.id !== 'closed-ok') btn.disabled = dis;
  });
}

function showClosedPopup(){
  const overlay=document.getElementById('closed-overlay');
  const popup=document.getElementById('closed-popup');
  const text=document.getElementById('closed-text');
  if(overlay&&popup){
    if(text) text.textContent = closedMessage || 'Momenteel gesloten';
    overlay.style.display='flex';
    popup.style.display='block';
    setButtonsDisabled(true);
  }
}

function hideClosedPopup(){
  const popup=document.getElementById('closed-popup');
  if(popup) popup.style.display='none';
  setButtonsDisabled(false);
}

function scrollToField(id) {
  const el = document.getElementById(id);
  if (el) {
    el.scrollIntoView({ behavior: 'smooth', block: 'center' });
    el.focus();
    el.style.borderColor = 'red';
    setTimeout(() => { el.style.borderColor = ''; }, 2000);
  }
}

function getFirstMissingField() {
  const type = document.querySelector('input[name="orderType"]:checked').value;
  if (type === 'afhalen') {
    if (!document.getElementById('pickupName').value.trim()) return 'pickupName';
    if (!document.getElementById('pickupPhone').value.trim()) return 'pickupPhone';
    if (!document.getElementById('pickupEmail').value.trim()) return 'pickupEmail';
    if (!document.getElementById('pickup_time').value) return 'pickup_time';
  } else {
    if (!document.getElementById('deliveryName').value.trim()) return 'deliveryName';
    if (!document.getElementById('deliveryPhone').value.trim()) return 'deliveryPhone';
    if (!document.getElementById('deliveryEmail').value.trim()) return 'deliveryEmail';
    if (!document.getElementById('deliveryAddress').value.trim()) return 'deliveryAddress';
    if (!document.getElementById('deliveryHouseNumber').value.trim()) return 'deliveryHouseNumber';
    if (!document.getElementById('deliveryPostcode').value.trim()) return 'deliveryPostcode';
    if (!document.getElementById('deliveryArea').value.trim()) return 'deliveryArea';
    if (!document.getElementById('delivery_time').value) return 'delivery_time';
  }
  return null;
}

function generateOrderNumber() {
  const now = new Date();
  const date = now.toISOString().slice(0, 10).replace(/-/g, '');
  let rand = Math.random().toString(36).substring(2, 6).toUpperCase();

  const delivery = document.getElementById('bezorgen')?.checked;
  const tijdslot = delivery
    ? document.getElementById('delivery_time')?.value
    : document.getElementById('pickup_time')?.value;
  const raw = String(tijdslot || '').toLowerCase().replace(/\./g, '').trim();
  const isZsm = !raw || raw === 'zsm' || raw === 'asap';

  if (isZsm) {
    rand = rand.slice(0, 3) + 'Z';
  } else if (rand.endsWith('Z')) {
    rand = rand.slice(0, 3) + 'X';
  }

  return `NV${date}-${rand}`;
}


function checkout() {
  if (!storeOpen) {
    showClosedPopup();
    window.scrollTo({ top: 0, behavior: 'smooth' });
    return;
  }

  const paidItems = Object.values(cart).filter(item => item.price > 0 && item.qty > 0);
  if (paidItems.length === 0) {
    alert('U moet ten minste één gerecht selecteren om te bestellen.');
    return;
  }

  const sliderText = document.getElementById('sliderText');
  const sliderButton = document.getElementById('sliderButton');
  const sliderTrack = document.getElementById('sliderTrack');

  const missing = getFirstMissingField();
  if (missing) {
    showFeedback('Vul eerst uw gegevens in', true);
    scrollToField(missing);
    if (sliderText && sliderButton && sliderTrack) {
      sliderText.innerText = 'Schuif om te bestellen';
      sliderButton.innerHTML = '<img src="cart-icon.svg" class="cart-icon" />';
      sliderTrack.style.pointerEvents = 'auto';
    }
    isSubmitting = false;
    return;
  }

  const chopstickCount = document.getElementById('chopstickCount').value;
  const soyCount = document.getElementById('soyCount').value;
  const wasabiCount = document.getElementById('wasabiCount').value;
  const gemberCount = document.getElementById('gemberCount').value;
  const remark = document.getElementById('remark').value.trim();

  if (sliderText && sliderButton && sliderTrack) {
    sliderText.innerText = 'Bezig met verwerken…';
    sliderButton.innerHTML = `
      <svg class="spinner" width="24" height="24" viewBox="0 0 44 44" fill="none" stroke="white">
        <circle cx="22" cy="22" r="20" stroke-width="4" stroke-linecap="round" stroke-dasharray="125" stroke-dashoffset="0">
          <animateTransform attributeName="transform" type="rotate" from="0 22 22" to="360 22 22" dur="1s" repeatCount="indefinite" />
        </circle>
      </svg>`;
    sliderTrack.style.pointerEvents = 'none';
  }

  let orderSummary = Object.entries(cart)
    .map(([name, item]) => {
      let line = `${name} x ${item.qty}`;
      if (item.prefs) {
        const prefsText = item.prefs.map((p, i) => `${i + 1}. ${p}`).join('\n   ');
        line += `\n   Voorkeur:\n   ${prefsText}`;
      }
      return line;
    })
    .join('\n');

  orderSummary += `\nStokjes nodig: ${chopstickCount}`;
  orderSummary += `\nSojasaus: ${soyCount}`;
  orderSummary += `\nWasabi: ${wasabiCount}`;
  orderSummary += `\nGember: ${gemberCount}`;
  if (remark) orderSummary += `\nOpmerking: ${remark}`;

  const orderType = document.querySelector('input[name="orderType"]:checked').value;
  let customerDetails = '';
  let paymentMethod = document.getElementById('cartPaymentSelect')?.value || '';
  let email = '';

  if (orderType === 'afhalen') {
    const name = document.getElementById('pickupName').value.trim();
    const phone = document.getElementById('pickupPhone').value.trim();
    email = document.getElementById('pickupEmail').value.trim();
    const time = document.getElementById('pickup_time').value;
    paymentMethod = document.getElementById('cartPaymentSelect')?.value || document.getElementById('pickupPayment').value;
    document.getElementById('pickupPayment').value = paymentMethod;

    customerDetails = `\n[Afhalen]\nNaam: ${name}\nTelefoon: ${phone}`;
    if (email) customerDetails += `\nEmail: ${email}`;
    customerDetails += `\nAfhaaltijd: ${time}\nBetaalwijze: ${paymentMethod}`;
  } else {
    const name = document.getElementById('deliveryName').value.trim();
    const phone = document.getElementById('deliveryPhone').value.trim();
    email = document.getElementById('deliveryEmail').value.trim();
    const address = document.getElementById('deliveryAddress').value.trim();
    const houseNumber = document.getElementById('deliveryHouseNumber').value.trim();
    const postcodeRaw = document.getElementById('deliveryPostcode').value.trim();
    const area = document.getElementById('deliveryArea').value.trim();
    const time = document.getElementById('delivery_time').value;
    paymentMethod = document.getElementById('cartPaymentSelect')?.value || document.getElementById('deliveryPayment').value;
    document.getElementById('deliveryPayment').value = paymentMethod;

    const postcodeClean = postcodeRaw.replace(/\s+/g, '');
    const postcode = postcodeClean.slice(0, 4);
    if (allowedPostcodes.length && !allowedPostcodes.includes(postcode)) {
      alert(`🚫 Wij bezorgen helaas niet in dit postcodegebied (${postcode}).`);
      const postcodeField = document.getElementById('deliveryPostcode');
      postcodeField.style.borderColor = 'red';
      postcodeField.focus();
      return;
    } else {
      document.getElementById('deliveryPostcode').style.borderColor = '';
    }

    customerDetails = `\n[Bezorgen]\nNaam: ${name}\nTelefoon: ${phone}`;
    if (email) customerDetails += `\nEmail: ${email}`;
    customerDetails += `\nAdres: ${address} ${houseNumber}\nPostcode: ${postcodeRaw}\nGebied: ${area}\nBezorgtijd: ${time}\nBetaalwijze: ${paymentMethod}`;
  }

  const tip = parseFloat(document.getElementById('tipSelect').value);
  const subtotal = currentSubtotal;
  const packagingFee = Object.values(cart).reduce((s, it) => s + (it.packaging || 0) * it.qty, 0);
  const deliveryFee = orderType === 'bezorgen' ? 2.50 : 0;
  const {btw, btw9, btw21} = calculateBtw(cart, packagingFee, currentDiscount);
  const total = subtotal + packagingFee + deliveryFee + tip - currentDiscount;
  const totalPrice = !isNaN(total) ? total.toFixed(2) : "0.00";

  const orderNumber = generateOrderNumber();

  const discountCode = document.getElementById('discountCode').value.trim();
  const deliveryLine = deliveryFee > 0 ? `\nBezorgkosten: €${deliveryFee.toFixed(2)}` : '';
  const packagingLine = packagingFee > 0 ? `\nVerpakkingskosten: €${packagingFee.toFixed(2)}` : '';
  const tipLine = tip > 0 ? `\nFooi: €${tip.toFixed(2)}` : '';
  const discountLine = `\nKorting: -€${currentDiscount.toFixed(2)} (Code: ${discountCode || 'geen'})`;

  const message = `📦 Nieuwe bestelling bij *Nova Asia*:\n\n${orderSummary}\n${customerDetails}${deliveryLine}${packagingLine}${tipLine}${discountLine}\nTotaal: €${totalPrice}`;

  const itemsToSend = { ...cart };
  Object.keys(extras).forEach(id => {
    const qty = parseInt(document.getElementById(id).value || 0);
    if (qty > 0) itemsToSend[extras[id].label] = { price: 0, qty };
  });

  const pickupSel = document.getElementById('pickup_time').value;
  const deliverySel = document.getElementById('delivery_time').value;
  const pickupValue = pickupSel === 'Z.S.M.' ? getAsapTime() : pickupSel;
  const deliveryValue = deliverySel === 'Z.S.M.' ? getAsapTime() : deliverySel;
  const tijdslotDisplay = orderType === 'afhalen' ? pickupSel : deliverySel;

  const summary = {
    subtotal: subtotal.toFixed(2),
    packaging: packagingFee.toFixed(2),
    delivery: deliveryFee.toFixed(2),
    discount_amount: currentDiscount.toFixed(2),
    btw: btw.toFixed(2),
    btw_9: btw9.toFixed(2),
    btw_21: btw21.toFixed(2),
    total: totalPrice
  };

  fetch('https://flask-order-api.onrender.com/submit_order', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      orderType,
      name: orderType === 'afhalen' ? document.getElementById('pickupName').value.trim() : document.getElementById('deliveryName').value.trim(),
      phone: orderType === 'afhalen' ? document.getElementById('pickupPhone').value.trim() : document.getElementById('deliveryPhone').value.trim(),
      email,
      customerEmail: email,
      pickup_time: orderType === 'afhalen' ? pickupValue : '',
      delivery_time: orderType === 'bezorgen' ? deliveryValue : '',
      tijdslot_display: tijdslotDisplay,
      paymentMethod,
      postcode: orderType === 'bezorgen' ? document.getElementById('deliveryPostcode').value.trim() : '',
      house_number: orderType === 'bezorgen' ? document.getElementById('deliveryHouseNumber').value.trim() : '',
      street: orderType === 'bezorgen' ? document.getElementById('deliveryAddress').value.trim() : '',
      city: orderType === 'bezorgen' ? document.getElementById('deliveryArea').value.trim() : '',
      order_number: orderNumber,
      items: itemsToSend,
      opmerking: remark,
      tip: tip.toFixed(2),
      subtotal: subtotal.toFixed(2),
      packaging_fee: packagingFee.toFixed(2),
      delivery_fee: deliveryFee.toFixed(2),
      btw: btw.toFixed(2),
      btw_9: btw9.toFixed(2),
      btw_21: btw21.toFixed(2),
      totaal: isNaN(total) ? "0.00" : total.toFixed(2),
      discountAmount: currentDiscount.toFixed(2),
      discountCode,
      message,
      summary
    })
  })
    .then(res => res.json())
    .then(data => {
      if (data.status === 'ok') {
        beep();
        saveCustomerInfo();
        if (paymentMethod === 'online' && data.paymentLink) {
          window.location.href = data.paymentLink;
          return;
        }
        showFeedback('Bestelling succesvol verzonden! Bestelnummer: ' + orderNumber);
        for (const k in cart) delete cart[k];
        sessionStorage.removeItem(FORM_KEY);
        updateCart();
        sliderText.innerText = 'Gelukt!';
        sliderButton.innerHTML = `
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>`;
        sliderTrack.style.pointerEvents = 'none';
        setTimeout(() => { window.location.href = '/'; }, 1500);
      } else {
        const errorMsg = data.error || 'Er is een fout opgetreden bij het verzenden van uw bestelling. Probeer het opnieuw.';
        showFeedback(errorMsg, true);
        if (sliderText && sliderButton && sliderTrack) {
          sliderText.innerText = 'Schuif om te betalen';
          sliderButton.innerHTML = '<img src="cart-icon.svg" class="cart-icon" />';
          sliderTrack.style.pointerEvents = 'auto';
        }
      }
    })
    .catch(err => {
      console.error(err);
      showFeedback('Er is een fout opgetreden bij het verzenden van uw bestelling. Probeer het opnieuw.', true);
      if (sliderText && sliderButton && sliderTrack) {
        sliderText.innerText = 'Schuif om te betalen';
        sliderButton.innerHTML = '<img src="cart-icon.svg" class="cart-icon" />';
        sliderTrack.style.pointerEvents = 'auto';
      }
    });
}


</script>
<script>
  function pad(num) {
    return num.toString().padStart(2, '0');
  }

  function getAsapTime() {
    const d = new Date();
    d.setMinutes(d.getMinutes() + 30);
    return `${pad(d.getHours())}:${pad(d.getMinutes())}`;
  }

  function getSelectTimes(selectId, startStr){
    const sel = document.getElementById(selectId);
    if(!sel || sel.options.length === 0) return {};
    const first = sel.options[0].value;
    const last = sel.options[sel.options.length-1].value;
    return {
      earliest: parseTime(first, startStr),
      latest: parseTime(last, startStr)
    };
  }

  function populateTimeOptions(selectId, offsetMinutes, openStr, closeStr) {
    const select = document.getElementById(selectId);
    if (!select) return;

    const prev = select.value; // 保留当前选中值
    select.innerHTML = '';

    const now = new Date();
    now.setMinutes(now.getMinutes() + offsetMinutes); // 现在时间 + 制作时间缓冲

    const oStr = openStr || '00:00';
    const cStr = closeStr || '23:59';
    const [oh, om] = oStr.split(':').map(Number);
    const [ch, cm] = cStr.split(':').map(Number);

    const open = new Date();
    open.setHours(oh, om, 0, 0);

    const close = new Date();
    close.setHours(ch, cm, 0, 0);

    // 处理跨夜情况
    if (ch * 60 + cm <= oh * 60 + om) {
        close.setDate(close.getDate() + 1);
    }

    const allTimes = [];
    for (let t = new Date(open); t <= close; t.setMinutes(t.getMinutes() + timeInterval)) {
        const hh = pad(t.getHours());
        const mm = pad(t.getMinutes());
        allTimes.push({ time: new Date(t), str: `${hh}:${mm}` });
    }

    if (allTimes.length) {
        const lastTime = allTimes[allTimes.length - 1].time;
        if (now >= lastTime) {
            const opt = document.createElement('option');
            opt.value = '';
            opt.textContent = 'Geen beschikbare tijd';
            select.appendChild(opt);
            return;
        }
    }

    if (showZSM) {
        const asapOpt = document.createElement('option');
        asapOpt.value = 'Z.S.M.';
        asapOpt.textContent = 'Z.S.M.';
        select.appendChild(asapOpt);
    }

    // 只有营业开始时间还有效，才显示开始时间
    let start = now > open ? now : open;
    start = new Date(start);
    start.setMinutes(Math.ceil(start.getMinutes() / timeInterval) * timeInterval, 0, 0);

    const lastTwo = allTimes.slice(-2).map(t => t.str);

    for (const { time, str } of allTimes) {
        if (time < start && !lastTwo.includes(str)) continue;
        const opt = document.createElement('option');
        opt.value = str;
        opt.textContent = str;
        select.appendChild(opt);
    }

    if (select.options.length === 0) {
        const opt = document.createElement('option');
        opt.value = '';
        opt.textContent = 'Geen beschikbare tijd';
        select.appendChild(opt);
    }

    if (prev) {
        const option = Array.from(select.options).find(o => o.value === prev);
        if (option) select.value = prev;
    }
  }


  function toggleOrderType() {
    const afhalen = document.getElementById('afhalen');
    const bezorgen = document.getElementById('bezorgen');
    const infoBox = document.getElementById('locationInfo');
    const afhalenFields = document.getElementById('afhalenFields');
    const bezorgenFields = document.getElementById('bezorgenFields');
    const transferValues = (fromBox, toBox) => {
      const inputs = fromBox.querySelectorAll('input, select, textarea');
      inputs.forEach(src => {
        const key = src.id || src.name;
        if (!key) return;
        const target = toBox.querySelector(`#${CSS.escape(key)}`) ||
                       toBox.querySelector(`[name="${key}"]`);
        if (target && !target.value) {
          target.value = src.value;
        }
      });
    };

    if (afhalen.checked && !pickupAvailable) {
      showFeedback('Vandaag is afhalen niet mogelijk.', true);
      bezorgen.checked = true;
    }
    if (bezorgen.checked && !deliveryAvailable) {
      showFeedback('Vandaag is bezorging niet mogelijk.', true);
      afhalen.checked = true;
    }
   if (afhalen.checked) {
  transferValues(bezorgenFields, afhalenFields);
  const map = encodeURIComponent(pickupAddress);
  infoBox.innerHTML = `
 <div class="contact-lines">
  <span class="contact-line">
    <img src="https://raw.githubusercontent.com/iamatimnl/Nova-Asia/main/icons/home.svg" alt="Home Icon">
    <a href="https://www.google.com/maps?q=${map}" target="_blank">${pickupAddress}</a>
  </span>

  <span class="contact-line">
    <img src="https://raw.githubusercontent.com/iamatimnl/Nova-Asia/main/icons/phone.svg" alt="Phone Icon">
    <a href="tel:0622599566">0622599566</a>
  </span>

  <span class="contact-line">
    <img src="https://raw.githubusercontent.com/iamatimnl/Nova-Asia/main/icons/email.svg" alt="Email Icon">
    <a href="mailto:novaasianl@gmail.com">novaasianl@gmail.com</a>
  </span>
</div>
`;


      afhalenFields.classList.remove('hidden');
      bezorgenFields.classList.add('hidden');
      populateTimeOptions('pickup_time', 30, pickupOpenTime, pickupCloseTime);
      updateCartPaymentOptions();
    } else {
      transferValues(afhalenFields, bezorgenFields);
      infoBox.textContent = 'Wij bezorgen in de volgende postcodegebieden:\n' + allowedPostcodes.join(', ');

      bezorgenFields.classList.remove('hidden');
      afhalenFields.classList.add('hidden');
      populateTimeOptions('delivery_time', 45, deliveryOpenTime, deliveryCloseTime);
      updateCartPaymentOptions();
    }
    updatePriceBreakdown(currentSubtotal, currentPackaging);
    storeOpen = afhalen.checked ? pickupAvailable : deliveryAvailable;
    
    // 同步下拉菜单和图标，保持双向联动
    const selected = afhalen.checked ? 'afhalen' : 'bezorgen';
    const selectEl = document.getElementById('cartOrderTypeSelect');
    if (selectEl) selectEl.value = selected;

    if (selected !== currentOrderType) {
      updateOrderTypeIcon(selected);
      currentOrderType = selected;
    }
 }

  // 初始化执行一次
  toggleOrderType();
</script>
<script>
  const postcodeInput = document.getElementById('deliveryPostcode');

  postcodeInput.addEventListener('blur', function () {
    const raw = this.value.trim();
    const formatRegex = /^[0-9]{4}[A-Z]{2}$/;
    let hint = document.getElementById('postcodeHint');

    if (!hint) {
      hint = document.createElement('div');
      hint.id = 'postcodeHint';
      hint.style.color = 'red';
      hint.style.marginTop = '4px';
      this.parentNode.appendChild(hint);
    }

    // 格式检查
    if (!formatRegex.test(raw)) {
      this.style.borderColor = 'red';
      hint.textContent = 'Postcode moet het formaat 1234AB hebben (zonder spatie).';
      return;
    }

    // 区域检查
    const postcode = raw.slice(0, 4); // 取前4位数字
    if (allowedPostcodes.length && !allowedPostcodes.includes(postcode)) {
      this.style.borderColor = 'red';
      hint.textContent = `🚫 Wij bezorgen niet in dit postcodegebied (${postcode}).`;
    } else {
      this.style.borderColor = '';
      hint.textContent = '';
    }
  });
</script>
<script>
  const houseNumInput = document.getElementById('deliveryHouseNumber');
  const streetInput = document.getElementById('deliveryAddress');
  const areaInput = document.getElementById('deliveryArea');
  const mapLinkContainer = document.getElementById('mapLinkContainer');

  async function autofillAddress() {
    const postcode = postcodeInput.value.trim();
    const number = houseNumInput.value.trim();
    if (!postcode || !number) return;
    const url = `https://flask-order-api.onrender.com/api/spikkl?postcode=${encodeURIComponent(postcode)}&number=${encodeURIComponent(number)}`;
    try {
      const res = await fetch(url);
      if (res.ok) {
        const data = await res.json();
        if (data.street && !streetInput.value) streetInput.value = data.street;
        if (data.city && !areaInput.value) areaInput.value = data.city;
      } else {
        console.warn('Adres ophalen mislukt');
      }
    } catch (err) {
      console.warn('Adres ophalen mislukt');
    }
  }

  function updateMapLink() {
    const street = streetInput.value.trim();
    const house = houseNumInput.value.trim();
    const pc = postcodeInput.value.trim();
    const city = areaInput.value.trim();
    if (street && house && pc && city) {
      const address = `${street} ${house}, ${pc} ${city}`;
      const url = `https://www.google.com/maps?q=${encodeURIComponent(address)}`;
      mapLinkContainer.innerHTML = `<a href="${url}" target="_blank" style="color: var(--accent-color); text-decoration: underline;">Bekijk op Google Maps</a>`;
    } else {
      mapLinkContainer.innerHTML = '';
    }
  }

  ['blur', 'change'].forEach(evt => {
    postcodeInput.addEventListener(evt, () => { autofillAddress(); updateMapLink(); });
    houseNumInput.addEventListener(evt, () => { autofillAddress(); updateMapLink(); });
  });
  streetInput.addEventListener('blur', updateMapLink);
  areaInput.addEventListener('blur', updateMapLink);
</script>
<script>
function showMobileCartButtonIfNeeded() {
  const toggleBtn = document.getElementById('cart-toggle');
  if (window.innerWidth < 768) {
    toggleBtn.style.display = 'block';
  } else {
    toggleBtn.style.display = 'none';
  }
}

showMobileCartButtonIfNeeded();

window.addEventListener('resize', showMobileCartButtonIfNeeded);
</script>
<script>
const backTopLogo = document.getElementById('back-to-top-logo');
backTopLogo.addEventListener('click', () => {
  window.scrollTo({ top: 0, behavior: 'smooth' });
});
</script>
<script>
  ['chopstickCount', 'soyCount', 'wasabiCount', 'gemberCount'].forEach(id => {
    document.getElementById(id).addEventListener('change', updateCart);
  });
</script>
<script>
function toggleMobileCart() {
  const cartSection = document.getElementById('mobileCart');
  if (!cartSection.classList.contains('mobile-visible')) {
    const missing = getFirstMissingField();
    if (missing) {
      showFeedback('Vul eerst uw gegevens in', true);
      scrollToField(missing);
      return;
    }
  }
  cartSection.classList.toggle('mobile-visible');
}
</script>
  <script>
function updateCartPaymentOptions() {
  const cartSel = document.getElementById('cartPaymentSelect');
  const pickupSel = document.getElementById('pickupPayment');
  const deliverySel = document.getElementById('deliveryPayment');
  if (!cartSel || !pickupSel || !deliverySel) return;
  const orderType = document.querySelector('input[name="orderType"]:checked').value;
  const src = orderType === 'afhalen' ? pickupSel : deliverySel;
  cartSel.innerHTML = src.innerHTML;
  cartSel.value = src.value;
}

document.addEventListener('DOMContentLoaded', () => {
  const cartSel = document.getElementById('cartPaymentSelect');
  const pickupSel = document.getElementById('pickupPayment');
  const deliverySel = document.getElementById('deliveryPayment');
  if (!cartSel || !pickupSel || !deliverySel) return;
  const getCurrent = () => document.querySelector('input[name="orderType"]:checked').value === 'afhalen' ? pickupSel : deliverySel;

  cartSel.addEventListener('change', () => {
    const target = getCurrent();
    target.value = cartSel.value;
  });

  pickupSel.addEventListener('change', () => {
    if (getCurrent() === pickupSel) cartSel.value = pickupSel.value;
  });

  deliverySel.addEventListener('change', () => {
    if (getCurrent() === deliverySel) cartSel.value = deliverySel.value;
  });

  document.querySelectorAll('input[name="orderType"]').forEach(r => r.addEventListener('change', updateCartPaymentOptions));

  updateCartPaymentOptions();
});
</script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const navLinks = document.querySelectorAll('.nav-categories a:not(.review-link)');
  const sections = Array.from(navLinks).map(link => document.querySelector(link.getAttribute('href')));
  const indicator = document.getElementById('indicator');
  const navbarContainer = document.getElementById('navbar-container');
  let currentMode = null;

  // ---------------- 公共函数 ----------------
  function updateIndicator(activeLink) {
    const rect = activeLink.getBoundingClientRect();
    const containerRect = navbarContainer.getBoundingClientRect();
    const scrollLeft = navbarContainer.scrollLeft;
    indicator.style.width = `${rect.width}px`;
    indicator.style.transform = `translateX(${rect.left - containerRect.left + scrollLeft}px)`;
  }

  function scrollToOffset(container, targetOffset, duration = 150) {
    const start = container.scrollLeft;
    const distance = targetOffset - start;
    const startTime = performance.now();

    function animate(time) {
      const elapsed = time - startTime;
      const progress = Math.min(elapsed / duration, 1);
      container.scrollLeft = start + distance * progress;
      if (progress < 1) requestAnimationFrame(animate);
    }

    requestAnimationFrame(animate);
  }

  // ---------------- 移动端逻辑 ----------------
  function initMobile() {
    function scrollActiveLinkIntoView(activeLink) {
      const container = navbarContainer;
      const containerRect = container.getBoundingClientRect();
      const linkRect = activeLink.getBoundingClientRect();
      const offset = linkRect.left - containerRect.left + container.scrollLeft;
      scrollToOffset(container, offset, 120);
    }

    function updateActiveNav() {
      let currentSection = sections[0];
      for (let section of sections) {
        const rect = section.getBoundingClientRect();
        if (rect.top <= 90) currentSection = section;
      }

      navLinks.forEach(link => link.classList.remove('active'));
      const activeLink = Array.from(navLinks).find(link => link.getAttribute('href') === `#${currentSection.id}`);
      if (activeLink) {
        activeLink.classList.add('active');
        updateIndicator(activeLink);
        scrollActiveLinkIntoView(activeLink);
      }
    }

    window.addEventListener('scroll', updateActiveNav);
    window.addEventListener('resize', updateActiveNav);
    updateActiveNav();
    navbarContainer.scrollLeft = 0;
    currentMode = 'mobile';
  }

  // ---------------- 桌面端逻辑 ----------------
  function initDesktop() {
    function scrollActiveLinkIntoView(activeLink) {
      const container = navbarContainer;
      const containerRect = container.getBoundingClientRect();
      const linkRect = activeLink.getBoundingClientRect();
      const offset = linkRect.left - containerRect.left + container.scrollLeft;
      scrollToOffset(container, offset - 20, 150);
    }

    function updateActiveNav() {
      let currentSection = sections[0];
      for (let section of sections) {
        const rect = section.getBoundingClientRect();
        if (rect.top <= 100) currentSection = section;
      }

      navLinks.forEach(link => link.classList.remove('active'));
      const activeLink = Array.from(navLinks).find(link => link.getAttribute('href') === `#${currentSection.id}`);
      if (activeLink) {
        activeLink.classList.add('active');
        updateIndicator(activeLink);
        scrollActiveLinkIntoView(activeLink);
      }
    }

    window.addEventListener('scroll', updateActiveNav);
    window.addEventListener('resize', () => {
      const activeLink = document.querySelector('.nav-categories a.active');
      if (activeLink) updateIndicator(activeLink);
    });

    // 默认激活第一个
    const firstActive = navLinks[0];
    if (firstActive) {
      updateIndicator(firstActive);
      scrollActiveLinkIntoView(firstActive);
    }

    updateActiveNav();
    navbarContainer.scrollLeft = 0;
    currentMode = 'desktop';
  }

  // ---------------- 根据屏幕宽度切换 ----------------
  function applyResponsiveMode() {
    const isMobile = window.innerWidth <= 768;
    const desiredMode = isMobile ? 'mobile' : 'desktop';

    if (currentMode !== desiredMode) {
      // 移除所有绑定事件（简单粗暴，确保不会重复）
      window.onscroll = null;
      window.onresize = null;

      if (isMobile) {
        initMobile();
      } else {
        initDesktop();
      }
    }
  }

  // 初次运行
  applyResponsiveMode();

  // 监听窗口变化
  window.addEventListener('resize', applyResponsiveMode);
});
</script>




<script>
window.addEventListener('DOMContentLoaded', () => {
  const track = document.getElementById('typeSliderTrack');
  const button = document.getElementById('typeSliderButton');
  const text = document.getElementById('typeSliderText');
  const afhalen = document.getElementById('afhalen');
  const bezorgen = document.getElementById('bezorgen');

  if (!track || !button || !text) return;

  function getPadding(el) {
    const style = window.getComputedStyle(el);
    return {
      left: parseInt(style.paddingLeft) || 0,
      right: parseInt(style.paddingRight) || 0
    };
  }

  function getMaxSlide() {
    const padding = getPadding(track);
    return track.offsetWidth - button.offsetWidth - padding.left - padding.right;
  }

  function setLeftPosition(position) {
    const padding = getPadding(track);
    button.style.left = `${padding.left + position}px`;
  }

  function updateTexts(orderType) {
    if (orderType === 'afhalen') {
      button.innerText = 'Pick Up';
      text.innerText = 'Slide to Deliver';
      text.classList.remove('left');
      text.style.right = '4px';
      text.style.left = 'auto';
    } else {
      button.innerText = 'Deliver';
      text.innerText = 'Slide to Pick Up';
      text.classList.add('left');
      text.style.left = '12px';
      text.style.right = 'auto';
    }
  }

  function updateSliderToCurrentRadio() {
    const padding = getPadding(track);
    const maxSlide = getMaxSlide();

    if (bezorgen.checked) {
      setLeftPosition(maxSlide);
      updateTexts('bezorgen');
    } else {
      setLeftPosition(0);
      updateTexts('afhalen');
    }
  }

  updateSliderToCurrentRadio();

  afhalen.addEventListener('change', updateSliderToCurrentRadio);
  bezorgen.addEventListener('change', updateSliderToCurrentRadio);

  // 拖动逻辑
  let isSliding = false;
  let startX = 0;
  let initialLeft = 0;

  const startSlide = (clientX) => {
    isSliding = true;
    startX = clientX;
    initialLeft = parseInt(button.style.left) || getPadding(track).left;
  };

  const moveSlide = (clientX) => {
    if (!isSliding) return;

    const padding = getPadding(track);
    const maxSlide = getMaxSlide();

    const delta = clientX - startX;
    const newLeft = Math.max(0, Math.min(initialLeft + delta - padding.left, maxSlide));

    button.style.left = `${padding.left + newLeft}px`;
  };

  const endSlide = () => {
    if (!isSliding) return;
    isSliding = false;

    const padding = getPadding(track);
    const maxSlide = getMaxSlide();
    const currentLeft = parseInt(button.style.left || '0') - padding.left;
    const movedRatio = currentLeft / maxSlide;

    if (movedRatio > 0.5) {
      // 推到右边
      setLeftPosition(maxSlide);
      updateTexts('bezorgen');
      bezorgen.checked = true;
    } else {
      // 回到左边
      setLeftPosition(0);
      updateTexts('afhalen');
      afhalen.checked = true;
    }

    toggleOrderType(); // 保留表单联动
  };

  button.addEventListener('touchstart', (e) => startSlide(e.touches[0].clientX));
  track.addEventListener('touchmove', (e) => moveSlide(e.touches[0].clientX));
  track.addEventListener('touchend', endSlide);

  button.addEventListener('pointerdown', (e) => startSlide(e.clientX));
  track.addEventListener('pointermove', (e) => moveSlide(e.clientX));
  track.addEventListener('pointerup', endSlide);
  track.addEventListener('pointerleave', endSlide);
});

</script>
<script>
window.addEventListener('DOMContentLoaded', () => {
  const padding = getHorizontalPadding(sliderTrack);
  sliderButton.style.left = `${padding.left}px`;
});

const sliderButton = document.getElementById('sliderButton');
const sliderTrack = document.getElementById('sliderTrack');
const sliderText = document.querySelector('.slider-text');
const sliderContainer = document.querySelector('.slider-container');
if(sliderContainer){
  sliderContainer.addEventListener('click', () => {
    if(!storeOpen){
      showFeedback(closedMessage, true);
      window.scrollTo({top: 0, behavior: 'smooth'});
    }
  });
}

let isSliding = false;
let startX = 0;
let initialLeft = 0;
let isSubmitting = false;

function getHorizontalPadding(el) {
  const style = window.getComputedStyle(el);
  const left = parseInt(style.paddingLeft) || 0;
  const right = parseInt(style.paddingRight) || 0;
  return { left, right };
}

function getMaxSlide() {
  const padding = getHorizontalPadding(sliderTrack);
  const trackWidth = sliderTrack.offsetWidth;
  const buttonWidth = sliderButton.offsetWidth;
  return trackWidth - buttonWidth - padding.left - padding.right;
}

function resetSlider() {
  const padding = getHorizontalPadding(sliderTrack);
  sliderButton.style.left = `${padding.left}px`;
  sliderButton.innerHTML = '<img src="cart-icon.svg" class="cart-icon" />';
  sliderText.innerText = 'Schuif om te bestellen';
  sliderTrack.style.pointerEvents = 'auto';
}

function validateOrderAmount() {
  const orderType = document.querySelector('input[name="orderType"]:checked').value;
  const amount = finalTotal;

  if (orderType === 'bezorgen' && amount < 20) {
    saveOrderForm();
    saveCart();
    resetSlider();
    isSubmitting = false;
    alert('Sorry, de minimum bezorgbedrag is 20 euro.');
    window.location.href = '/';
    return false;
  }

  if (orderType === 'afhalen' && amount === 0) {
    saveOrderForm();
    saveCart();
    resetSlider();
    isSubmitting = false;
    alert('Sorry, u heeft nog niks gekozen.');
    window.location.href = '/';
    return false;
  }

  return true;
}




function triggerCheckout() {
  if (isSubmitting) return;
  if (!validateOrderAmount()) {
    return;
  }
  isSubmitting = true;

  const padding = getHorizontalPadding(sliderTrack);
  sliderButton.style.left = `${padding.left + getMaxSlide()}px`;

  // ⏳ 显示处理中
  sliderText.innerText = 'Bezig met verwerken…';
  sliderButton.innerHTML = `
<svg class="spinner" width="24" height="24" viewBox="0 0 44 44" fill="none" stroke="white">
  <circle cx="22" cy="22" r="20" stroke-width="4" stroke-linecap="round" stroke-dasharray="125" stroke-dashoffset="0">
    <animateTransform attributeName="transform" type="rotate" from="0 22 22" to="360 22 22" dur="1s" repeatCount="indefinite" />
  </circle>
</svg>`;

  sliderTrack.style.pointerEvents = 'none';

  checkout(); // ⬅️ 触发逻辑
}

sliderButton.addEventListener('touchstart', (e) => {
  e.stopPropagation();
  isSliding = true;
  startX = e.touches[0].clientX;
  initialLeft = parseInt(sliderButton.style.left) || getHorizontalPadding(sliderTrack).left;
});

sliderTrack.addEventListener('touchmove', (e) => {
  e.stopPropagation();
  e.preventDefault();
  if (!isSliding) return;

  const padding = getHorizontalPadding(sliderTrack);
  const maxSlide = getMaxSlide();

  const delta = e.touches[0].clientX - startX;
  const moveX = Math.max(0, Math.min(initialLeft + delta - padding.left, maxSlide));

  sliderButton.style.left = `${padding.left + moveX}px`;
});

  sliderTrack.addEventListener('touchend', (e) => {
    e.stopPropagation();
    isSliding = false;
    const padding = getHorizontalPadding(sliderTrack);
    const maxSlide = getMaxSlide();

  const currentLeft = parseInt(sliderButton.style.left || '0') - padding.left;
  const movedRatio = currentLeft / maxSlide;

  if (movedRatio > 0.6) {
    triggerCheckout();
  } else {
    sliderButton.style.left = `${padding.left}px`;
  }
});
</script>
<script>
  (function() {
    const fields = document.querySelectorAll('#afhalenFields input, #afhalenFields select, #bezorgenFields input, #bezorgenFields select');
    let hideTimer;

    function isMobile() {
      return window.innerWidth <= 768 || /Mobi|Android/i.test(navigator.userAgent);
    }

    function requiredFilled() {
      const type = document.querySelector('input[name="orderType"]:checked').value;
      if (type === 'afhalen') {
        return document.getElementById('pickupName').value.trim() &&
               document.getElementById('pickupPhone').value.trim() &&
               document.getElementById('pickupEmail').value.trim() &&
               document.getElementById('pickup_time').value;
      }
      return document.getElementById('deliveryName').value.trim() &&
             document.getElementById('deliveryPhone').value.trim() &&
             document.getElementById('deliveryEmail').value.trim() &&
             document.getElementById('deliveryAddress').value.trim() &&
             document.getElementById('deliveryHouseNumber').value.trim() &&
             document.getElementById('deliveryPostcode').value.trim() &&
             document.getElementById('deliveryArea').value.trim() &&
             document.getElementById('delivery_time').value;
    }

    function scheduleHide() {
      clearTimeout(hideTimer);
      hideTimer = setTimeout(() => {
        if (isMobile() && requiredFilled()) {
          fields.forEach(el => el.blur());
        }
      }, 3000);
    }

    fields.forEach(el => {
      ['input', 'focus', 'click'].forEach(evt => el.addEventListener(evt, scheduleHide));
    });

    document.getElementById('afhalen').addEventListener('change', scheduleHide);
    document.getElementById('bezorgen').addEventListener('change', scheduleHide);
  })();
</script>
<script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
<script>

function inRange(startStr, endStr){
  if(!startStr || !endStr) return true;
  const now = new Date();
  const [sh, sm] = startStr.split(':').map(Number);
  const [eh, em] = endStr.split(':').map(Number);
  const nowMin = now.getHours()*60 + now.getMinutes();
  const sMin = sh*60 + sm;
  const eMin = eh*60 + em;
  if(sMin <= eMin){
    return nowMin >= sMin && nowMin < eMin;
  }
  return nowMin >= sMin || nowMin < eMin;
}

function parseTime(timeStr, startStr){
  if(!timeStr) return null;
  const d = new Date();
  const [h, m] = timeStr.split(':').map(Number);
  d.setHours(h, m, 0, 0);
  if(startStr){
    const [sh, sm] = startStr.split(':').map(Number);
    if(h*60 + m <= sh*60 + sm){
      d.setDate(d.getDate() + 1);
    }
  }
  return d;
}

function updateStatus(settings) {
  currentSettings = settings;
  applyCrispyPrices(settings);
  const banner = document.getElementById('status-banner');
  const hoursEl = document.getElementById('hours-info');
  const checkoutBtn = document.querySelector('.checkout-btn');
  const sliderTrack = document.getElementById('sliderTrack');
  const sliderText = document.getElementById('sliderText');
  const overlayEl = document.getElementById('closed-overlay');
  const afhalen = document.getElementById('afhalen');
  const bezorgen = document.getElementById('bezorgen');
  const bubbleSoldOutMsg = document.getElementById('bubbleSoldOut');
  const bubbleSection = document.getElementById('bubble');
  pickupAddress = settings.pickup_address || pickupAddress;
  allowedPostcodes = (settings.delivery_postcodes || '').split(',').map(s => s.trim()).filter(Boolean);
  showZSM = settings.show_zsm_option !== 'false';

  if (bubbleSoldOutMsg && bubbleSection) {
    const soldout = settings.milktea_soldout === 'true';
    bubbleSoldOutMsg.classList.toggle('hidden', !soldout);
    bubbleSection.querySelectorAll('select, button').forEach(el => {
      el.disabled = soldout;
    });
    if (soldout) {
      document.getElementById('bubbleTeaQty').value = 0;
      if (bubbleSetControls) bubbleSetControls.update();
    }
  }

  const rollConfig = [
    {name: 'Salmon Roll Omakase', key: 'soldout_salmon_roll', qty: 'salmonRollCount', msg: 'soldoutSalmonRoll'},
    {name: 'Dragon Roll Omakase', key: 'soldout_dragon_roll', qty: 'dragonRollCount', msg: 'soldoutDragonRoll'},
    {name: 'Beef Roll Omakase', key: 'soldout_beef_roll', qty: 'beefRollCount', msg: 'soldoutBeefRoll'},
    {name: 'Chicken Roll Omakase', key: 'soldout_chicken_roll', qty: 'chickenRollCount', msg: 'soldoutChickenRoll'},
    {name: 'Nigiri Box Omakase', key: 'soldout_nigiri_box', qty: 'nigiriBoxCount', msg: 'soldoutNigiriBox'}
  ];

  rollConfig.forEach(cfg => {
    const itemEl = document.querySelector(`[data-name="${cfg.name}"]`);
    if (!itemEl) return;
    const soldout = settings[cfg.key] === 'true';
    const msgEl = document.getElementById(cfg.msg);
    if (msgEl) msgEl.classList.toggle('hidden', !soldout);
    itemEl.querySelectorAll('select, button').forEach(el => { el.disabled = soldout; });
    if (soldout && document.getElementById(cfg.qty)) {
      document.getElementById(cfg.qty).value = 0;
    }
  });

  const sashimiConfig = [
    {name: 'Salmon sashimi', key: 'soldout_salmon_sashimi', qty: 'salmonSashimiQty', msg: 'soldoutSalmonSashimi'},
    {name: 'Flamed salmon sashimi', key: 'soldout_flamed_salmon_sashimi', qty: 'flamedsalmonSashimiQty', msg: 'soldoutFlamedSalmonSashimi'},
    {name: 'Tonijn sashimi', key: 'soldout_tonijn_sashimi', qty: 'tonijnSashimiQty', msg: 'soldoutTonijnSashimi'},
    {name: 'Flamed tonijn sashimi', key: 'soldout_flamed_tonijn_sashimi', qty: 'flamedtonijnSashimiQty', msg: 'soldoutFlamedTonijnSashimi'},
    {name: 'Beef sashimi', key: 'soldout_beef_sashimi', qty: 'beefSashimiQty', msg: 'soldoutBeefSashimi'}
  ];

  sashimiConfig.forEach(cfg => {
    const itemEl = document.querySelector(`[data-name="${cfg.name}"]`);
    if (!itemEl) return;
    const soldout = settings[cfg.key] === 'true';
    const msgEl = document.getElementById(cfg.msg);
    if (msgEl) msgEl.classList.toggle('hidden', !soldout);
    itemEl.querySelectorAll('select, button').forEach(el => { el.disabled = soldout; });
    if (soldout && document.getElementById(cfg.qty)) {
      document.getElementById(cfg.qty).value = 0;
    }
  });

  const crispyRiceConfig = [
    {name: 'Zalm crispy rice sandwich', key: 'soldout_zalm_crispy_rice_sandwich', qty: 'zalm-crispy-rice-sandwich', msg: 'soldoutZalmCrispyRiceSandwich'},
    {name: 'Ebi crispy rice sandwich', key: 'soldout_ebi_crispy_rice_sandwich', qty: 'ebiCrispyRiceSandwich', msg: 'soldoutEbiCrispyRiceSandwich'},
    {name: 'Spicytuna crispy rice sandwich', key: 'soldout_spicytuna_crispy_rice_sandwich', qty: 'spicytunaCrispyRiceSandwich', msg: 'soldoutSpicytunaCrispyRiceSandwich'},
    {name: 'Beef crispy rice sandwich', key: 'soldout_beef_crispy_rice_sandwich', qty: 'beefCrispyRiceSandwich', msg: 'soldoutBeefCrispyRiceSandwich'},
    {name: 'California crispy rice sandwich', key: 'soldout_california_crispy_rice_sandwich', qty: 'californiaCrispyRiceSandwich', msg: 'soldoutCaliforniaCrispyRiceSandwich'},
    {name: 'Chicken crispy rice sandwich', key: 'soldout_chicken_crispy_rice_sandwich', qty: 'chickenCrispyRiceSandwich', msg: 'soldoutChickenCrispyRiceSandwich'}
  ];

  crispyRiceConfig.forEach(cfg => {
    const itemEl = document.querySelector(`[data-name="${cfg.name}"]`);
    if (!itemEl) return;
    const soldout = settings[cfg.key] === 'true';
    const msgEl = document.getElementById(cfg.msg);
    if (msgEl) msgEl.classList.toggle('hidden', !soldout);
    itemEl.querySelectorAll('select, button').forEach(el => { el.disabled = soldout; });
    if (soldout && document.getElementById(cfg.qty)) {
      document.getElementById(cfg.qty).value = 0;
    }
  });

  const snackConfig = [
    {name: 'Karaage', key: 'soldout_karaage', qty: 'snackCount', msg: 'soldoutKaraage'},
    {name: 'Ebi Fry – 4 st', key: 'soldout_ebi_fry', qty: 'ebiFryCount', msg: 'soldoutEbiFry'},
    {name: 'Spicy Crispy Chicken – 5 st', key: 'soldout_spicy_crispy_chicken', qty: 'spicyCrispyChickenCount', msg: 'soldoutSpicyCrispyChicken'},
    {name: 'Chicken Loempia – 2 st', key: 'soldout_chicken_loempia', qty: 'chickenLoempiaCount', msg: 'soldoutChickenLoempia'},
    {name: 'Japans Zalm Nugget', key: 'soldout_japans_zalm_nugget', qty: 'japansZalmNuggetCount', msg: 'soldoutJapansZalmNugget'},
    {name: 'Gyoza – 5 st', key: 'soldout_gyoza', qty: 'gyozaCount', msg: 'soldoutGyoza'},
    {name: 'Inktvis Ringen – 5 st', key: 'soldout_inktvis_ringen', qty: 'inktvisRingenCount', msg: 'soldoutInktvisRingen'},
    {name: 'Sesambal – 5 st', key: 'soldout_sesambal', qty: 'sesambalCount', msg: 'soldoutSesambal'},
    {name: 'Yakitori – 4 st', key: 'soldout_yakitori', qty: 'yakitoriCount', msg: 'soldoutYakitori'},
    {name: 'Mini Loempia – 6 st', key: 'soldout_mini_loempia', qty: 'miniLoempiaCount', msg: 'soldoutMiniLoempia'},
    {name: 'Edamame', key: 'soldout_edamame', qty: 'edamameCount', msg: 'soldoutEdamame'},
    {name: 'Kimchi Komkommer', key: 'soldout_kimchi_komkommer', qty: 'kimchiKomkommerCount', msg: 'soldoutKimchiKomkommer'},
    {name: 'Kimchi Kool', key: 'soldout_kimchi_kool', qty: 'kimchiKoolCount', msg: 'soldoutKimchiKool'},
    {name: 'Zeewiersalade – 100g', key: 'soldout_zeewiersalade', qty: 'zeewiersaladeCount', msg: 'soldoutZeewiersalade'}
  ];

  snackConfig.forEach(cfg => {
    const itemEl = document.querySelector(`[data-name="${cfg.name}"]`);
    if (!itemEl) return;
    const soldout = settings[cfg.key] === 'true';
    const msgEl = document.getElementById(cfg.msg);
    if (msgEl) msgEl.classList.toggle('hidden', !soldout);
    itemEl.querySelectorAll('select, button').forEach(el => { el.disabled = soldout; });
    if (soldout && document.getElementById(cfg.qty)) {
      document.getElementById(cfg.qty).value = 0;
    }
  });

  const dessertConfig = [
    {name: 'Mochi Mango', key: 'soldout_mochi_mango', qty: 'mochiMangoCount', msg: 'soldoutMochiMango'},
    {name: 'Mochi Aardbei', key: 'soldout_mochi_aardbei', qty: 'mochiAardbeiCount', msg: 'soldoutMochiAardbei'},
    {name: 'Mochi Matcha', key: 'soldout_mochi_matcha', qty: 'mochiMatchaCount', msg: 'soldoutMochiMatcha'},
    {name: 'Mochi Pistachio', key: 'soldout_mochi_pistachio', qty: 'mochiPistachioCount', msg: 'soldoutMochiPistachio'}
  ];

  dessertConfig.forEach(cfg => {
    const itemEl = document.querySelector(`[data-name="${cfg.name}"]`);
    if (!itemEl) return;
    const soldout = settings[cfg.key] === 'true';
    const msgEl = document.getElementById(cfg.msg);
    if (msgEl) msgEl.classList.toggle('hidden', !soldout);
    itemEl.querySelectorAll('select, button').forEach(el => { el.disabled = soldout; });
    if (soldout && document.getElementById(cfg.qty)) {
      document.getElementById(cfg.qty).value = 0;
    }
  });

  const drinksConfig = [
    {name: 'Cola', key: 'soldout_cola', qty: 'colaCount', msg: 'soldoutCola'},
    {name: 'Cola Zero', key: 'soldout_cola_zero', qty: 'colaZeroCount', msg: 'soldoutColaZero'},
    {name: 'Spa Blauw', key: 'soldout_spa_blauw', qty: 'spaBlauwCount', msg: 'soldoutSpaBlauw'},
    {name: 'Spa Rood', key: 'soldout_spa_rood', qty: 'spaRoodCount', msg: 'soldoutSpaRood'},
    {name: 'Red Bull', key: 'soldout_red_bull', qty: 'redBullCount', msg: 'soldoutRedBull'}
  ];

  drinksConfig.forEach(cfg => {
    const itemEl = document.querySelector(`[data-name="${cfg.name}"]`);
    if (!itemEl) return;
    const soldout = settings[cfg.key] === 'true';
    const msgEl = document.getElementById(cfg.msg);
    if (msgEl) msgEl.classList.toggle('hidden', !soldout);
    itemEl.querySelectorAll('select, button').forEach(el => { el.disabled = soldout; });
    if (soldout && document.getElementById(cfg.qty)) {
      document.getElementById(cfg.qty).value = 0;
    }
  });

  const bentoConfig = [
    {name: 'Japans Chicken Bento', key: 'soldout_japans_chicken_bento', qty: 'japansChickenBentoCount', msg: 'soldoutJapansChickenBento'},
    {name: 'Korean Chicken Bento', key: 'soldout_korean_chicken_bento', qty: 'koreanChickenBentoCount', msg: 'soldoutKoreanChickenBento'},
    {name: 'Korean Beef Bento', key: 'soldout_korean_beef_bento', qty: 'koreanBeefBentoCount', msg: 'soldoutKoreanBeefBento'},
    {name: 'Meatlover Bento', key: 'soldout_meatlover_bento', qty: 'meatloverBentoCount', msg: 'soldoutMeatloverBento'},
    {name: 'Zalm Lover Bento', key: 'soldout_zalm_lover_bento', qty: 'zalmLoverBentoCount', msg: 'soldoutZalmLoverBento'},
    {name: 'Ebi Lover Bento', key: 'soldout_ebi_lover_bento', qty: 'ebiLoverBentoCount', msg: 'soldoutEbiLoverBento'},
    {name: 'Surf & Turf Bento', key: 'soldout_surf_turf_bento', qty: 'surfTurfBentoCount', msg: 'soldoutSurfTurfBento'},
    {name: 'Dimsum Bento', key: 'soldout_dimsum_bento', qty: 'dimsumBentoCount', msg: 'soldoutDimsumBento'},
    {name: 'Lamskotelet Bento', key: 'soldout_lamskotelet_bento', qty: 'lamsBentoCount', msg: 'soldoutLamskoteletBento'},
    {name: 'Unagi Bento', key: 'soldout_unagi_bento', qty: 'unagiBentoCount', msg: 'soldoutUnagiBento'},
    {name: 'Tuna Bento', key: 'soldout_tuna_bento', qty: 'tunaBentoCount', msg: 'soldoutTunaBento'},
    {name: 'Veggie Bento', key: 'soldout_veggie_bento', qty: 'veggieBentoCount', msg: 'soldoutVeggieBento'},
    {name: 'Bento Sushi Omakase', key: 'soldout_sushi_bento', qty: 'sushiBentoCount', msg: 'soldoutSushiBento'},
    {name: 'Xbento', key: 'soldout_xbento', qty: 'xBentoQty', msg: 'soldoutXbento'}
  ];

  bentoConfig.forEach(cfg => {
    const itemEl = document.querySelector(`[data-name="${cfg.name}"]`);
    if (!itemEl) return;
    const soldout = settings[cfg.key] === 'true';
    const msgEl = document.getElementById(cfg.msg);
    if (msgEl) msgEl.classList.toggle('hidden', !soldout);
    itemEl.querySelectorAll('select, button').forEach(el => { el.disabled = soldout; });
    if (soldout && document.getElementById(cfg.qty)) {
      document.getElementById(cfg.qty).value = 0;
    }
  });

  const pokebowlConfig = [
    {name: 'Zalm Bowl', key: 'soldout_zalm_bowl', qty: 'zalmBowlQty', msg: 'soldoutZalmBowl'},
    {name: 'Tuna Bowl', key: 'soldout_tuna_bowl', qty: 'tunaBowlQty', msg: 'soldoutTunaBowl'},
    {name: 'Ebi Fry Bowl', key: 'soldout_ebi_fry_bowl', qty: 'ebiFryBowlQty', msg: 'soldoutEbiFryBowl'},
    {name: 'Chicken Karaage Bowl', key: 'soldout_chicken_karaage_bowl', qty: 'chickenKaraageBowlQty', msg: 'soldoutChickenKaraageBowl'},
    {name: 'Spicy Chicken Bowl', key: 'soldout_spicy_chicken_bowl', qty: 'spicyChickenBowlQty', msg: 'soldoutSpicyChickenBowl'},
    {name: 'Teriyaki Chicken Bowl', key: 'soldout_teriyaki_chicken_bowl', qty: 'teriyakiChickenBowlQty', msg: 'soldoutTeriyakiChickenBowl'},
    {name: 'Teriyaki Beef Bowl', key: 'soldout_teriyaki_beef_bowl', qty: 'teriyakiBeefBowlQty', msg: 'soldoutTeriyakiBeefBowl'},
    {name: 'California Bowl', key: 'soldout_california_bowl', qty: 'californiaBowlQty', msg: 'soldoutCaliforniaBowl'},
    {name: 'Vega Bowl', key: 'soldout_vega_bowl', qty: 'vegaBowlQty', msg: 'soldoutVegaBowl'},
    {name: 'Meatlover Bowl', key: 'soldout_meatlover_bowl', qty: 'meatloverBowlQty', msg: 'soldoutMeatloverBowl'},
    {name: 'Rainbow Bowl', key: 'soldout_rainbow_bowl', qty: 'rainbowBowlQty', msg: 'soldoutRainbowBowl'},
    {name: 'Spicy Tuna Bowl', key: 'soldout_spicy_tuna_bowl', qty: 'spicyTunaBowlQty', msg: 'soldoutSpicyTunaBowl'},
    {name: 'Flamed Zalm Bowl', key: 'soldout_flamed_zalm_bowl', qty: 'flamedZalmBowlQty', msg: 'soldoutFlamedZalmBowl'},
    {name: 'Flamed Tuna Bowl', key: 'soldout_flamed_tuna_bowl', qty: 'flamedTunaBowlQty', msg: 'soldoutFlamedTunaBowl'},
  ];

  pokebowlConfig.forEach(cfg => {
    const itemEl = document.querySelector(`[data-name="${cfg.name}"]`);
    if (!itemEl) return;
    const soldout = settings[cfg.key] === 'true';
    const msgEl = document.getElementById(cfg.msg);
    if (msgEl) msgEl.classList.toggle('hidden', !soldout);
    itemEl.querySelectorAll('select, button').forEach(el => { el.disabled = soldout; });
    if (soldout && document.getElementById(cfg.qty)) {
      document.getElementById(cfg.qty).value = 0;
    }
  });

  const ramenConfig = [
    {name: 'Ebi Furai', key: 'soldout_ebi_ramen', qty: 'ebiQty', msg: 'soldoutEbiRamen'},
    {name: 'Chicken', key: 'soldout_chicken_ramen', qty: 'chickenQty', msg: 'soldoutChickenRamen'},
    {name: 'Beef', key: 'soldout_beef_ramen', qty: 'beefQty', msg: 'soldoutBeefRamen'},
    {name: 'Ribeye', key: 'soldout_ribeye_ramen', qty: 'ribeyeQty', msg: 'soldoutRibeyeRamen'},
    {name: 'Chasiu', key: 'soldout_chasiu_ramen', qty: 'chasiuQty', msg: 'soldoutChasiuRamen'},
    {name: 'Zhai', key: 'soldout_zhai_ramen', qty: 'zhaiQty', msg: 'soldoutZhaiRamen'}
  ];

  const teppanyakiConfig = [
    {name: 'Teppanyaki Shrimp', key: 'soldout_teppanyaki_shrimp', qty: 'teppShrimpQty', msg: 'soldoutTeppShrimp'},
    {name: 'Teppanyaki Beef', key: 'soldout_teppanyaki_beef', qty: 'teppBeefQty', msg: 'soldoutTeppBeef'},
    {name: 'Teppanyaki Chicken', key: 'soldout_teppanyaki_chicken', qty: 'teppChickenQty', msg: 'soldoutTeppChicken'},
    {name: 'Teppanyaki Char Siu', key: 'soldout_teppanyaki_char_siu', qty: 'teppCharSiuQty', msg: 'soldoutTeppCharSiu'}
  ];

  ramenConfig.forEach(cfg => {
    const itemEl = document.querySelector(`[data-name="${cfg.name}"]`);
    if (!itemEl) return;
    const soldout = settings[cfg.key] === 'true';
    const msgEl = document.getElementById(cfg.msg);
    if (msgEl) msgEl.classList.toggle('hidden', !soldout);
    itemEl.querySelectorAll('select, button').forEach(el => { el.disabled = soldout; });
    if (soldout && document.getElementById(cfg.qty)) {
      document.getElementById(cfg.qty).value = 0;
    }
  });

  teppanyakiConfig.forEach(cfg => {
    const itemEl = document.querySelector(`[data-name="${cfg.name}"]`);
    if (!itemEl) return;
    const soldout = settings[cfg.key] === 'true';
    const msgEl = document.getElementById(cfg.msg);
    if (msgEl) msgEl.classList.toggle('hidden', !soldout);
    itemEl.querySelectorAll('select, button').forEach(el => { el.disabled = soldout; });
    if (soldout && document.getElementById(cfg.qty)) {
      document.getElementById(cfg.qty).value = 0;
    }
  });

  if (settings.milktea_price) {
    milkTeaPrice = parseFloat(settings.milktea_price);
    updateMilkTeaDisplay();
  }

  const closedDays = (settings.closed_days || '').split(',').filter(d => d);
  const allClosed = closedDays.length === 7;
  const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
  const todayName = dayNames[new Date().getDay()];

  const hoursText = `Dagelijks ${settings.open_time} - ${settings.close_time}`;
  let closedText = '';
  if (allClosed) {
    closedText = ', Closed All Week';
  } else if (closedDays.length) {
    closedText = ', Closed on ' + closedDays.join(', ');
  }
  hoursEl.textContent = hoursText + closedText;

  pickupOpenTime = settings.pickup_start || pickupOpenTime;
  pickupCloseTime = settings.pickup_end || pickupCloseTime;
  deliveryOpenTime = settings.delivery_start || deliveryOpenTime;
  deliveryCloseTime = settings.delivery_end || deliveryCloseTime;
  timeInterval = parseInt(settings.time_interval || timeInterval);

  populateTimeOptions('pickup_time', 30, pickupOpenTime, pickupCloseTime);
  populateTimeOptions('delivery_time', 45, deliveryOpenTime, deliveryCloseTime);

  const websiteOn = settings.is_open !== 'false' && !allClosed;
  const dayOpen = closedDays.indexOf(todayName) === -1;

  pickupAvailable = websiteOn && dayOpen && settings.pickup_enabled !== 'false';
  deliveryAvailable = websiteOn && dayOpen && settings.delivery_enabled !== 'false';

  const pickupTimes = getSelectTimes('pickup_time', pickupOpenTime);
  const deliveryTimes = getSelectTimes('delivery_time', deliveryOpenTime);

  const now = new Date();

  const pickupTooLate = pickupTimes.latest && now > pickupTimes.latest;
  const deliveryTooLate = deliveryTimes.latest && now > deliveryTimes.latest;

  const pickupOrderable = pickupAvailable && !pickupTooLate;
  const deliveryOrderable = deliveryAvailable && !deliveryTooLate;

  let message = '';

  if (allClosed) {
    storeOpen = false;
    message = 'This week the store is closed.';
  } else if (!websiteOn) {
    storeOpen = false;
    message = 'De website is momenteel gesloten';
  } else if (!pickupOrderable && !deliveryOrderable) {
    storeOpen = false;
    message = 'Vandaag afhalen en bezorgen zijn niet meer mogelijk.';
  } else if (afhalen.checked) {
    if (!pickupOrderable) {
      if (deliveryOrderable) {
        message = 'Afhalen is niet meer mogelijk, maar bezorgen is nog beschikbaar.';
        bezorgen.checked = true;
        afhalen.checked = false;
        toggleOrderType();
        storeOpen = true;
      } else {
        storeOpen = false;
        message = 'Vandaag afhalen en bezorgen zijn niet meer mogelijk.';
      }
    } else {
      storeOpen = true;
      if (pickupTooLate) {
        message = 'Vandaag afhalen is niet meer mogelijk.';
      } else {
        message = '';
      }
    }
  } else { // bezorgen.checked
    if (!deliveryOrderable) {
      if (pickupOrderable) {
        message = 'Bezorgen is niet meer mogelijk, maar afhalen is nog beschikbaar.';
        afhalen.checked = true;
        bezorgen.checked = false;
        toggleOrderType();
        storeOpen = true;
      } else {
        storeOpen = false;
        message = 'Vandaag afhalen en bezorgen zijn niet meer mogelijk.';
      }
    } else {
      storeOpen = true;
      if (deliveryTooLate) {
        message = 'Vandaag bezorgen we niet meer.';
      } else {
        message = '';
      }
    }
  }

  closedMessage = message;
  businessHours = hoursEl.textContent;

  if (storeOpen) {
    banner.textContent = message;
    if (overlayEl) overlayEl.style.display = 'none';
    hideClosedPopup();
    if (checkoutBtn) checkoutBtn.disabled = false;
    if (sliderTrack) {
      sliderTrack.style.pointerEvents = 'auto';
      if (sliderText) sliderText.textContent = 'Schuif om te bestellen';
    }
  } else {
    banner.textContent = message;
    if (overlayEl) overlayEl.style.display = 'flex';
    showClosedPopup();
    window.scrollTo({ top: 0, behavior: 'smooth' });
    if (checkoutBtn) checkoutBtn.disabled = true;
    if (sliderTrack) {
      sliderTrack.style.pointerEvents = 'none';
      if (sliderText) sliderText.textContent = 'Momenteel gesloten';
    }
  }
  banner.style.display = 'block';
  toggleOrderType();
  Object.keys(cart).forEach(name => {
    if (isItemSoldOut(name)) delete cart[name];
  });
  updateCart();
}


function updateTimes(settings){
  pickupOpenTime = settings.pickup_start || pickupOpenTime;
  pickupCloseTime = settings.pickup_end || pickupCloseTime;
  deliveryOpenTime = settings.delivery_start || deliveryOpenTime;
  deliveryCloseTime = settings.delivery_end || deliveryCloseTime;
  timeInterval = parseInt(settings.time_interval || timeInterval);
  populateTimeOptions('pickup_time', 30, pickupOpenTime, pickupCloseTime);
  populateTimeOptions('delivery_time', 45, deliveryOpenTime, deliveryCloseTime);
}

function fetchStatus(){
  fetch('/api/settings')
    .then(r => r.json())
    .then(updateStatus);
}
fetchStatus();
fetchBubbleOptions();
fetchXbentoOptions();
const socket = io();
socket.on('setting_update', updateStatus);
socket.on('time_update', updateTimes);
socket.on('milktea_price_update', data => {
  milkTeaPrice = parseFloat(data.price || data);
  updateMilkTeaDisplay();
});
socket.on('bubble_options_update', data => {
  bubbleOptions = data;
  populateBubbleSelectors();
  updateMilkTeaDisplay();
  updateBubbleCartPrices();
});
socket.on('xbento_options_update', data => {
  xbentoOptions = data;
  populateXbentoSelectors();
  updateXbentoDisplay();
  updateXbentoCartPrices();
});
socket.on('crispy_price_update', data => {
  applyCrispyPrices(data);
});
const overlay = document.getElementById('closed-overlay');
if(overlay){
  overlay.addEventListener('click', () => {
    showClosedPopup();
  });
}
const okBtn = document.getElementById('closed-ok');
if(okBtn){
  okBtn.addEventListener('click', hideClosedPopup);
}
document.addEventListener('click', e => {
  const popup = document.getElementById('closed-popup');
  if(!storeOpen && popup && !popup.contains(e.target)){
    showClosedPopup();
    e.stopPropagation();
    e.preventDefault();
  }
}, true);
</script>

<div id="xBowlAddedModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.4); align-items:center; justify-content:center; z-index:1000;">
  <div style="background:white; padding:20px; border-radius:12px; text-align:center;">
    <p>Toegevoegd aan winkelwagen! Wilt u een nieuwe maken?</p>
    <div style="display:flex; gap:10px; justify-content:center; margin-top:10px;">
      <button id="xBowlAgain">Ja, graag</button>
      <button id="xBowlClose">Nee, bedankt</button>
    </div>
  </div>
</div>

<div id="reviewsModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.5); align-items:center; justify-content:center; z-index:1000;">
  <div style="background:white; padding:20px; width:100%; height:100%; overflow:auto;" id="reviewsContent">
    <h2>Reviews</h2>
    <div id="reviewsList"></div>
    <button id="closeReviews">Sluiten</button>
  </div>
</div>

<script>
  const modal = document.getElementById('reviewsModal');
  const openBtn = document.getElementById('openReviews');
  const closeBtn = document.getElementById('closeReviews');
  const reviewsList = document.getElementById('reviewsList');

  function renderReviews(data){
    reviewsList.innerHTML = data.map(r => {
      const stars = '★'.repeat(r.rating || 0) + '☆'.repeat(5 - (r.rating || 0));
      return `<p><strong>${r.customer_name}</strong> <span class="stars">${stars}</span><br>${r.content}</p>`;
    }).join('');
  }

  async function loadReviews(){
    const r = await fetch('/api/reviews');
    if(r.ok){
      const d = await r.json();
      renderReviews(d);
    }
  }

  openBtn.addEventListener('click', () => {
    modal.style.display = 'flex';
    loadReviews();
  });
  closeBtn.addEventListener('click', () => { modal.style.display = 'none'; });
  if(typeof socket !== 'undefined'){
    socket.on('new_review', () => {
      if(modal.style.display !== 'none') loadReviews();
    });
  }

  const xbowlModal = document.getElementById('xBowlAddedModal');
  const againBtn = document.getElementById('xBowlAgain');
  const closeXBowlBtn = document.getElementById('xBowlClose');
  function showXBowlModal(){ if(xbowlModal) xbowlModal.style.display='flex'; }
  function hideXBowlModal(){ if(xbowlModal) xbowlModal.style.display='none'; }
  if(againBtn){ againBtn.addEventListener('click', ()=>{ clearXBowlSet(); hideXBowlModal(); }); }
  if(closeXBowlBtn){ closeXBowlBtn.addEventListener('click', hideXBowlModal); }

</script>





</body></html>
